#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.06kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/HanaokaYuzu/Gemini-API.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /Gemini-API/. /repo && rm -rf /Gemini-API/ &&     rm -rf /Gemini-API &&     cd /repo && git checkout e8a2d232131b15a094a859827cc9a6278b2e4494 &&     pip install -e /repo
#6 1.760 Looking in indexes: http://simple/
#6 1.916 Collecting pytest
#6 1.934   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.958      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 17.5 MB/s eta 0:00:00
#6 2.025 Collecting pytest-xdist
#6 2.042   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 2.054      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.4 MB/s eta 0:00:00
#6 2.117 Collecting exceptiongroup>=1.0.0rc8
#6 2.140   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.173 Collecting iniconfig
#6 2.192   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.252 Collecting tomli>=1
#6 2.268   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.316 Collecting pluggy<2,>=1.5
#6 2.336   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.399 Collecting packaging
#6 2.418   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.430      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#6 2.491 Collecting execnet>=2.1
#6 2.522   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.531      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 6.1 MB/s eta 0:00:00
#6 2.682 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.317 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.317 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.433 
#6 3.433 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.433 [notice] To update, run: pip install --upgrade pip
#6 4.127 Looking in indexes: http://simple/
#6 4.208 Collecting pipdeptree
#6 4.230   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.368 Collecting pip>=24.2
#6 4.380   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.398 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.511 Installing collected packages: pip, pipdeptree
#6 4.511   Attempting uninstall: pip
#6 4.512     Found existing installation: pip 23.0.1
#6 4.683     Uninstalling pip-23.0.1:
#6 4.852       Successfully uninstalled pip-23.0.1
#6 6.229 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 6.230 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.450 Cloning into 'Gemini-API'...
#6 8.377 Note: switching to 'e8a2d232131b15a094a859827cc9a6278b2e4494'.
#6 8.377 
#6 8.377 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.377 changes and commit them, and you can discard any commits you make in this
#6 8.377 state without impacting any branches by switching back to a branch.
#6 8.377 
#6 8.377 If you want to create a new branch to retain commits you create, you may
#6 8.377 do so (now or later) by using -c with the switch command. Example:
#6 8.377 
#6 8.377   git switch -c <new-branch-name>
#6 8.377 
#6 8.377 Or undo this operation with:
#6 8.377 
#6 8.377   git switch -
#6 8.377 
#6 8.377 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.377 
#6 8.377 HEAD is now at e8a2d23 fix: replace deprecated argument
#6 8.936 Looking in indexes: http://simple/
#6 8.937 Obtaining file:///repo
#6 8.942   Installing build dependencies: started
#6 11.50   Installing build dependencies: finished with status 'done'
#6 11.50   Checking if build backend supports build_editable: started
#6 11.75   Checking if build backend supports build_editable: finished with status 'done'
#6 11.75   Getting requirements to build editable: started
#6 12.16   Getting requirements to build editable: finished with status 'done'
#6 12.16   Preparing editable metadata (pyproject.toml): started
#6 12.54   Preparing editable metadata (pyproject.toml): finished with status 'done'
#6 12.62 Collecting httpx~=0.28.0 (from gemini-webapi==1.7.0)
#6 12.63   Downloading http://packages/httpx/httpx-0.28.1-py3-none-any.whl (73 kB)
#6 12.96 Collecting pydantic~=2.10.2 (from gemini-webapi==1.7.0)
#6 12.98   Downloading http://packages/pydantic/pydantic-2.10.4-py3-none-any.whl (431 kB)
#6 13.05 Collecting loguru~=0.7.2 (from gemini-webapi==1.7.0)
#6 13.07   Downloading http://packages/loguru/loguru-0.7.3-py3-none-any.whl (61 kB)
#6 13.14 Collecting anyio (from httpx~=0.28.0->gemini-webapi==1.7.0)
#6 13.17   Downloading http://packages/anyio/anyio-4.8.0-py3-none-any.whl (96 kB)
#6 13.23 Collecting certifi (from httpx~=0.28.0->gemini-webapi==1.7.0)
#6 13.24   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#6 13.29 Collecting httpcore==1.* (from httpx~=0.28.0->gemini-webapi==1.7.0)
#6 13.32   Downloading http://packages/httpcore/httpcore-1.0.7-py3-none-any.whl (78 kB)
#6 13.36 Collecting idna (from httpx~=0.28.0->gemini-webapi==1.7.0)
#6 13.37   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 13.40 Collecting h11<0.15,>=0.13 (from httpcore==1.*->httpx~=0.28.0->gemini-webapi==1.7.0)
#6 13.42   Downloading http://packages/h11/h11-0.14.0-py3-none-any.whl (58 kB)
#6 13.45 Collecting annotated-types>=0.6.0 (from pydantic~=2.10.2->gemini-webapi==1.7.0)
#6 13.47   Downloading http://packages/annotated-types/annotated_types-0.7.0-py3-none-any.whl (13 kB)
#6 14.85 Collecting pydantic-core==2.27.2 (from pydantic~=2.10.2->gemini-webapi==1.7.0)
#6 14.87   Downloading http://packages/pydantic-core/pydantic_core-2.27.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
#6 14.95      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 30.2 MB/s eta 0:00:00
#6 15.00 Collecting typing-extensions>=4.12.2 (from pydantic~=2.10.2->gemini-webapi==1.7.0)
#6 15.02   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#6 15.05 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio->httpx~=0.28.0->gemini-webapi==1.7.0) (1.2.2)
#6 15.07 Collecting sniffio>=1.1 (from anyio->httpx~=0.28.0->gemini-webapi==1.7.0)
#6 15.09   Downloading http://packages/sniffio/sniffio-1.3.1-py3-none-any.whl (10 kB)
#6 15.11 Building wheels for collected packages: gemini-webapi
#6 15.11   Building editable for gemini-webapi (pyproject.toml): started
#6 15.58   Building editable for gemini-webapi (pyproject.toml): finished with status 'done'
#6 15.58   Created wheel for gemini-webapi: filename=gemini_webapi-1.7.0-0.editable-py3-none-any.whl size=30430 sha256=bbcd351fe04e659ec07ebb3f51c314922cedd02ead13ff7ef5f3b1d0197a002f
#6 15.58   Stored in directory: /tmp/pip-ephem-wheel-cache-59ux1ko3/wheels/83/05/69/977b54e69478800cfcea8a9437a7ea4a9b1a48db334f824611
#6 15.59 Successfully built gemini-webapi
#6 15.65 Installing collected packages: typing-extensions, sniffio, loguru, idna, h11, certifi, annotated-types, pydantic-core, httpcore, anyio, pydantic, httpx, gemini-webapi
#6 16.68 Successfully installed annotated-types-0.7.0 anyio-4.8.0 certifi-2024.12.14 gemini-webapi-1.7.0 h11-0.14.0 httpcore-1.0.7 httpx-0.28.1 idna-3.10 loguru-0.7.3 pydantic-2.10.4 pydantic-core-2.27.2 sniffio-1.3.1 typing-extensions-4.12.2
#6 16.68 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 17.3s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_ai_image_generation
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_card_content
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_chatsession_with_image
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_continuous_conversation
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_extension_google_workspace
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_extension_youtube
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_reply_candidates
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_retrieve_previous_conversation
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_send_web_image
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_successful_request
#7 1.369 tests/test_client_features.py::TestGeminiClient::test_upload_image
#7 1.369 tests/test_save_image.py::TestGeminiClient::test_save_generated_image
#7 1.369 tests/test_save_image.py::TestGeminiClient::test_save_web_image
#7 1.369 
#7 1.369 13 tests collected in 0.31s
#7 DONE 1.6s

#8 exporting to image
#8 exporting layers
#8 exporting layers 0.4s done
#8 writing image sha256:f193c94951433d6e6a9cf347d03b3dc242111335b768d3acc68a4d2398aa2a5d done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 0.4s
