#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.10kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/6] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/6] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/6] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/paradigmxyz/spice.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /spice/. /repo && rm -rf /spice/ &&     rm -rf /spice &&     cd /repo && git checkout e962a9c435d2f990fe5684d6a876a8b13287f5ee &&     pip install flit==3.10.1
#6 1.711 Looking in indexes: http://simple/
#6 1.871 Collecting pytest
#6 1.894   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.919      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 17.2 MB/s eta 0:00:00
#6 1.993 Collecting pytest-xdist
#6 2.011   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 2.023      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.8 MB/s eta 0:00:00
#6 2.086 Collecting exceptiongroup>=1.0.0rc8
#6 2.105   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.172 Collecting packaging
#6 2.191   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.203      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#6 2.235 Collecting iniconfig
#6 2.255   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.306 Collecting pluggy<2,>=1.5
#6 2.325   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.389 Collecting tomli>=1
#6 2.408   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.471 Collecting execnet>=2.1
#6 2.491   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.501      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 6.6 MB/s eta 0:00:00
#6 2.648 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.214 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.215 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.349 
#6 3.349 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.349 [notice] To update, run: pip install --upgrade pip
#6 4.166 Looking in indexes: http://simple/
#6 4.259 Collecting pipdeptree
#6 4.280   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.313 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.435 Collecting pip>=24.2
#6 4.447   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.579 Installing collected packages: pip, pipdeptree
#6 4.579   Attempting uninstall: pip
#6 4.580     Found existing installation: pip 23.0.1
#6 4.764     Uninstalling pip-23.0.1:
#6 4.952       Successfully uninstalled pip-23.0.1
#6 6.419 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 6.419 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.579 Cloning into 'spice'...
#6 8.543 Note: switching to 'e962a9c435d2f990fe5684d6a876a8b13287f5ee'.
#6 8.543 
#6 8.543 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.543 changes and commit them, and you can discard any commits you make in this
#6 8.543 state without impacting any branches by switching back to a branch.
#6 8.543 
#6 8.543 If you want to create a new branch to retain commits you create, you may
#6 8.543 do so (now or later) by using -c with the switch command. Example:
#6 8.543 
#6 8.543   git switch -c <new-branch-name>
#6 8.543 
#6 8.543 Or undo this operation with:
#6 8.543 
#6 8.543   git switch -
#6 8.543 
#6 8.543 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.543 
#6 8.543 HEAD is now at e962a9c bump to 0.2.5
#6 9.087 Looking in indexes: http://simple/
#6 9.152 Collecting flit==3.10.1
#6 9.178   Downloading http://packages/flit/flit-3.10.1-py3-none-any.whl (50 kB)
#6 9.237 Collecting flit_core>=3.10.1 (from flit==3.10.1)
#6 9.261   Downloading http://packages/flit-core/flit_core-3.10.1-py3-none-any.whl (36 kB)
#6 9.344 Collecting requests (from flit==3.10.1)
#6 9.347   Using cached http://packages/requests/requests-2.32.3-py3-none-any.whl (64 kB)
#6 9.392 Collecting docutils (from flit==3.10.1)
#6 9.412   Downloading http://packages/docutils/docutils-0.21.2-py3-none-any.whl (587 kB)
#6 9.499      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 587.4/587.4 kB 26.0 MB/s eta 0:00:00
#6 9.528 Collecting tomli-w (from flit==3.10.1)
#6 9.547   Downloading http://packages/tomli-w/tomli_w-1.1.0-py3-none-any.whl (6.4 kB)
#6 9.556 Requirement already satisfied: pip in /usr/local/lib/python3.10/site-packages (from flit==3.10.1) (24.3.1)
#6 9.738 Collecting charset-normalizer<4,>=2 (from requests->flit==3.10.1)
#6 9.741   Using cached http://packages/charset-normalizer/charset_normalizer-3.4.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (146 kB)
#6 9.779 Collecting idna<4,>=2.5 (from requests->flit==3.10.1)
#6 9.782   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 9.875 Collecting urllib3<3,>=1.21.1 (from requests->flit==3.10.1)
#6 9.878   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#6 9.928 Collecting certifi>=2017.4.17 (from requests->flit==3.10.1)
#6 9.931   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#6 9.994 Installing collected packages: urllib3, tomli-w, idna, flit_core, docutils, charset-normalizer, certifi, requests, flit
#6 10.95 Successfully installed certifi-2024.12.14 charset-normalizer-3.4.1 docutils-0.21.2 flit-3.10.1 flit_core-3.10.1 idna-3.10 requests-2.32.3 tomli-w-1.1.0 urllib3-2.3.0
#6 10.95 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 11.4s

#7 [4/6] RUN cd /repo && flit install --deps all
#7 0.821 Unexpected names under [project]: dev-dependencies  W-flit_core.config
#7 0.821 Fetching list of valid trove classifiers               I-flit.validate
#7 1.720 Extras to install for deps 'all': {'test', '.none'}     I-flit.install
#7 2.260 Looking in indexes: http://simple/
#7 2.260 Processing /repo
#7 2.265   Installing build dependencies: started
#7 3.107   Installing build dependencies: finished with status 'done'
#7 3.109   Getting requirements to build wheel: started
#7 3.243   Getting requirements to build wheel: finished with status 'done'
#7 3.245   Preparing metadata (pyproject.toml): started
#7 3.393   Preparing metadata (pyproject.toml): finished with status 'done'
#7 3.784 Collecting polars>=1.0 (from dune_spice==0.2.5)
#7 3.805   Downloading http://packages/polars/polars-1.19.0-cp39-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (32.8 MB)
#7 3.997      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 32.8/32.8 MB 185.9 MB/s eta 0:00:00
#7 4.129 Requirement already satisfied: requests>=2.16 in /usr/local/lib/python3.10/site-packages (from dune_spice==0.2.5) (2.32.3)
#7 4.974 Collecting aiohttp>=3.9.5 (from dune_spice==0.2.5)
#7 4.996   Downloading http://packages/aiohttp/aiohttp-3.11.11-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.6 MB)
#7 5.035      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.6/1.6 MB 60.4 MB/s eta 0:00:00
#7 5.169 Collecting rich>=13.3.3 (from dune_spice==0.2.5)
#7 5.188   Downloading http://packages/rich/rich-13.9.4-py3-none-any.whl (242 kB)
#7 5.240 Collecting rich-argparse>=1.5.2 (from dune_spice==0.2.5)
#7 5.260   Downloading http://packages/rich-argparse/rich_argparse-1.6.0-py3-none-any.whl (20 kB)
#7 5.306 Collecting typing-extensions>=4.9.0 (from dune_spice==0.2.5)
#7 5.323   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#7 5.376 Collecting aiohappyeyeballs>=2.3.0 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 5.396   Downloading http://packages/aiohappyeyeballs/aiohappyeyeballs-2.4.4-py3-none-any.whl (14 kB)
#7 5.427 Collecting aiosignal>=1.1.2 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 5.449   Downloading http://packages/aiosignal/aiosignal-1.3.2-py2.py3-none-any.whl (7.6 kB)
#7 5.488 Collecting async-timeout<6.0,>=4.0 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 5.507   Downloading http://packages/async-timeout/async_timeout-5.0.1-py3-none-any.whl (6.2 kB)
#7 5.556 Collecting attrs>=17.3.0 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 5.574   Downloading http://packages/attrs/attrs-24.3.0-py3-none-any.whl (63 kB)
#7 5.785 Collecting frozenlist>=1.1.1 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 5.804   Downloading http://packages/frozenlist/frozenlist-1.5.0-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (241 kB)
#7 6.185 Collecting multidict<7.0,>=4.5 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 6.204   Downloading http://packages/multidict/multidict-6.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (124 kB)
#7 6.294 Collecting propcache>=0.2.0 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 6.312   Downloading http://packages/propcache/propcache-0.2.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (205 kB)
#7 6.892 Collecting yarl<2.0,>=1.17.0 (from aiohttp>=3.9.5->dune_spice==0.2.5)
#7 6.911   Downloading http://packages/yarl/yarl-1.18.3-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (319 kB)
#7 6.946 Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/site-packages (from requests>=2.16->dune_spice==0.2.5) (3.4.1)
#7 6.946 Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/site-packages (from requests>=2.16->dune_spice==0.2.5) (3.10)
#7 6.947 Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/site-packages (from requests>=2.16->dune_spice==0.2.5) (2.3.0)
#7 6.948 Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/site-packages (from requests>=2.16->dune_spice==0.2.5) (2024.12.14)
#7 6.994 Collecting markdown-it-py>=2.2.0 (from rich>=13.3.3->dune_spice==0.2.5)
#7 7.013   Downloading http://packages/markdown-it-py/markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
#7 7.086 Collecting pygments<3.0.0,>=2.13.0 (from rich>=13.3.3->dune_spice==0.2.5)
#7 7.105   Downloading http://packages/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)
#7 7.141      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 49.3 MB/s eta 0:00:00
#7 7.216 Collecting mdurl~=0.1 (from markdown-it-py>=2.2.0->rich>=13.3.3->dune_spice==0.2.5)
#7 7.237   Downloading http://packages/mdurl/mdurl-0.1.2-py3-none-any.whl (10.0 kB)
#7 7.274 Building wheels for collected packages: dune_spice
#7 7.275   Building wheel for dune_spice (pyproject.toml): started
#7 7.402   Building wheel for dune_spice (pyproject.toml): finished with status 'done'
#7 7.403   Created wheel for dune_spice: filename=dune_spice-0.2.5-py3-none-any.whl size=23511 sha256=ab8af327bb7db3a5f3dae8dba5e23cea63daaf9ea4e688a6f9f06f1b6775cfb1
#7 7.403   Stored in directory: /tmp/pip-ephem-wheel-cache-gfldaaoa/wheels/83/05/69/977b54e69478800cfcea8a9437a7ea4a9b1a48db334f824611
#7 7.406 Successfully built dune_spice
#7 7.509 Installing collected packages: typing-extensions, pygments, propcache, polars, mdurl, frozenlist, attrs, async-timeout, aiohappyeyeballs, multidict, markdown-it-py, aiosignal, yarl, rich, rich-argparse, aiohttp, dune_spice
#7 10.39 Successfully installed aiohappyeyeballs-2.4.4 aiohttp-3.11.11 aiosignal-1.3.2 async-timeout-5.0.1 attrs-24.3.0 dune_spice-0.2.5 frozenlist-1.5.0 markdown-it-py-3.0.0 mdurl-0.1.2 multidict-6.1.0 polars-1.19.0 propcache-0.2.1 pygments-2.19.1 rich-13.9.4 rich-argparse-1.6.0 typing-extensions-4.12.2 yarl-1.18.3
#7 10.39 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#7 DONE 11.3s

#8 [5/6] RUN cd /repo && pytest --collect-only -q
#8 0.972 tests/test_async_query.py::test_query_async[False]
#8 0.972 tests/test_async_query.py::test_query_async[True0]
#8 0.972 tests/test_async_query.py::test_query_async[True1]
#8 0.972 tests/test_async_query.py::test_query_limits_async[False]
#8 0.972 tests/test_async_query.py::test_query_limits_async[True0]
#8 0.972 tests/test_async_query.py::test_query_limits_async[True1]
#8 0.972 tests/test_async_query.py::test_query_offsets_async[False]
#8 0.972 tests/test_async_query.py::test_query_offsets_async[True0]
#8 0.972 tests/test_async_query.py::test_query_offsets_async[True1]
#8 0.972 tests/test_async_query.py::test_query_sort_async[False]
#8 0.972 tests/test_async_query.py::test_query_sort_async[True0]
#8 0.972 tests/test_async_query.py::test_query_sort_async[True1]
#8 0.972 tests/test_async_query.py::test_query_columns_async[False]
#8 0.972 tests/test_async_query.py::test_query_columns_async[True0]
#8 0.972 tests/test_async_query.py::test_query_columns_async[True1]
#8 0.972 tests/test_async_query.py::test_query_types_async[False]
#8 0.972 tests/test_async_query.py::test_query_types_async[True0]
#8 0.972 tests/test_async_query.py::test_query_types_async[True1]
#8 0.972 tests/test_async_query.py::test_query_without_polling_async[False]
#8 0.972 tests/test_async_query.py::test_query_without_polling_async[True0]
#8 0.972 tests/test_async_query.py::test_query_without_polling_async[True1]
#8 0.972 tests/test_async_query.py::test_parameters_async[False]
#8 0.972 tests/test_async_query.py::test_parameters_async[True0]
#8 0.972 tests/test_async_query.py::test_parameters_async[True1]
#8 0.972 tests/test_query.py::test_query[False]
#8 0.972 tests/test_query.py::test_query[True0]
#8 0.972 tests/test_query.py::test_query[True1]
#8 0.972 tests/test_query.py::test_query_limits[False]
#8 0.972 tests/test_query.py::test_query_limits[True0]
#8 0.972 tests/test_query.py::test_query_limits[True1]
#8 0.972 tests/test_query.py::test_query_offsets[False]
#8 0.972 tests/test_query.py::test_query_offsets[True0]
#8 0.972 tests/test_query.py::test_query_offsets[True1]
#8 0.972 tests/test_query.py::test_query_sort[False]
#8 0.972 tests/test_query.py::test_query_sort[True0]
#8 0.972 tests/test_query.py::test_query_sort[True1]
#8 0.972 tests/test_query.py::test_query_columns[False]
#8 0.972 tests/test_query.py::test_query_columns[True0]
#8 0.972 tests/test_query.py::test_query_columns[True1]
#8 0.972 tests/test_query.py::test_query_types[False]
#8 0.972 tests/test_query.py::test_query_types[True0]
#8 0.972 tests/test_query.py::test_query_types[True1]
#8 0.972 tests/test_query.py::test_query_without_polling[False]
#8 0.972 tests/test_query.py::test_query_without_polling[True0]
#8 0.972 tests/test_query.py::test_query_without_polling[True1]
#8 0.972 tests/test_query.py::test_parameters[False]
#8 0.972 tests/test_query.py::test_parameters[True0]
#8 0.972 tests/test_query.py::test_parameters[True1]
#8 0.972 
#8 0.972 =============================== warnings summary ===============================
#8 0.972 tests/test_async_query.py:10
#8 0.972   /repo/tests/test_async_query.py:10: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:17
#8 0.972   /repo/tests/test_async_query.py:17: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:29
#8 0.972   /repo/tests/test_async_query.py:29: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:40
#8 0.972   /repo/tests/test_async_query.py:40: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:61
#8 0.972   /repo/tests/test_async_query.py:61: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:72
#8 0.972   /repo/tests/test_async_query.py:72: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:81
#8 0.972   /repo/tests/test_async_query.py:81: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 tests/test_async_query.py:93
#8 0.972   /repo/tests/test_async_query.py:93: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
#8 0.972     @pytest.mark.asyncio
#8 0.972 
#8 0.972 -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
#8 0.972 48 tests collected in 0.16s
#8 DONE 1.2s

#9 exporting to image
#9 exporting layers
#9 exporting layers 1.1s done
#9 writing image sha256:6c4cab9d695efb87ad3664cd07b1fd2acce100be1d42fda537fd84f8fa04658c done
#9 naming to docker.io/library/tmp:tmp done
#9 DONE 1.1s
