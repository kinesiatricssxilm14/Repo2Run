#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.49kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.11
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/7] FROM docker.io/library/python:3.11
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 147B done
#5 DONE 0.0s

#6 [2/7] COPY search_patch /search_patch
#6 CACHED

#7 [4/7] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#7 CACHED

#8 [3/7] COPY code_edit.py /code_edit.py
#8 CACHED

#9 [5/7] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/OwlAIProject/Owl.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /Owl/. /repo && rm -rf /Owl/ &&     rm -rf /Owl &&     cd /repo && git checkout 91922655c3cbf0e5f3282c22806b5ac0cf30063e &&     apt-get update -qq &&     apt-get install -y -qq portaudio19-dev &&     cd /repo && poetry install &&     python /code_edit.py -t "/search_patch/0.patch" &&     mkdir -p /repo/owl/services/transcription &&     ln -s /repo/owl/services/stt/whisper_transcription_service.py /repo/owl/services/transcription/whisper_transcription_service.py &&     python /code_edit.py -t "/search_patch/1.patch"
#9 CACHED

#10 [6/7] RUN cd /repo && poetry run pytest --collect-only -q
#10 32.79 tests/test_whisper_transcription_service.py::test_transcribe_audio
#10 32.79 
#10 32.79 =============================== warnings summary ===============================
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_config.py:272: 11 warnings
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_config.py:272: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_generate_schema.py:263
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_generate_schema.py:263
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_generate_schema.py:263
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_generate_schema.py:263
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydantic/_internal/_generate_schema.py:263: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.6/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     warnings.warn(
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:300
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:300: DeprecationWarning: invalid escape sequence '\('
#10 32.79     m = re.match('([su]([0-9]{1,2})p?) \(([0-9]{1,2}) bit\)$', token)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:301
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:301: DeprecationWarning: invalid escape sequence '\('
#10 32.79     m2 = re.match('([su]([0-9]{1,2})p?)( \(default\))?$', token)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:310
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:310: DeprecationWarning: invalid escape sequence '\('
#10 32.79     elif re.match('(flt)p?( \(default\))?$', token):
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:314
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:314: DeprecationWarning: invalid escape sequence '\('
#10 32.79     elif re.match('(dbl)p?( \(default\))?$', token):
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:14
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:14: DeprecationWarning: 'audioop' is deprecated and slated for removal in Python 3.13
#10 32.79     import audioop
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:170
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
#10 32.79     warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:99
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:99: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     extra = Extra.allow  # Allow extra fields
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:102
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:102: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     @root_validator(pre=True)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:127
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:127: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     @root_validator(pre=True)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:165
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:165: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     @root_validator(pre=True)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:344
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:344: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     @root_validator(pre=True)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:363
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/proxy/_types.py:363: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
#10 32.79     @root_validator(pre=True)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/utils.py:32
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/litellm/utils.py:32: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
#10 32.79     import pkg_resources
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pkg_resources/__init__.py:2868: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('pyannote')`.
#10 32.79   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
#10 32.79     declare_namespace(pkg)
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/whisperx/alignment.py:9
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/whisperx/alignment.py:9: DeprecationWarning: 
#10 32.79   Pyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),
#10 32.79   (to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)
#10 32.79   but was not found to be installed on your system.
#10 32.79   If this would cause problems for you,
#10 32.79   please provide us feedback at https://github.com/pandas-dev/pandas/issues/54466
#10 32.79           
#10 32.79     import pandas as pd
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/einops/einops.py:827
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/einops/einops.py:827: DeprecationWarning: invalid escape sequence '\s'
#10 32.79     """
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pyannote/core/notebook.py:134
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pyannote/core/notebook.py:134: MatplotlibDeprecationWarning: The get_cmap function was deprecated in Matplotlib 3.7 and will be removed two minor releases later. Use ``matplotlib.colormaps[name]`` or ``matplotlib.colormaps.get_cmap(obj)`` instead.
#10 32.79     cm = get_cmap("Set1")
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/lightning_fabric/__init__.py:40
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/lightning_fabric/__init__.py:40: Deprecated call to `pkg_resources.declare_namespace('lightning_fabric')`.
#10 32.79   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pytorch_lightning/__init__.py:37
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pytorch_lightning/__init__.py:37: Deprecated call to `pkg_resources.declare_namespace('pytorch_lightning')`.
#10 32.79   Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pyannote/audio/core/io.py:43
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/pyannote/audio/core/io.py:43: UserWarning: torchaudio._backend.set_audio_backend has been deprecated. With dispatcher enabled, this function is no-op. You can remove the function call.
#10 32.79     torchaudio.set_audio_backend("soundfile")
#10 32.79 
#10 32.79 ../root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/torch_audiomentations/utils/io.py:27
#10 32.79   /root/.cache/pypoetry/virtualenvs/owl-gW_DSdP6-py3.11/lib/python3.11/site-packages/torch_audiomentations/utils/io.py:27: UserWarning: torchaudio._backend.set_audio_backend has been deprecated. With dispatcher enabled, this function is no-op. You can remove the function call.
#10 32.79     torchaudio.set_audio_backend("soundfile")
#10 32.79 
#10 32.79 -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
#10 32.79 1 test collected in 30.53s
#10 DONE 35.8s

#11 exporting to image
#11 exporting layers
#11 exporting layers 66.6s done
#11 writing image sha256:92d7504b5667a90a012e993888b5e3eed59fd43174cb7f4dc7ed94042dd8034e done
#11 naming to docker.io/library/tmp:tmp done
#11 DONE 66.7s
