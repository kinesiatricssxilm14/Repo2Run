#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.19kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [internal] load build context
#4 transferring context: 24.03kB done
#4 DONE 0.0s

#5 [1/7] FROM docker.io/library/python:3.10
#5 CACHED

#6 [2/7] COPY search_patch /search_patch
#6 DONE 0.0s

#7 [3/7] COPY code_edit.py /code_edit.py
#7 DONE 0.0s

#8 [4/7] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#8 1.191 Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
#8 3.166 Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
#8 3.652 Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
#8 4.213 Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8789 kB]
#8 67.46 Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [8856 B]
#8 67.88 Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [240 kB]
#8 69.14 Fetched 9292 kB in 1min 9s (135 kB/s)
#8 69.14 Reading package lists...
#8 70.14 Reading package lists...
#8 70.94 Building dependency tree...
#8 71.21 Reading state information...
#8 71.65 curl is already the newest version (7.88.1-10+deb12u8).
#8 71.65 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
#8 92.57 Retrieving Poetry metadata
#8 92.57 
#8 92.57 # Welcome to Poetry!
#8 92.57 
#8 92.57 This will download and install the latest version of Poetry,
#8 92.57 a dependency and package manager for Python.
#8 92.57 
#8 92.57 It will add the `poetry` command to Poetry's bin directory, located at:
#8 92.57 
#8 92.57 /root/.local/bin
#8 92.57 
#8 92.57 You can uninstall at any time by executing this script with the --uninstall option,
#8 92.57 and these changes will be reverted.
#8 92.57 
#8 92.57 Installing Poetry (2.0.0)
#8 92.57 Installing Poetry (2.0.0): Creating environment
#8 92.57 Installing Poetry (2.0.0): Installing Poetry
#8 92.57 Installing Poetry (2.0.0): Creating script
#8 92.57 Installing Poetry (2.0.0): Done
#8 92.57 
#8 92.57 Poetry (2.0.0) is installed now. Great!
#8 92.57 
#8 92.57 To get started you need Poetry's bin directory (/root/.local/bin) in your `PATH`
#8 92.57 environment variable.
#8 92.57 
#8 92.57 Add `export PATH="/root/.local/bin:$PATH"` to your shell configuration file.
#8 92.57 
#8 92.57 Alternatively, you can call Poetry explicitly with `/root/.local/bin/poetry`.
#8 92.57 
#8 92.57 You can test that everything is set up by executing:
#8 92.57 
#8 92.57 `poetry --version`
#8 92.57 
#8 DONE 92.8s

#9 [5/7] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/openrecall/openrecall.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /openrecall/. /repo && rm -rf /openrecall/ &&     rm -rf /openrecall &&     cd /repo && git checkout 225a2750e3122718a9bad9c4d4ba4b0e99985c00 &&     cd /repo && pip install -e . &&     python /code_edit.py -t "/search_patch/0.patch"
#9 2.201 Looking in indexes: http://simple/
#9 2.357 Collecting pytest
#9 2.386   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#9 2.410      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 18.0 MB/s eta 0:00:00
#9 2.483 Collecting pytest-xdist
#9 2.501   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#9 2.513      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.5 MB/s eta 0:00:00
#9 2.597 Collecting packaging
#9 2.615   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#9 2.627      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#9 2.686 Collecting tomli>=1
#9 2.703   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#9 2.756 Collecting pluggy<2,>=1.5
#9 2.773   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#9 2.806 Collecting iniconfig
#9 2.826   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#9 2.869 Collecting exceptiongroup>=1.0.0rc8
#9 2.888   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#9 2.955 Collecting execnet>=2.1
#9 2.977   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#9 2.985      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 7.7 MB/s eta 0:00:00
#9 3.123 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#9 3.630 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#9 3.630 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 3.752 
#9 3.752 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#9 3.752 [notice] To update, run: pip install --upgrade pip
#9 4.425 Looking in indexes: http://simple/
#9 4.522 Collecting pipdeptree
#9 4.540   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#9 4.567 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#9 4.687 Collecting pip>=24.2
#9 4.697   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#9 4.818 Installing collected packages: pip, pipdeptree
#9 4.818   Attempting uninstall: pip
#9 4.819     Found existing installation: pip 23.0.1
#9 4.978     Uninstalling pip-23.0.1:
#9 5.126       Successfully uninstalled pip-23.0.1
#9 6.545 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#9 6.546 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 6.758 Cloning into 'openrecall'...
#9 8.969 Note: switching to '225a2750e3122718a9bad9c4d4ba4b0e99985c00'.
#9 8.969 
#9 8.969 You are in 'detached HEAD' state. You can look around, make experimental
#9 8.969 changes and commit them, and you can discard any commits you make in this
#9 8.969 state without impacting any branches by switching back to a branch.
#9 8.969 
#9 8.969 If you want to create a new branch to retain commits you create, you may
#9 8.969 do so (now or later) by using -c with the switch command. Example:
#9 8.969 
#9 8.969   git switch -c <new-branch-name>
#9 8.969 
#9 8.969 Or undo this operation with:
#9 8.969 
#9 8.969   git switch -
#9 8.969 
#9 8.969 Turn off this advice by setting config variable advice.detachedHead to false
#9 8.969 
#9 8.969 HEAD is now at 225a275 formatting and clean-up 🧹
#9 9.592 Looking in indexes: http://simple/
#9 9.592 Obtaining file:///repo
#9 9.594   Preparing metadata (setup.py): started
#9 10.33   Preparing metadata (setup.py): finished with status 'done'
#9 10.34 Collecting python-doctr@ git+https://github.com/koenvaneijk/doctr.git@af711bc04eb8876a7189923fb51ec44481ee18cd (from OpenRecall==0.8)
#9 10.34   Cloning https://github.com/koenvaneijk/doctr.git (to revision af711bc04eb8876a7189923fb51ec44481ee18cd) to /tmp/pip-install-v5hz0fk8/python-doctr_ebc433223a364187a1001ab905bda872
#9 10.34   Running command git clone --filter=blob:none --quiet https://github.com/koenvaneijk/doctr.git /tmp/pip-install-v5hz0fk8/python-doctr_ebc433223a364187a1001ab905bda872
#9 14.24   Running command git rev-parse -q --verify 'sha^af711bc04eb8876a7189923fb51ec44481ee18cd'
#9 14.25   Running command git fetch -q https://github.com/koenvaneijk/doctr.git af711bc04eb8876a7189923fb51ec44481ee18cd
#9 15.34   Resolved https://github.com/koenvaneijk/doctr.git to commit af711bc04eb8876a7189923fb51ec44481ee18cd
#9 15.35   Installing build dependencies: started
#9 17.79   Installing build dependencies: finished with status 'done'
#9 17.80   Getting requirements to build wheel: started
#9 18.21   Getting requirements to build wheel: finished with status 'done'
#9 18.21   Preparing metadata (pyproject.toml): started
#9 18.80   Preparing metadata (pyproject.toml): finished with status 'done'
#9 18.88 Collecting Flask==3.0.3 (from OpenRecall==0.8)
#9 18.90   Downloading http://packages/flask/flask-3.0.3-py3-none-any.whl (101 kB)
#9 19.45 Collecting numpy==1.26.4 (from OpenRecall==0.8)
#9 19.48   Downloading http://packages/numpy/numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)
#9 19.64      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 18.2/18.2 MB 127.3 MB/s eta 0:00:00
#9 19.74 Collecting mss==9.0.1 (from OpenRecall==0.8)
#9 19.76   Downloading http://packages/mss/mss-9.0.1-py3-none-any.whl (22 kB)
#9 19.81 Collecting sentence-transformers==3.0.0 (from OpenRecall==0.8)
#9 19.83   Downloading http://packages/sentence-transformers/sentence_transformers-3.0.0-py3-none-any.whl (224 kB)
#9 19.96 Collecting torch==2.2.0 (from OpenRecall==0.8)
#9 19.98   Downloading http://packages/torch/torch-2.2.0-cp310-cp310-manylinux1_x86_64.whl (755.5 MB)
#9 27.75      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 755.5/755.5 MB 48.7 MB/s eta 0:00:00
#9 30.52 Collecting torchvision==0.17.0 (from OpenRecall==0.8)
#9 30.54   Downloading http://packages/torchvision/torchvision-0.17.0-cp310-cp310-manylinux1_x86_64.whl (6.9 MB)
#9 30.64      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.9/6.9 MB 85.1 MB/s eta 0:00:00
#9 30.87 Collecting shapely==2.0.4 (from OpenRecall==0.8)
#9 30.89   Downloading http://packages/shapely/shapely-2.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.5 MB)
#9 30.93      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.5/2.5 MB 82.7 MB/s eta 0:00:00
#9 31.04 Collecting h5py==3.11.0 (from OpenRecall==0.8)
#9 31.06   Downloading http://packages/h5py/h5py-3.11.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (5.3 MB)
#9 31.12      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.3/5.3 MB 111.3 MB/s eta 0:00:00
#9 32.40 Collecting rapidfuzz==3.9.3 (from OpenRecall==0.8)
#9 32.56   Downloading http://packages/rapidfuzz/rapidfuzz-3.9.3-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.4 MB)
#9 32.61      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.4/3.4 MB 94.4 MB/s eta 0:00:00
#9 33.03 Collecting Pillow==10.3.0 (from OpenRecall==0.8)
#9 33.05   Downloading http://packages/pillow/pillow-10.3.0-cp310-cp310-manylinux_2_28_x86_64.whl (4.5 MB)
#9 33.10      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.5/4.5 MB 111.4 MB/s eta 0:00:00
#9 33.19 Collecting Werkzeug>=3.0.0 (from Flask==3.0.3->OpenRecall==0.8)
#9 33.22   Downloading http://packages/werkzeug/werkzeug-3.1.3-py3-none-any.whl (224 kB)
#9 33.39 Collecting Jinja2>=3.1.2 (from Flask==3.0.3->OpenRecall==0.8)
#9 33.41   Downloading http://packages/jinja2/jinja2-3.1.5-py3-none-any.whl (134 kB)
#9 33.45 Collecting itsdangerous>=2.1.2 (from Flask==3.0.3->OpenRecall==0.8)
#9 33.47   Downloading http://packages/itsdangerous/itsdangerous-2.2.0-py3-none-any.whl (16 kB)
#9 33.52 Collecting click>=8.1.3 (from Flask==3.0.3->OpenRecall==0.8)
#9 33.54   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#9 33.58 Collecting blinker>=1.6.2 (from Flask==3.0.3->OpenRecall==0.8)
#9 33.59   Downloading http://packages/blinker/blinker-1.9.0-py3-none-any.whl (8.5 kB)
#9 33.73 Collecting transformers<5.0.0,>=4.34.0 (from sentence-transformers==3.0.0->OpenRecall==0.8)
#9 33.75   Downloading http://packages/transformers/transformers-4.47.1-py3-none-any.whl (10.1 MB)
#9 33.85      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 10.1/10.1 MB 121.8 MB/s eta 0:00:00
#9 34.32 Collecting tqdm (from sentence-transformers==3.0.0->OpenRecall==0.8)
#9 34.34   Downloading http://packages/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)
#9 34.57 Collecting scikit-learn (from sentence-transformers==3.0.0->OpenRecall==0.8)
#9 34.59   Downloading http://packages/scikit-learn/scikit_learn-1.6.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (13.5 MB)
#9 34.70      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.5/13.5 MB 142.6 MB/s eta 0:00:00
#9 35.05 Collecting scipy (from sentence-transformers==3.0.0->OpenRecall==0.8)
#9 35.07   Downloading http://packages/scipy/scipy-1.15.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (40.6 MB)
#9 35.35      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 MB 151.5 MB/s eta 0:00:00
#9 35.68 Collecting huggingface-hub>=0.15.1 (from sentence-transformers==3.0.0->OpenRecall==0.8)
#9 35.70   Downloading http://packages/huggingface-hub/huggingface_hub-0.27.1-py3-none-any.whl (450 kB)
#9 35.83 Collecting filelock (from torch==2.2.0->OpenRecall==0.8)
#9 35.83   Using cached http://packages/filelock/filelock-3.16.1-py3-none-any.whl (16 kB)
#9 35.87 Collecting typing-extensions>=4.8.0 (from torch==2.2.0->OpenRecall==0.8)
#9 35.89   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#9 35.95 Collecting sympy (from torch==2.2.0->OpenRecall==0.8)
#9 35.97   Downloading http://packages/sympy/sympy-1.13.3-py3-none-any.whl (6.2 MB)
#9 36.03      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 123.9 MB/s eta 0:00:00
#9 36.14 Collecting networkx (from torch==2.2.0->OpenRecall==0.8)
#9 36.16   Downloading http://packages/networkx/networkx-3.4.2-py3-none-any.whl (1.7 MB)
#9 36.20      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 62.8 MB/s eta 0:00:00
#9 36.28 Collecting fsspec (from torch==2.2.0->OpenRecall==0.8)
#9 36.30   Downloading http://packages/fsspec/fsspec-2024.12.0-py3-none-any.whl (183 kB)
#9 36.40 Collecting nvidia-cuda-nvrtc-cu12==12.1.105 (from torch==2.2.0->OpenRecall==0.8)
#9 36.42   Downloading http://packages/nvidia-cuda-nvrtc-cu12/nvidia_cuda_nvrtc_cu12-12.1.105-py3-none-manylinux1_x86_64.whl (23.7 MB)
#9 36.59      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 23.7/23.7 MB 156.7 MB/s eta 0:00:00
#9 36.70 Collecting nvidia-cuda-runtime-cu12==12.1.105 (from torch==2.2.0->OpenRecall==0.8)
#9 36.72   Downloading http://packages/nvidia-cuda-runtime-cu12/nvidia_cuda_runtime_cu12-12.1.105-py3-none-manylinux1_x86_64.whl (823 kB)
#9 36.75      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 823.6/823.6 kB 38.9 MB/s eta 0:00:00
#9 36.78 Collecting nvidia-cuda-cupti-cu12==12.1.105 (from torch==2.2.0->OpenRecall==0.8)
#9 36.80   Downloading http://packages/nvidia-cuda-cupti-cu12/nvidia_cuda_cupti_cu12-12.1.105-py3-none-manylinux1_x86_64.whl (14.1 MB)
#9 36.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 14.1/14.1 MB 149.4 MB/s eta 0:00:00
#9 37.00 Collecting nvidia-cudnn-cu12==8.9.2.26 (from torch==2.2.0->OpenRecall==0.8)
#9 37.02   Downloading http://packages/nvidia-cudnn-cu12/nvidia_cudnn_cu12-8.9.2.26-py3-none-manylinux1_x86_64.whl (731.7 MB)
#9 46.41      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 731.7/731.7 MB 33.8 MB/s eta 0:00:00
#9 49.18 Collecting nvidia-cublas-cu12==12.1.3.1 (from torch==2.2.0->OpenRecall==0.8)
#9 49.20   Downloading http://packages/nvidia-cublas-cu12/nvidia_cublas_cu12-12.1.3.1-py3-none-manylinux1_x86_64.whl (410.6 MB)
#9 54.32      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 410.6/410.6 MB 56.7 MB/s eta 0:00:00
#9 55.74 Collecting nvidia-cufft-cu12==11.0.2.54 (from torch==2.2.0->OpenRecall==0.8)
#9 55.76   Downloading http://packages/nvidia-cufft-cu12/nvidia_cufft_cu12-11.0.2.54-py3-none-manylinux1_x86_64.whl (121.6 MB)
#9 56.48      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 121.6/121.6 MB 174.8 MB/s eta 0:00:00
#9 56.92 Collecting nvidia-curand-cu12==10.3.2.106 (from torch==2.2.0->OpenRecall==0.8)
#9 56.94   Downloading http://packages/nvidia-curand-cu12/nvidia_curand_cu12-10.3.2.106-py3-none-manylinux1_x86_64.whl (56.5 MB)
#9 57.45      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.5/56.5 MB 165.5 MB/s eta 0:00:00
#9 57.67 Collecting nvidia-cusolver-cu12==11.4.5.107 (from torch==2.2.0->OpenRecall==0.8)
#9 57.69   Downloading http://packages/nvidia-cusolver-cu12/nvidia_cusolver_cu12-11.4.5.107-py3-none-manylinux1_x86_64.whl (124.2 MB)
#9 58.58      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 124.2/124.2 MB 142.0 MB/s eta 0:00:00
#9 59.01 Collecting nvidia-cusparse-cu12==12.1.0.106 (from torch==2.2.0->OpenRecall==0.8)
#9 59.02   Downloading http://packages/nvidia-cusparse-cu12/nvidia_cusparse_cu12-12.1.0.106-py3-none-manylinux1_x86_64.whl (196.0 MB)
#9 60.43      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 196.0/196.0 MB 141.0 MB/s eta 0:00:00
#9 61.08 Collecting nvidia-nccl-cu12==2.19.3 (from torch==2.2.0->OpenRecall==0.8)
#9 61.10   Downloading http://packages/nvidia-nccl-cu12/nvidia_nccl_cu12-2.19.3-py3-none-manylinux1_x86_64.whl (166.0 MB)
#9 62.21      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 166.0/166.0 MB 150.8 MB/s eta 0:00:00
#9 63.03 Collecting nvidia-nvtx-cu12==12.1.105 (from torch==2.2.0->OpenRecall==0.8)
#9 63.05   Downloading http://packages/nvidia-nvtx-cu12/nvidia_nvtx_cu12-12.1.105-py3-none-manylinux1_x86_64.whl (99 kB)
#9 63.10 Collecting triton==2.2.0 (from torch==2.2.0->OpenRecall==0.8)
#9 63.12   Downloading http://packages/triton/triton-2.2.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (167.9 MB)
#9 64.07      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 167.9/167.9 MB 179.6 MB/s eta 0:00:00
#9 64.72 Collecting requests (from torchvision==0.17.0->OpenRecall==0.8)
#9 64.72   Using cached http://packages/requests/requests-2.32.3-py3-none-any.whl (64 kB)
#9 64.78 Collecting nvidia-nvjitlink-cu12 (from nvidia-cusolver-cu12==11.4.5.107->torch==2.2.0->OpenRecall==0.8)
#9 64.80   Downloading http://packages/nvidia-nvjitlink-cu12/nvidia_nvjitlink_cu12-12.6.85-py3-none-manylinux2010_x86_64.manylinux_2_12_x86_64.whl (19.7 MB)
#9 64.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 19.7/19.7 MB 179.1 MB/s eta 0:00:00
#9 65.18 Collecting opencv-python<5.0.0,>=4.5.0 (from python-doctr@ git+https://github.com/koenvaneijk/doctr.git@af711bc04eb8876a7189923fb51ec44481ee18cd->OpenRecall==0.8)
#9 65.20   Downloading http://packages/opencv-python/opencv_python-4.10.0.84-cp37-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (62.5 MB)
#9 65.54      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.5/62.5 MB 191.6 MB/s eta 0:00:00
#9 65.82 Collecting pyclipper<2.0.0,>=1.2.0 (from python-doctr@ git+https://github.com/koenvaneijk/doctr.git@af711bc04eb8876a7189923fb51ec44481ee18cd->OpenRecall==0.8)
#9 65.84   Downloading http://packages/pyclipper/pyclipper-1.3.0.post6-cp310-cp310-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (912 kB)
#9 65.87      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 912.2/912.2 kB 44.2 MB/s eta 0:00:00
#9 65.91 Collecting defusedxml>=0.7.0 (from python-doctr@ git+https://github.com/koenvaneijk/doctr.git@af711bc04eb8876a7189923fb51ec44481ee18cd->OpenRecall==0.8)
#9 65.93   Downloading http://packages/defusedxml/defusedxml-0.7.1-py2.py3-none-any.whl (25 kB)
#9 65.97 Collecting anyascii>=0.3.2 (from python-doctr@ git+https://github.com/koenvaneijk/doctr.git@af711bc04eb8876a7189923fb51ec44481ee18cd->OpenRecall==0.8)
#9 65.99   Downloading http://packages/anyascii/anyascii-0.3.2-py3-none-any.whl (289 kB)
#9 66.05 Requirement already satisfied: packaging>=20.9 in /usr/local/lib/python3.10/site-packages (from huggingface-hub>=0.15.1->sentence-transformers==3.0.0->OpenRecall==0.8) (24.2)
#9 66.15 Collecting pyyaml>=5.1 (from huggingface-hub>=0.15.1->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 66.17   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#9 66.20      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 38.8 MB/s eta 0:00:00
#9 66.37 Collecting MarkupSafe>=2.0 (from Jinja2>=3.1.2->Flask==3.0.3->OpenRecall==0.8)
#9 66.39   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#9 67.21 Collecting regex!=2019.12.17 (from transformers<5.0.0,>=4.34.0->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 67.23   Downloading http://packages/regex/regex-2024.11.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (781 kB)
#9 67.45      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 781.7/781.7 kB 2.6 MB/s eta 0:00:00
#9 67.83 Collecting tokenizers<0.22,>=0.21 (from transformers<5.0.0,>=4.34.0->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 67.85   Downloading http://packages/tokenizers/tokenizers-0.21.0-cp39-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
#9 67.90      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 99.1 MB/s eta 0:00:00
#9 68.18 Collecting safetensors>=0.4.1 (from transformers<5.0.0,>=4.34.0->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 68.20   Downloading http://packages/safetensors/safetensors-0.5.1-cp38-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (461 kB)
#9 68.46 Collecting charset-normalizer<4,>=2 (from requests->torchvision==0.17.0->OpenRecall==0.8)
#9 68.46   Using cached http://packages/charset-normalizer/charset_normalizer-3.4.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (146 kB)
#9 68.50 Collecting idna<4,>=2.5 (from requests->torchvision==0.17.0->OpenRecall==0.8)
#9 68.50   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#9 68.59 Collecting urllib3<3,>=1.21.1 (from requests->torchvision==0.17.0->OpenRecall==0.8)
#9 68.59   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#9 68.64 Collecting certifi>=2017.4.17 (from requests->torchvision==0.17.0->OpenRecall==0.8)
#9 68.64   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#9 68.73 Collecting joblib>=1.2.0 (from scikit-learn->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 68.74   Downloading http://packages/joblib/joblib-1.4.2-py3-none-any.whl (301 kB)
#9 68.79 Collecting threadpoolctl>=3.1.0 (from scikit-learn->sentence-transformers==3.0.0->OpenRecall==0.8)
#9 68.81   Downloading http://packages/threadpoolctl/threadpoolctl-3.5.0-py3-none-any.whl (18 kB)
#9 68.87 Collecting mpmath<1.4,>=1.1.0 (from sympy->torch==2.2.0->OpenRecall==0.8)
#9 68.89   Downloading http://packages/mpmath/mpmath-1.3.0-py3-none-any.whl (536 kB)
#9 68.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 536.2/536.2 kB 25.7 MB/s eta 0:00:00
#9 69.00 Building wheels for collected packages: python-doctr
#9 69.00   Building wheel for python-doctr (pyproject.toml): started
#9 69.70   Building wheel for python-doctr (pyproject.toml): finished with status 'done'
#9 69.70   Created wheel for python-doctr: filename=python_doctr-0.9.0a0-py3-none-any.whl size=296334 sha256=b6d23671378016bac4056cd389b972b608be35c32c6280534a181c5cb22d9d29
#9 69.70   Stored in directory: /root/.cache/pip/wheels/42/fb/5c/841375c07bca696c470eb4ba84f61473293702f86b3b125600
#9 69.71 Successfully built python-doctr
#9 70.52 Installing collected packages: pyclipper, mpmath, urllib3, typing-extensions, tqdm, threadpoolctl, sympy, safetensors, regex, rapidfuzz, pyyaml, Pillow, nvidia-nvtx-cu12, nvidia-nvjitlink-cu12, nvidia-nccl-cu12, nvidia-curand-cu12, nvidia-cufft-cu12, nvidia-cuda-runtime-cu12, nvidia-cuda-nvrtc-cu12, nvidia-cuda-cupti-cu12, nvidia-cublas-cu12, numpy, networkx, mss, MarkupSafe, joblib, itsdangerous, idna, fsspec, filelock, defusedxml, click, charset-normalizer, certifi, blinker, anyascii, Werkzeug, triton, shapely, scipy, requests, opencv-python, nvidia-cusparse-cu12, nvidia-cudnn-cu12, Jinja2, h5py, scikit-learn, python-doctr, nvidia-cusolver-cu12, huggingface-hub, Flask, torch, tokenizers, transformers, torchvision, sentence-transformers, OpenRecall
#9 162.0   DEPRECATION: Legacy editable install of OpenRecall==0.8 from file:///repo (setup.py develop) is deprecated. pip 25.0 will enforce this behaviour change. A possible replacement is to add a pyproject.toml or enable --use-pep517, and use setuptools >= 64. If the resulting installation is not behaving as expected, try using --config-settings editable_mode=compat. Please consult the setuptools documentation for more information. Discussion can be found at https://github.com/pypa/pip/issues/11457
#9 162.0   Running setup.py develop for OpenRecall
#9 163.9 Successfully installed Flask-3.0.3 Jinja2-3.1.5 MarkupSafe-3.0.2 OpenRecall Pillow-10.3.0 Werkzeug-3.1.3 anyascii-0.3.2 blinker-1.9.0 certifi-2024.12.14 charset-normalizer-3.4.1 click-8.1.8 defusedxml-0.7.1 filelock-3.16.1 fsspec-2024.12.0 h5py-3.11.0 huggingface-hub-0.27.1 idna-3.10 itsdangerous-2.2.0 joblib-1.4.2 mpmath-1.3.0 mss-9.0.1 networkx-3.4.2 numpy-1.26.4 nvidia-cublas-cu12-12.1.3.1 nvidia-cuda-cupti-cu12-12.1.105 nvidia-cuda-nvrtc-cu12-12.1.105 nvidia-cuda-runtime-cu12-12.1.105 nvidia-cudnn-cu12-8.9.2.26 nvidia-cufft-cu12-11.0.2.54 nvidia-curand-cu12-10.3.2.106 nvidia-cusolver-cu12-11.4.5.107 nvidia-cusparse-cu12-12.1.0.106 nvidia-nccl-cu12-2.19.3 nvidia-nvjitlink-cu12-12.6.85 nvidia-nvtx-cu12-12.1.105 opencv-python-4.10.0.84 pyclipper-1.3.0.post6 python-doctr-0.9.0a0 pyyaml-6.0.2 rapidfuzz-3.9.3 regex-2024.11.6 requests-2.32.3 safetensors-0.5.1 scikit-learn-1.6.0 scipy-1.15.0 sentence-transformers-3.0.0 shapely-2.0.4 sympy-1.13.3 threadpoolctl-3.5.0 tokenizers-0.21.0 torch-2.2.0 torchvision-0.17.0 tqdm-4.67.1 transformers-4.47.1 triton-2.2.0 typing-extensions-4.12.2 urllib3-2.3.0
#9 163.9 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 166.2 * Succeed Patch:
#9 166.2 --- arepoopenrecallconfig.py
#9 166.2 +++ brepoopenrecallconfig.py
#9 166.2 @@ -17,7 +17,10 @@
#9 166.2      default=False,
#9 166.2  )
#9 166.2  
#9 166.2 -args = parser.parse_args()
#9 166.2 +if __name__ == "__main__":
#9 166.2 +    args = parser.parse_args()
#9 166.2 +else:
#9 166.2 +    args = parser.parse_args(args=[])
#9 166.2  
#9 166.2  
#9 166.2  def get_appdata_folder(app_name="openrecall"):
#9 166.2 
#9 166.2 
#9 DONE 173.7s

#10 [6/7] RUN cd /repo && pytest --collect-only -q
#10 6.416 tests/test_config.py::test_get_appdata_folder_windows
#10 6.416 tests/test_config.py::test_get_appdata_folder_windows_no_appdata
#10 6.416 tests/test_config.py::test_get_appdata_folder_darwin
#10 6.416 tests/test_config.py::test_get_appdata_folder_linux
#10 6.416 tests/test_nlp.py::test_cosine_similarity_identical_vectors
#10 6.416 tests/test_nlp.py::test_cosine_similarity_orthogonal_vectors
#10 6.416 tests/test_nlp.py::test_cosine_similarity_opposite_vectors
#10 6.416 tests/test_nlp.py::test_cosine_similarity_non_unit_vectors
#10 6.416 tests/test_nlp.py::test_cosine_similarity_arbitrary_vectors
#10 6.416 tests/test_nlp.py::test_cosine_similarity_zero_vector
#10 6.416 
#10 6.416 10 tests collected in 5.64s
#10 DONE 7.7s

#11 exporting to image
#11 exporting layers
#11 exporting layers 46.1s done
#11 writing image sha256:5fe7221dd4b2569a1a6393d4f5db35593d8ee3b76b601cb00c7a630058e8b900 done
#11 naming to docker.io/library/tmp:tmp done
#11 DONE 46.1s
