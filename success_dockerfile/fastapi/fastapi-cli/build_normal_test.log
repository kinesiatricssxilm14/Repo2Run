#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.23kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/fastapi/fastapi-cli.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /fastapi-cli/. /repo && rm -rf /fastapi-cli/ &&     rm -rf /fastapi-cli &&     cd /repo && git checkout bc08401cf9c030dff0070dd9b944bf9f13bfd225 &&     pip install pre-commit==4.0.1 &&     pip install typer==0.15.1 &&     pip install uvicorn[standard]==0.34.0 &&     pip install rich-toolkit==0.12.0
#6 1.800 Looking in indexes: http://simple/
#6 1.951 Collecting pytest
#6 1.969   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.989      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 23.7 MB/s eta 0:00:00
#6 2.054 Collecting pytest-xdist
#6 2.070   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 2.079      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 6.4 MB/s eta 0:00:00
#6 2.123 Collecting iniconfig
#6 2.140   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.192 Collecting tomli>=1
#6 2.206   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.254 Collecting exceptiongroup>=1.0.0rc8
#6 2.274   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.344 Collecting packaging
#6 2.371   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.382      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 8.2 MB/s eta 0:00:00
#6 2.430 Collecting pluggy<2,>=1.5
#6 2.448   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.530 Collecting execnet>=2.1
#6 2.548   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.558      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 5.5 MB/s eta 0:00:00
#6 2.725 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.320 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.320 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.434 
#6 3.434 [notice] A new release of pip is available: 23.0.1 -> 25.0
#6 3.434 [notice] To update, run: pip install --upgrade pip
#6 4.186 Looking in indexes: http://simple/
#6 4.264 Collecting pipdeptree
#6 4.322   Downloading http://packages/pipdeptree/pipdeptree-2.25.0-py3-none-any.whl (32 kB)
#6 4.460 Collecting pip>=24.2
#6 4.477   Downloading http://packages/pip/pip-25.0-py3-none-any.whl (1.8 MB)
#6 4.512      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 60.2 MB/s eta 0:00:00
#6 4.529 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.643 Installing collected packages: pip, pipdeptree
#6 4.643   Attempting uninstall: pip
#6 4.644     Found existing installation: pip 23.0.1
#6 4.816     Uninstalling pip-23.0.1:
#6 5.042       Successfully uninstalled pip-23.0.1
#6 6.422 Successfully installed pip-25.0 pipdeptree-2.25.0
#6 6.422 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.592 Cloning into 'fastapi-cli'...
#6 8.586 Note: switching to 'bc08401cf9c030dff0070dd9b944bf9f13bfd225'.
#6 8.586 
#6 8.586 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.586 changes and commit them, and you can discard any commits you make in this
#6 8.586 state without impacting any branches by switching back to a branch.
#6 8.586 
#6 8.586 If you want to create a new branch to retain commits you create, you may
#6 8.586 do so (now or later) by using -c with the switch command. Example:
#6 8.586 
#6 8.586   git switch -c <new-branch-name>
#6 8.586 
#6 8.586 Or undo this operation with:
#6 8.586 
#6 8.586   git switch -
#6 8.586 
#6 8.586 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.586 
#6 8.586 HEAD is now at bc08401 📝 Update release notes
#6 9.113 Looking in indexes: http://simple/
#6 9.192 Collecting pre-commit==4.0.1
#6 9.207   Downloading http://packages/pre-commit/pre_commit-4.0.1-py2.py3-none-any.whl (218 kB)
#6 9.244 Collecting cfgv>=2.0.0 (from pre-commit==4.0.1)
#6 9.260   Downloading http://packages/cfgv/cfgv-3.4.0-py2.py3-none-any.whl (7.2 kB)
#6 9.376 Collecting identify>=1.0.0 (from pre-commit==4.0.1)
#6 9.395   Downloading http://packages/identify/identify-2.6.6-py2.py3-none-any.whl (99 kB)
#6 9.439 Collecting nodeenv>=0.11.1 (from pre-commit==4.0.1)
#6 9.454   Downloading http://packages/nodeenv/nodeenv-1.9.1-py2.py3-none-any.whl (22 kB)
#6 9.540 Collecting pyyaml>=5.1 (from pre-commit==4.0.1)
#6 9.555   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#6 9.571      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 45.2 MB/s eta 0:00:00
#6 9.661 Collecting virtualenv>=20.10.0 (from pre-commit==4.0.1)
#6 9.676   Downloading http://packages/virtualenv/virtualenv-20.29.1-py3-none-any.whl (4.3 MB)
#6 9.723      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.3/4.3 MB 95.5 MB/s eta 0:00:00
#6 9.782 Collecting distlib<1,>=0.3.7 (from virtualenv>=20.10.0->pre-commit==4.0.1)
#6 9.803   Using cached http://packages/distlib/distlib-0.3.9-py2.py3-none-any.whl (468 kB)
#6 9.845 Collecting filelock<4,>=3.12.2 (from virtualenv>=20.10.0->pre-commit==4.0.1)
#6 9.864   Downloading http://packages/filelock/filelock-3.17.0-py3-none-any.whl (16 kB)
#6 9.909 Collecting platformdirs<5,>=3.9.1 (from virtualenv>=20.10.0->pre-commit==4.0.1)
#6 9.928   Using cached http://packages/platformdirs/platformdirs-4.3.6-py3-none-any.whl (18 kB)
#6 9.994 Installing collected packages: distlib, pyyaml, platformdirs, nodeenv, identify, filelock, cfgv, virtualenv, pre-commit
#6 10.58 Successfully installed cfgv-3.4.0 distlib-0.3.9 filelock-3.17.0 identify-2.6.6 nodeenv-1.9.1 platformdirs-4.3.6 pre-commit-4.0.1 pyyaml-6.0.2 virtualenv-20.29.1
#6 10.58 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 11.33 Looking in indexes: http://simple/
#6 11.37 Collecting typer==0.15.1
#6 11.38   Downloading http://packages/typer/typer-0.15.1-py3-none-any.whl (44 kB)
#6 11.43 Collecting click>=8.0.0 (from typer==0.15.1)
#6 11.45   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#6 11.49 Collecting typing-extensions>=3.7.4.3 (from typer==0.15.1)
#6 11.51   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#6 11.54 Collecting shellingham>=1.3.0 (from typer==0.15.1)
#6 11.56   Using cached http://packages/shellingham/shellingham-1.5.4-py2.py3-none-any.whl (9.8 kB)
#6 11.67 Collecting rich>=10.11.0 (from typer==0.15.1)
#6 11.69   Downloading http://packages/rich/rich-13.9.4-py3-none-any.whl (242 kB)
#6 11.73 Collecting markdown-it-py>=2.2.0 (from rich>=10.11.0->typer==0.15.1)
#6 11.74   Downloading http://packages/markdown-it-py/markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
#6 11.80 Collecting pygments<3.0.0,>=2.13.0 (from rich>=10.11.0->typer==0.15.1)
#6 11.82   Downloading http://packages/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)
#6 11.84      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 70.2 MB/s eta 0:00:00
#6 11.89 Collecting mdurl~=0.1 (from markdown-it-py>=2.2.0->rich>=10.11.0->typer==0.15.1)
#6 11.91   Downloading http://packages/mdurl/mdurl-0.1.2-py3-none-any.whl (10.0 kB)
#6 11.99 Installing collected packages: typing-extensions, shellingham, pygments, mdurl, click, markdown-it-py, rich, typer
#6 13.49 Successfully installed click-8.1.8 markdown-it-py-3.0.0 mdurl-0.1.2 pygments-2.19.1 rich-13.9.4 shellingham-1.5.4 typer-0.15.1 typing-extensions-4.12.2
#6 13.49 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 14.23 Looking in indexes: http://simple/
#6 14.29 Collecting uvicorn==0.34.0 (from uvicorn[standard]==0.34.0)
#6 14.30   Downloading http://packages/uvicorn/uvicorn-0.34.0-py3-none-any.whl (62 kB)
#6 14.32 Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/site-packages (from uvicorn==0.34.0->uvicorn[standard]==0.34.0) (8.1.8)
#6 14.34 Collecting h11>=0.8 (from uvicorn==0.34.0->uvicorn[standard]==0.34.0)
#6 14.35   Downloading http://packages/h11/h11-0.14.0-py3-none-any.whl (58 kB)
#6 14.37 Requirement already satisfied: typing-extensions>=4.0 in /usr/local/lib/python3.10/site-packages (from uvicorn==0.34.0->uvicorn[standard]==0.34.0) (4.12.2)
#6 14.47 Collecting httptools>=0.6.3 (from uvicorn[standard]==0.34.0)
#6 14.49   Downloading http://packages/httptools/httptools-0.6.4-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (442 kB)
#6 14.54 Collecting python-dotenv>=0.13 (from uvicorn[standard]==0.34.0)
#6 14.55   Downloading http://packages/python-dotenv/python_dotenv-1.0.1-py3-none-any.whl (19 kB)
#6 14.56 Requirement already satisfied: pyyaml>=5.1 in /usr/local/lib/python3.10/site-packages (from uvicorn[standard]==0.34.0) (6.0.2)
#6 14.64 Collecting uvloop!=0.15.0,!=0.15.1,>=0.14.0 (from uvicorn[standard]==0.34.0)
#6 14.66   Downloading http://packages/uvloop/uvloop-0.21.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.8 MB)
#6 14.70      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.8/3.8 MB 116.9 MB/s eta 0:00:00
#6 14.85 Collecting watchfiles>=0.13 (from uvicorn[standard]==0.34.0)
#6 14.87   Downloading http://packages/watchfiles/watchfiles-1.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (452 kB)
#6 15.05 Collecting websockets>=10.4 (from uvicorn[standard]==0.34.0)
#6 15.07   Downloading http://packages/websockets/websockets-14.2-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (169 kB)
#6 15.12 Collecting anyio>=3.0.0 (from watchfiles>=0.13->uvicorn[standard]==0.34.0)
#6 15.14   Downloading http://packages/anyio/anyio-4.8.0-py3-none-any.whl (96 kB)
#6 15.16 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio>=3.0.0->watchfiles>=0.13->uvicorn[standard]==0.34.0) (1.2.2)
#6 15.18 Collecting idna>=2.8 (from anyio>=3.0.0->watchfiles>=0.13->uvicorn[standard]==0.34.0)
#6 15.20   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 15.23 Collecting sniffio>=1.1 (from anyio>=3.0.0->watchfiles>=0.13->uvicorn[standard]==0.34.0)
#6 15.24   Downloading http://packages/sniffio/sniffio-1.3.1-py3-none-any.whl (10 kB)
#6 15.35 Installing collected packages: websockets, uvloop, sniffio, python-dotenv, idna, httptools, h11, uvicorn, anyio, watchfiles
#6 16.09 Successfully installed anyio-4.8.0 h11-0.14.0 httptools-0.6.4 idna-3.10 python-dotenv-1.0.1 sniffio-1.3.1 uvicorn-0.34.0 uvloop-0.21.0 watchfiles-1.0.4 websockets-14.2
#6 16.09 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 16.84 Looking in indexes: http://simple/
#6 16.87 Collecting rich-toolkit==0.12.0
#6 16.88   Downloading http://packages/rich-toolkit/rich_toolkit-0.12.0-py3-none-any.whl (13 kB)
#6 16.89 Requirement already satisfied: click>=8.1.7 in /usr/local/lib/python3.10/site-packages (from rich-toolkit==0.12.0) (8.1.8)
#6 16.90 Requirement already satisfied: rich>=13.7.1 in /usr/local/lib/python3.10/site-packages (from rich-toolkit==0.12.0) (13.9.4)
#6 16.90 Requirement already satisfied: typing-extensions>=4.12.2 in /usr/local/lib/python3.10/site-packages (from rich-toolkit==0.12.0) (4.12.2)
#6 16.90 Requirement already satisfied: markdown-it-py>=2.2.0 in /usr/local/lib/python3.10/site-packages (from rich>=13.7.1->rich-toolkit==0.12.0) (3.0.0)
#6 16.90 Requirement already satisfied: pygments<3.0.0,>=2.13.0 in /usr/local/lib/python3.10/site-packages (from rich>=13.7.1->rich-toolkit==0.12.0) (2.19.1)
#6 16.91 Requirement already satisfied: mdurl~=0.1 in /usr/local/lib/python3.10/site-packages (from markdown-it-py>=2.2.0->rich>=13.7.1->rich-toolkit==0.12.0) (0.1.2)
#6 17.00 Installing collected packages: rich-toolkit
#6 17.04 Successfully installed rich-toolkit-0.12.0
#6 17.04 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 17.8s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.403 tests/test_cli.py::test_dev
#7 1.403 tests/test_cli.py::test_dev_package
#7 1.403 tests/test_cli.py::test_dev_args
#7 1.403 tests/test_cli.py::test_run
#7 1.403 tests/test_cli.py::test_run_args
#7 1.403 tests/test_cli.py::test_run_error
#7 1.403 tests/test_cli.py::test_dev_help
#7 1.403 tests/test_cli.py::test_run_help
#7 1.403 tests/test_cli.py::test_callback_help
#7 1.403 tests/test_cli.py::test_version
#7 1.403 tests/test_cli.py::test_script
#7 1.403 tests/test_requirements.py::test_no_uvicorn
#7 1.403 tests/test_requirements.py::test_no_fastapi
#7 1.403 tests/test_utils_cli.py::test_get_uvicorn_config_uses_custom_formatter
#7 1.403 tests/test_utils_cli.py::test_custom_formatter
#7 1.403 tests/test_utils_default_dir.py::test_app_dir_main
#7 1.403 tests/test_utils_default_dir.py::test_app_dir_app
#7 1.403 tests/test_utils_default_dir.py::test_app_dir_api
#7 1.403 tests/test_utils_default_dir.py::test_app_dir_non_default
#7 1.403 tests/test_utils_default_file.py::test_single_file_main
#7 1.403 tests/test_utils_default_file.py::test_single_file_app
#7 1.403 tests/test_utils_default_file.py::test_single_file_api
#7 1.403 tests/test_utils_default_file.py::test_non_default_file
#7 1.403 tests/test_utils_package.py::test_package_app_root
#7 1.403 tests/test_utils_package.py::test_package_api_root
#7 1.403 tests/test_utils_package.py::test_package_other_root
#7 1.403 tests/test_utils_package.py::test_package_app_mod
#7 1.403 tests/test_utils_package.py::test_package_api_mod
#7 1.403 tests/test_utils_package.py::test_package_other_mod
#7 1.403 tests/test_utils_package.py::test_package_app_above
#7 1.403 tests/test_utils_package.py::test_package_api_parent
#7 1.403 tests/test_utils_package.py::test_package_other_parent
#7 1.403 tests/test_utils_package.py::test_package_mod_init_inside
#7 1.403 tests/test_utils_package.py::test_package_mod_dir
#7 1.403 tests/test_utils_package.py::test_package_init_inside
#7 1.403 tests/test_utils_package.py::test_package_dir_inside_package
#7 1.403 tests/test_utils_package.py::test_package_dir_above_package
#7 1.403 tests/test_utils_package.py::test_package_dir_explicit_app
#7 1.403 tests/test_utils_package.py::test_broken_package_dir
#7 1.403 tests/test_utils_package.py::test_package_dir_no_app
#7 1.403 tests/test_utils_package.py::test_package_dir_object_not_an_app
#7 1.403 tests/test_utils_package.py::test_package_dir_object_app_name_not_found
#7 1.403 tests/test_utils_single_file.py::test_single_file_app
#7 1.403 tests/test_utils_single_file.py::test_single_file_api
#7 1.403 tests/test_utils_single_file.py::test_single_file_other
#7 1.403 tests/test_utils_single_file.py::test_single_file_explicit_object
#7 1.403 tests/test_utils_single_file.py::test_single_non_existing_file
#7 1.403 
#7 1.403 47 tests collected in 0.29s
#7 DONE 1.7s

#8 exporting to image
#8 exporting layers
#8 exporting layers 0.7s done
#8 writing image sha256:ca28bd7ef012a5fdcdb2e8f3f542fc4406ac2565ef0b591bb67b6215ffde91a1 done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 0.7s
