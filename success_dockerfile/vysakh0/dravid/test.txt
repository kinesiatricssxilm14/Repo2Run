============================= test session starts ==============================
platform linux -- Python 3.10.16, pytest-7.4.4, pluggy-1.5.0
rootdir: /repo
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.4.0, cov-5.0.0
collected 182 items

<Module tests/api/test_api_main.py>
  <UnitTestCase TestDravidAPI>
    <TestCaseFunction test_call_dravid_api>
    <TestCaseFunction test_call_dravid_vision_api>
    <TestCaseFunction test_stream_dravid_api>
<Module tests/api/test_claude_api.py>
  <UnitTestCase TestApiUtils>
    <TestCaseFunction test_call_claude_api_with_pagination>
    <TestCaseFunction test_call_claude_vision_api_with_pagination>
    <TestCaseFunction test_get_api_key>
    <TestCaseFunction test_get_api_key_missing>
    <TestCaseFunction test_get_headers>
    <TestCaseFunction test_make_api_call>
    <TestCaseFunction test_parse_response_invalid_xml>
    <TestCaseFunction test_parse_response_valid_xml>
    <TestCaseFunction test_stream_claude_response>
<Module tests/api/test_openai_api.py>
  <UnitTestCase TestOpenAIApiUtils>
    <TestCaseFunction test_call_api_with_pagination>
    <TestCaseFunction test_call_api_with_pagination_ollama>
    <TestCaseFunction test_call_api_with_pagination_ollama_error>
    <TestCaseFunction test_call_vision_api_with_pagination>
    <TestCaseFunction test_call_vision_api_with_pagination_ollama>
    <TestCaseFunction test_get_client_azure>
    <TestCaseFunction test_get_client_custom>
    <TestCaseFunction test_get_client_ollama>
    <TestCaseFunction test_get_client_openai>
    <TestCaseFunction test_get_env_variable_existing>
    <TestCaseFunction test_get_env_variable_missing>
    <TestCaseFunction test_get_model_azure>
    <TestCaseFunction test_get_model_custom>
    <TestCaseFunction test_get_model_ollama>
    <TestCaseFunction test_get_model_openai>
    <TestCaseFunction test_parse_response_invalid_xml>
    <TestCaseFunction test_parse_response_valid_xml>
    <TestCaseFunction test_stream_response>
    <TestCaseFunction test_stream_response_ollama>
    <TestCaseFunction test_stream_response_ollama_error>
<Module tests/cli/monitor/test_dev_server_monitor.py>
  <UnitTestCase TestDevServerMonitor>
    <TestCaseFunction test_invalid_command_restart_limit>
    <TestCaseFunction test_perform_restart>
    <TestCaseFunction test_start>
    <TestCaseFunction test_start_process>
    <TestCaseFunction test_stop>
<Module tests/cli/monitor/test_error_resolvers.py>
  <UnitTestCase TestErrorResolver>
    <TestCaseFunction test_monitoring_handle_error_with_dravid_apply_fix_restart_declined>
    <TestCaseFunction test_monitoring_handle_error_with_dravid_apply_fix_with_restart>
    <TestCaseFunction test_monitoring_handle_error_with_dravid_apply_fix_without_restart>
    <TestCaseFunction test_monitoring_handle_error_with_dravid_parse_error>
<Module tests/cli/monitor/test_input_handler.py>
  <UnitTestCase TestInputHandler>
    <TestCaseFunction test_autocomplete>
    <TestCaseFunction test_autocomplete_directory>
    <TestCaseFunction test_get_input_with_autocomplete>
    <TestCaseFunction test_handle_general_input>
    <TestCaseFunction test_handle_input>
    <TestCaseFunction test_handle_vision_input>
    <TestCaseFunction test_process_input>
    <TestCaseFunction test_show_options>
<Module tests/cli/monitor/test_input_parser.py>
  <UnitTestCase TestInputParser>
    <TestCaseFunction test_file_with_spaces>
    <TestCaseFunction test_image_and_file>
    <TestCaseFunction test_image_path_with_spaces>
    <TestCaseFunction test_image_path_with_spaces_beginning>
    <TestCaseFunction test_multiple_files_no_image>
    <TestCaseFunction test_no_image_or_file_path>
    <TestCaseFunction test_non_existent_file_path>
    <TestCaseFunction test_simple_file>
    <TestCaseFunction test_simple_image_and_text>
<Module tests/cli/monitor/test_output_monitor.py>
  <UnitTestCase TestOutputMonitor>
    <TestCaseFunction test_check_for_errors>
    <TestCaseFunction test_check_idle_state>
    <TestCaseFunction test_check_idle_state_not_idle>
    <TestCaseFunction test_monitor_output_process_ended>
    <TestCaseFunction test_monitor_output_read_line>
<Module tests/cli/query/test_dynamic_command_handler.py>
  <UnitTestCase TestDynamicCommandHandler>
    <TestCaseFunction test_execute_commands>
    <TestCaseFunction test_execute_commands_with_no_output>
    <TestCaseFunction test_execute_commands_with_requires_restart>
    <TestCaseFunction test_execute_commands_with_skipped_steps>
    <TestCaseFunction test_execute_commands_with_unknown_type>
    <TestCaseFunction test_handle_error_with_dravid>
    <TestCaseFunction test_handle_file_operation>
    <TestCaseFunction test_handle_shell_command>
    <TestCaseFunction test_handle_shell_command_skipped>
    <TestCaseFunction test_update_file_metadata>
<Module tests/cli/query/test_file_operations.py>
  <UnitTestCase TestFileOperations>
    <TestCaseFunction test_find_file_with_dravid_existing_file>
    <TestCaseFunction test_find_file_with_dravid_no_suggestion>
    <TestCaseFunction test_find_file_with_dravid_suggested_file>
    <TestCaseFunction test_get_files_to_modify>
<Module tests/cli/query/test_image_handler.py>
  <UnitTestCase TestImageHandler>
    <TestCaseFunction test_handle_image_query>
    <TestCaseFunction test_handle_image_query_without_instruction>
<Module tests/cli/query/test_query_main.py>
  <UnitTestCase TestExecuteDravidCommand>
    <TestCaseFunction test_execute_dravid_command_api_error>
    <TestCaseFunction test_execute_dravid_command_debug_mode>
    <TestCaseFunction test_execute_dravid_command_with_error>
    <TestCaseFunction test_execute_dravid_command_with_image>
<Module tests/metadata/test_common_utils.py>
  <UnitTestCase TestCommonUtils>
    <TestCaseFunction test_find_file_with_dravid>
    <TestCaseFunction test_generate_file_description>
    <TestCaseFunction test_get_folder_structure>
    <TestCaseFunction test_get_ignore_patterns>
    <TestCaseFunction test_parse_gitignore>
    <TestCaseFunction test_should_ignore>
<Module tests/metadata/test_initializer.py>
  <UnitTestCase TestProjectMetadataInitializer>
    <TestCaseFunction test_initialize_project_metadata>
<Module tests/metadata/test_project_metadata.py>
  <UnitTestCase TestProjectMetadataManager>
    <TestCaseFunction test_analyze_file>
    <TestCaseFunction test_build_metadata>
    <TestCaseFunction test_get_directory_structure>
    <TestCaseFunction test_get_ignore_patterns>
    <TestCaseFunction test_is_binary_file>
    <TestCaseFunction test_should_ignore>
<Module tests/metadata/test_rate_limit_handler.py>
  <UnitTestCase TestRateLimitHandler>
    <TestCaseFunction test_process_files>
    <TestCaseFunction test_process_files_concurrency>
    <TestCaseFunction test_process_single_file>
    <TestCaseFunction test_process_single_file_error>
    <TestCaseFunction test_rate_limiter>
<Module tests/metadata/test_updater.py>
  <UnitTestCase TestMetadataUpdater>
    <TestCaseFunction test_update_metadata_with_dravid>
<Module tests/utils/test_apply_changes.py>
  <UnitTestCase TestApplyChangesSpecific>
    <TestCaseFunction test_add_email_and_move_paragraph>
    <TestCaseFunction test_complex_changes>
    <TestCaseFunction test_multiple_additions_with_indentation>
    <TestCaseFunction test_multiple_deletions>
    <TestCaseFunction test_python_code_add_replace>
    <TestCaseFunction test_replace_with_preserved_indentation>
<Module tests/utils/test_diff.py>
  <UnitTestCase TestDiffUtils>
    <TestCaseFunction test_generate_colored_diff>
    <TestCaseFunction test_preview_file_changes_create>
    <TestCaseFunction test_preview_file_changes_delete>
    <TestCaseFunction test_preview_file_changes_update>
<Module tests/utils/test_file_utils.py>
  <UnitTestCase TestFileOperations>
    <TestCaseFunction test_fetch_project_guidelines_existing_file>
    <TestCaseFunction test_fetch_project_guidelines_non_existing_file>
    <TestCaseFunction test_get_file_content_existing_file>
    <TestCaseFunction test_get_file_content_non_existing_file>
<Module tests/utils/test_loader.py>
  <UnitTestCase TestLoader>
    <TestCaseFunction test_loader_animation>
    <TestCaseFunction test_loader_custom_message>
    <TestCaseFunction test_loader_start_stop>
    <TestCaseFunction test_loader_stop_clears_line>
    <TestCaseFunction test_run_with_loader>
    <TestCaseFunction test_run_with_loader_exception>
<Module tests/utils/test_parser.py>
  <UnitTestCase TestDravidParser>
    <TestCaseFunction test_complex_cdata_content>
    <TestCaseFunction test_extract_and_parse_xml>
    <TestCaseFunction test_extract_and_parse_xml_with_html>
    <TestCaseFunction test_extract_outermost_xml>
    <TestCaseFunction test_malformed_html_in_cdata>
    <TestCaseFunction test_malformed_xml>
    <TestCaseFunction test_nested_cdata>
    <TestCaseFunction test_nested_react_cdata>
    <TestCaseFunction test_nested_tags_in_cdata>
    <TestCaseFunction test_parse_dravid_response>
    <TestCaseFunction test_parse_dravid_response_with_changes>
    <TestCaseFunction test_parse_file_list_response_error>
    <TestCaseFunction test_parse_file_list_response_success>
    <TestCaseFunction test_parse_find_file_response_error>
    <TestCaseFunction test_parse_find_file_response_success>
<Module tests/utils/test_pretty_print_stream.py>
  <Function test_basic_explanation>
  <Function test_spaced_tags>
  <Function test_newline_in_tags>
  <Function test_mixed_spacing_and_newlines>
  <Function test_multiple_chunks>
  <Function test_multiple_explanations>
  <Function test_explanation_and_shell_command>
  <Function test_file_operation_and_cdata>
  <Function test_multiple_shell_commands>
  <Function test_mixed_content>
  <Function test_multiple_file_operations>
  <Function test_mixed_operations>
  <Function test_cdata_with_xml_content>
  <Function test_large_cdata_content>
  <Function test_split_step>
  <Function test_split_cdata>
  <Function test_nested_cdata>
  <Function test_multiple_nested_cdata>
  <Function test_cdata_with_xml_like_content>
  <Function test_cdata_with_instruction_like_content>
<Module tests/utils/test_step_executor.py>
  <UnitTestCase TestExecutor>
    <TestCaseFunction test_execute_shell_command>
    <TestCaseFunction test_execute_shell_command_cd>
    <TestCaseFunction test_execute_shell_command_echo>
    <TestCaseFunction test_execute_shell_command_user_cancel>
    <TestCaseFunction test_execute_single_command>
    <TestCaseFunction test_get_folder_structure>
    <TestCaseFunction test_handle_cd_command>
    <TestCaseFunction test_handle_source_command>
    <TestCaseFunction test_is_safe_command>
    <TestCaseFunction test_is_safe_path>
    <TestCaseFunction test_is_safe_rm_command>
    <TestCaseFunction test_merge_json>
    <TestCaseFunction test_parse_json>
    <TestCaseFunction test_perform_file_operation_create>
    <TestCaseFunction test_perform_file_operation_delete>
    <TestCaseFunction test_perform_file_operation_update>
    <TestCaseFunction test_perform_file_operation_user_cancel>
    <TestCaseFunction test_reset_directory>
    <TestCaseFunction test_update_env_from_command>
<Module tests/utils/test_utils.py>
  <UnitTestCase TestUtilityFunctions>
    <TestCaseFunction test_print_debug>
    <TestCaseFunction test_print_error>
    <TestCaseFunction test_print_info>
    <TestCaseFunction test_print_step>
    <TestCaseFunction test_print_success>
    <TestCaseFunction test_print_warning>

========================= 182 tests collected in 1.87s =========================