#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.82kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [internal] load build context
#4 transferring context: 24.09kB done
#4 DONE 0.0s

#5 [1/8] FROM docker.io/library/python:3.10
#5 CACHED

#6 [2/8] COPY search_patch /search_patch
#6 DONE 0.0s

#7 [3/8] COPY code_edit.py /code_edit.py
#7 DONE 0.0s

#8 [4/8] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#8 0.498 Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
#8 0.834 Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
#8 0.927 Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
#8 1.020 Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8789 kB]
#8 1.543 Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [8856 B]
#8 1.686 Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [240 kB]
#8 2.843 Fetched 9292 kB in 2s (3718 kB/s)
#8 2.843 Reading package lists...
#8 3.664 Reading package lists...
#8 4.451 Building dependency tree...
#8 4.711 Reading state information...
#8 5.094 curl is already the newest version (7.88.1-10+deb12u8).
#8 5.094 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
#8 25.66 Retrieving Poetry metadata
#8 25.66 
#8 25.66 # Welcome to Poetry!
#8 25.66 
#8 25.66 This will download and install the latest version of Poetry,
#8 25.66 a dependency and package manager for Python.
#8 25.66 
#8 25.66 It will add the `poetry` command to Poetry's bin directory, located at:
#8 25.66 
#8 25.66 /root/.local/bin
#8 25.66 
#8 25.66 You can uninstall at any time by executing this script with the --uninstall option,
#8 25.66 and these changes will be reverted.
#8 25.66 
#8 25.66 Installing Poetry (2.0.0)
#8 25.66 Installing Poetry (2.0.0): Creating environment
#8 25.66 Installing Poetry (2.0.0): Installing Poetry
#8 25.66 Installing Poetry (2.0.0): Creating script
#8 25.66 Installing Poetry (2.0.0): Done
#8 25.66 
#8 25.66 Poetry (2.0.0) is installed now. Great!
#8 25.66 
#8 25.66 To get started you need Poetry's bin directory (/root/.local/bin) in your `PATH`
#8 25.66 environment variable.
#8 25.66 
#8 25.66 Add `export PATH="/root/.local/bin:$PATH"` to your shell configuration file.
#8 25.66 
#8 25.66 Alternatively, you can call Poetry explicitly with `/root/.local/bin/poetry`.
#8 25.66 
#8 25.66 You can test that everything is set up by executing:
#8 25.66 
#8 25.66 `poetry --version`
#8 25.66 
#8 DONE 25.9s

#9 [5/8] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/filipstrand/mflux.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /mflux/. /repo && rm -rf /mflux/ &&     rm -rf /mflux &&     cd /repo && git checkout 627398f531b10f447406377355aad8f1665c6805 &&     pip install huggingface-hub==0.27.0 &&     pip install mlx==0.18.0 &&     pip install numpy==2.2.0 &&     pip install opencv-python==4.10.0.84 &&     pip install piexif==1.1.3 &&     pip install pillow==10.4.0 &&     pip install safetensors==0.4.5 &&     pip install sentencepiece==0.2.0 &&     pip install tqdm==4.67.1 &&     pip install transformers==4.47.0 &&     pip install pytest==8.3.4 &&     pip install pytest-timer==1.0.0
#9 1.889 Looking in indexes: http://simple/
#9 2.057 Collecting pytest
#9 2.078   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#9 2.103      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 17.5 MB/s eta 0:00:00
#9 2.176 Collecting pytest-xdist
#9 2.196   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#9 2.209      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.4 MB/s eta 0:00:00
#9 2.286 Collecting tomli>=1
#9 2.308   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#9 2.372 Collecting pluggy<2,>=1.5
#9 2.390   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#9 2.439 Collecting exceptiongroup>=1.0.0rc8
#9 2.459   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#9 2.496 Collecting iniconfig
#9 2.521   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#9 2.583 Collecting packaging
#9 2.604   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#9 2.616      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#9 2.668 Collecting execnet>=2.1
#9 2.689   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#9 2.698      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 6.8 MB/s eta 0:00:00
#9 2.858 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#9 3.472 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#9 3.472 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 3.604 
#9 3.604 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#9 3.604 [notice] To update, run: pip install --upgrade pip
#9 4.454 Looking in indexes: http://simple/
#9 4.537 Collecting pipdeptree
#9 4.557   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#9 4.724 Collecting pip>=24.2
#9 4.737   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#9 4.760 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#9 4.890 Installing collected packages: pip, pipdeptree
#9 4.891   Attempting uninstall: pip
#9 4.892     Found existing installation: pip 23.0.1
#9 5.106     Uninstalling pip-23.0.1:
#9 5.289       Successfully uninstalled pip-23.0.1
#9 6.681 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#9 6.681 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 6.892 Cloning into 'mflux'...
#9 16.40 Note: switching to '627398f531b10f447406377355aad8f1665c6805'.
#9 16.40 
#9 16.40 You are in 'detached HEAD' state. You can look around, make experimental
#9 16.40 changes and commit them, and you can discard any commits you make in this
#9 16.40 state without impacting any branches by switching back to a branch.
#9 16.40 
#9 16.40 If you want to create a new branch to retain commits you create, you may
#9 16.40 do so (now or later) by using -c with the switch command. Example:
#9 16.40 
#9 16.40   git switch -c <new-branch-name>
#9 16.40 
#9 16.40 Or undo this operation with:
#9 16.40 
#9 16.40   git switch -
#9 16.40 
#9 16.40 Turn off this advice by setting config variable advice.detachedHead to false
#9 16.40 
#9 16.40 HEAD is now at 627398f Add 'FLUX.1 Tools' for features to support
#9 16.94 Looking in indexes: http://simple/
#9 17.05 Collecting huggingface-hub==0.27.0
#9 17.07   Downloading http://packages/huggingface-hub/huggingface_hub-0.27.0-py3-none-any.whl (450 kB)
#9 17.22 Collecting filelock (from huggingface-hub==0.27.0)
#9 17.23   Using cached http://packages/filelock/filelock-3.16.1-py3-none-any.whl (16 kB)
#9 17.29 Collecting fsspec>=2023.5.0 (from huggingface-hub==0.27.0)
#9 17.31   Downloading http://packages/fsspec/fsspec-2024.12.0-py3-none-any.whl (183 kB)
#9 17.39 Requirement already satisfied: packaging>=20.9 in /usr/local/lib/python3.10/site-packages (from huggingface-hub==0.27.0) (24.2)
#9 17.47 Collecting pyyaml>=5.1 (from huggingface-hub==0.27.0)
#9 17.49   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#9 17.52      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 31.3 MB/s eta 0:00:00
#9 17.62 Collecting requests (from huggingface-hub==0.27.0)
#9 17.62   Using cached http://packages/requests/requests-2.32.3-py3-none-any.whl (64 kB)
#9 17.75 Collecting tqdm>=4.42.1 (from huggingface-hub==0.27.0)
#9 17.77   Downloading http://packages/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)
#9 17.83 Collecting typing-extensions>=3.7.4.3 (from huggingface-hub==0.27.0)
#9 17.87   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#9 18.07 Collecting charset-normalizer<4,>=2 (from requests->huggingface-hub==0.27.0)
#9 18.07   Using cached http://packages/charset-normalizer/charset_normalizer-3.4.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (146 kB)
#9 18.10 Collecting idna<4,>=2.5 (from requests->huggingface-hub==0.27.0)
#9 18.11   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#9 18.19 Collecting urllib3<3,>=1.21.1 (from requests->huggingface-hub==0.27.0)
#9 18.20   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#9 18.24 Collecting certifi>=2017.4.17 (from requests->huggingface-hub==0.27.0)
#9 18.25   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#9 18.41 Installing collected packages: urllib3, typing-extensions, tqdm, pyyaml, idna, fsspec, filelock, charset-normalizer, certifi, requests, huggingface-hub
#9 19.53 Successfully installed certifi-2024.12.14 charset-normalizer-3.4.1 filelock-3.16.1 fsspec-2024.12.0 huggingface-hub-0.27.0 idna-3.10 pyyaml-6.0.2 requests-2.32.3 tqdm-4.67.1 typing-extensions-4.12.2 urllib3-2.3.0
#9 19.53 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 20.35 Looking in indexes: http://simple/
#9 20.44 Collecting mlx==0.18.0
#9 20.70   Downloading http://packages/mlx/mlx-0.18.0-cp310-cp310-manylinux_2_31_x86_64.whl (12.8 MB)
#9 20.82      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.8/12.8 MB 128.1 MB/s eta 0:00:00
#9 21.06 Installing collected packages: mlx
#9 21.45 Successfully installed mlx-0.18.0
#9 21.45 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 22.29 Looking in indexes: http://simple/
#9 22.71 Collecting numpy==2.2.0
#9 22.93   Downloading http://packages/numpy/numpy-2.2.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.4 MB)
#9 23.07      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.4/16.4 MB 134.1 MB/s eta 0:00:00
#9 23.29 Installing collected packages: numpy
#9 26.10 Successfully installed numpy-2.2.0
#9 26.10 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 26.88 Looking in indexes: http://simple/
#9 27.11 Collecting opencv-python==4.10.0.84
#9 27.14   Downloading http://packages/opencv-python/opencv_python-4.10.0.84-cp37-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (62.5 MB)
#9 27.78      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.5/62.5 MB 101.4 MB/s eta 0:00:00
#9 28.07 Requirement already satisfied: numpy>=1.21.2 in /usr/local/lib/python3.10/site-packages (from opencv-python==4.10.0.84) (2.2.0)
#9 28.24 Installing collected packages: opencv-python
#9 29.82 Successfully installed opencv-python-4.10.0.84
#9 29.82 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 30.55 Looking in indexes: http://simple/
#9 30.59 Collecting piexif==1.1.3
#9 30.61   Downloading http://packages/piexif/piexif-1.1.3-py2.py3-none-any.whl (20 kB)
#9 30.79 Installing collected packages: piexif
#9 30.83 Successfully installed piexif-1.1.3
#9 30.83 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 31.55 Looking in indexes: http://simple/
#9 31.98 Collecting pillow==10.4.0
#9 32.01   Downloading http://packages/pillow/pillow-10.4.0-cp310-cp310-manylinux_2_28_x86_64.whl (4.5 MB)
#9 32.07      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.5/4.5 MB 89.4 MB/s eta 0:00:00
#9 32.25 Installing collected packages: pillow
#9 32.63 Successfully installed pillow-10.4.0
#9 32.63 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 33.42 Looking in indexes: http://simple/
#9 33.72 Collecting safetensors==0.4.5
#9 33.74   Downloading http://packages/safetensors/safetensors-0.4.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (435 kB)
#9 33.95 Installing collected packages: safetensors
#9 33.98 Successfully installed safetensors-0.4.5
#9 33.98 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 34.76 Looking in indexes: http://simple/
#9 34.89 Collecting sentencepiece==0.2.0
#9 34.91   Downloading http://packages/sentencepiece/sentencepiece-0.2.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.3 MB)
#9 34.95      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.3/1.3 MB 47.1 MB/s eta 0:00:00
#9 35.14 Installing collected packages: sentencepiece
#9 35.20 Successfully installed sentencepiece-0.2.0
#9 35.20 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 35.93 Looking in indexes: http://simple/
#9 35.93 Requirement already satisfied: tqdm==4.67.1 in /usr/local/lib/python3.10/site-packages (4.67.1)
#9 36.11 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 36.83 Looking in indexes: http://simple/
#9 36.96 Collecting transformers==4.47.0
#9 36.98   Downloading http://packages/transformers/transformers-4.47.0-py3-none-any.whl (10.1 MB)
#9 37.06      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 10.1/10.1 MB 143.3 MB/s eta 0:00:00
#9 37.53 Requirement already satisfied: filelock in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (3.16.1)
#9 37.53 Requirement already satisfied: huggingface-hub<1.0,>=0.24.0 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (0.27.0)
#9 37.53 Requirement already satisfied: numpy>=1.17 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (2.2.0)
#9 37.53 Requirement already satisfied: packaging>=20.0 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (24.2)
#9 37.53 Requirement already satisfied: pyyaml>=5.1 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (6.0.2)
#9 38.24 Collecting regex!=2019.12.17 (from transformers==4.47.0)
#9 38.26   Downloading http://packages/regex/regex-2024.11.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (781 kB)
#9 38.29      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 781.7/781.7 kB 40.7 MB/s eta 0:00:00
#9 38.30 Requirement already satisfied: requests in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (2.32.3)
#9 38.69 Collecting tokenizers<0.22,>=0.21 (from transformers==4.47.0)
#9 38.72   Downloading http://packages/tokenizers/tokenizers-0.21.0-cp39-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
#9 38.80      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 43.1 MB/s eta 0:00:00
#9 38.81 Requirement already satisfied: safetensors>=0.4.1 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (0.4.5)
#9 38.81 Requirement already satisfied: tqdm>=4.27 in /usr/local/lib/python3.10/site-packages (from transformers==4.47.0) (4.67.1)
#9 38.85 Requirement already satisfied: fsspec>=2023.5.0 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.0->transformers==4.47.0) (2024.12.0)
#9 38.85 Requirement already satisfied: typing-extensions>=3.7.4.3 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.0->transformers==4.47.0) (4.12.2)
#9 38.94 Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/site-packages (from requests->transformers==4.47.0) (3.4.1)
#9 38.94 Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/site-packages (from requests->transformers==4.47.0) (3.10)
#9 38.94 Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/site-packages (from requests->transformers==4.47.0) (2.3.0)
#9 38.94 Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/site-packages (from requests->transformers==4.47.0) (2024.12.14)
#9 39.34 Installing collected packages: regex, tokenizers, transformers
#9 47.59 Successfully installed regex-2024.11.6 tokenizers-0.21.0 transformers-4.47.0
#9 47.59 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 48.51 Looking in indexes: http://simple/
#9 48.51 Requirement already satisfied: pytest==8.3.4 in /usr/local/lib/python3.10/site-packages (8.3.4)
#9 48.52 Requirement already satisfied: exceptiongroup>=1.0.0rc8 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.2.2)
#9 48.52 Requirement already satisfied: iniconfig in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.0.0)
#9 48.52 Requirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (24.2)
#9 48.52 Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.5.0)
#9 48.52 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.2.1)
#9 49.02 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 49.75 Looking in indexes: http://simple/
#9 49.80 Collecting pytest-timer==1.0.0
#9 49.93   Downloading http://packages/pytest-timer/pytest_timer-1.0.0-py3-none-any.whl (5.3 kB)
#9 49.95 Requirement already satisfied: pytest in /usr/local/lib/python3.10/site-packages (from pytest-timer==1.0.0) (8.3.4)
#9 49.95 Requirement already satisfied: exceptiongroup>=1.0.0rc8 in /usr/local/lib/python3.10/site-packages (from pytest->pytest-timer==1.0.0) (1.2.2)
#9 49.95 Requirement already satisfied: iniconfig in /usr/local/lib/python3.10/site-packages (from pytest->pytest-timer==1.0.0) (2.0.0)
#9 49.95 Requirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pytest->pytest-timer==1.0.0) (24.2)
#9 49.96 Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.10/site-packages (from pytest->pytest-timer==1.0.0) (1.5.0)
#9 49.96 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from pytest->pytest-timer==1.0.0) (2.2.1)
#9 50.41 Installing collected packages: pytest-timer
#9 50.43 Successfully installed pytest-timer-1.0.0
#9 50.43 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#9 DONE 51.4s

#10 [6/8] RUN apt-get update -qq &&     apt-get install libgl1-mesa-glx -y -qq &&     pip install mlx==0.18.0 -q &&     python /code_edit.py -t "/search_patch/0.patch" &&     python /code_edit.py -t "/search_patch/1.patch" &&     pip install -e /repo
#10 11.12 debconf: delaying package configuration, since apt-utils is not installed
#10 11.22 Selecting previously unselected package libdrm-common.
#10 11.22 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 23969 files and directories currently installed.)
#10 11.38 Preparing to unpack .../00-libdrm-common_2.4.114-1_all.deb ...
#10 11.38 Unpacking libdrm-common (2.4.114-1) ...
#10 11.41 Selecting previously unselected package libdrm2:amd64.
#10 11.42 Preparing to unpack .../01-libdrm2_2.4.114-1+b1_amd64.deb ...
#10 11.42 Unpacking libdrm2:amd64 (2.4.114-1+b1) ...
#10 11.46 Selecting previously unselected package libdrm-amdgpu1:amd64.
#10 11.46 Preparing to unpack .../02-libdrm-amdgpu1_2.4.114-1+b1_amd64.deb ...
#10 11.46 Unpacking libdrm-amdgpu1:amd64 (2.4.114-1+b1) ...
#10 11.50 Selecting previously unselected package libpciaccess0:amd64.
#10 11.50 Preparing to unpack .../03-libpciaccess0_0.17-2_amd64.deb ...
#10 11.51 Unpacking libpciaccess0:amd64 (0.17-2) ...
#10 11.55 Selecting previously unselected package libdrm-intel1:amd64.
#10 11.55 Preparing to unpack .../04-libdrm-intel1_2.4.114-1+b1_amd64.deb ...
#10 11.55 Unpacking libdrm-intel1:amd64 (2.4.114-1+b1) ...
#10 11.59 Selecting previously unselected package libdrm-nouveau2:amd64.
#10 11.60 Preparing to unpack .../05-libdrm-nouveau2_2.4.114-1+b1_amd64.deb ...
#10 11.60 Unpacking libdrm-nouveau2:amd64 (2.4.114-1+b1) ...
#10 11.64 Selecting previously unselected package libdrm-radeon1:amd64.
#10 11.64 Preparing to unpack .../06-libdrm-radeon1_2.4.114-1+b1_amd64.deb ...
#10 11.64 Unpacking libdrm-radeon1:amd64 (2.4.114-1+b1) ...
#10 11.68 Selecting previously unselected package libglvnd0:amd64.
#10 11.68 Preparing to unpack .../07-libglvnd0_1.6.0-1_amd64.deb ...
#10 11.68 Unpacking libglvnd0:amd64 (1.6.0-1) ...
#10 11.72 Selecting previously unselected package libglapi-mesa:amd64.
#10 11.73 Preparing to unpack .../08-libglapi-mesa_22.3.6-1+deb12u1_amd64.deb ...
#10 11.73 Unpacking libglapi-mesa:amd64 (22.3.6-1+deb12u1) ...
#10 11.77 Selecting previously unselected package libx11-xcb1:amd64.
#10 11.77 Preparing to unpack .../09-libx11-xcb1_2%3a1.8.4-2+deb12u2_amd64.deb ...
#10 11.77 Unpacking libx11-xcb1:amd64 (2:1.8.4-2+deb12u2) ...
#10 11.81 Selecting previously unselected package libxcb-dri2-0:amd64.
#10 11.82 Preparing to unpack .../10-libxcb-dri2-0_1.15-1_amd64.deb ...
#10 11.82 Unpacking libxcb-dri2-0:amd64 (1.15-1) ...
#10 11.86 Selecting previously unselected package libxcb-dri3-0:amd64.
#10 11.87 Preparing to unpack .../11-libxcb-dri3-0_1.15-1_amd64.deb ...
#10 11.87 Unpacking libxcb-dri3-0:amd64 (1.15-1) ...
#10 11.91 Selecting previously unselected package libxcb-glx0:amd64.
#10 11.92 Preparing to unpack .../12-libxcb-glx0_1.15-1_amd64.deb ...
#10 11.92 Unpacking libxcb-glx0:amd64 (1.15-1) ...
#10 11.96 Selecting previously unselected package libxcb-present0:amd64.
#10 11.97 Preparing to unpack .../13-libxcb-present0_1.15-1_amd64.deb ...
#10 11.97 Unpacking libxcb-present0:amd64 (1.15-1) ...
#10 12.01 Selecting previously unselected package libxcb-randr0:amd64.
#10 12.02 Preparing to unpack .../14-libxcb-randr0_1.15-1_amd64.deb ...
#10 12.02 Unpacking libxcb-randr0:amd64 (1.15-1) ...
#10 12.07 Selecting previously unselected package libxcb-sync1:amd64.
#10 12.07 Preparing to unpack .../15-libxcb-sync1_1.15-1_amd64.deb ...
#10 12.07 Unpacking libxcb-sync1:amd64 (1.15-1) ...
#10 12.12 Selecting previously unselected package libxcb-xfixes0:amd64.
#10 12.12 Preparing to unpack .../16-libxcb-xfixes0_1.15-1_amd64.deb ...
#10 12.12 Unpacking libxcb-xfixes0:amd64 (1.15-1) ...
#10 12.17 Selecting previously unselected package libxfixes3:amd64.
#10 12.17 Preparing to unpack .../17-libxfixes3_1%3a6.0.0-2_amd64.deb ...
#10 12.17 Unpacking libxfixes3:amd64 (1:6.0.0-2) ...
#10 12.21 Selecting previously unselected package libxshmfence1:amd64.
#10 12.21 Preparing to unpack .../18-libxshmfence1_1.3-1_amd64.deb ...
#10 12.22 Unpacking libxshmfence1:amd64 (1.3-1) ...
#10 12.25 Selecting previously unselected package libxxf86vm1:amd64.
#10 12.25 Preparing to unpack .../19-libxxf86vm1_1%3a1.1.4-1+b2_amd64.deb ...
#10 12.25 Unpacking libxxf86vm1:amd64 (1:1.1.4-1+b2) ...
#10 12.29 Selecting previously unselected package libz3-4:amd64.
#10 12.29 Preparing to unpack .../20-libz3-4_4.8.12-3.1_amd64.deb ...
#10 12.29 Unpacking libz3-4:amd64 (4.8.12-3.1) ...
#10 13.04 Selecting previously unselected package libllvm15:amd64.
#10 13.04 Preparing to unpack .../21-libllvm15_1%3a15.0.6-4+b1_amd64.deb ...
#10 13.05 Unpacking libllvm15:amd64 (1:15.0.6-4+b1) ...
#10 14.11 Selecting previously unselected package libsensors-config.
#10 14.12 Preparing to unpack .../22-libsensors-config_1%3a3.6.0-7.1_all.deb ...
#10 14.12 Unpacking libsensors-config (1:3.6.0-7.1) ...
#10 14.16 Selecting previously unselected package libsensors5:amd64.
#10 14.16 Preparing to unpack .../23-libsensors5_1%3a3.6.0-7.1_amd64.deb ...
#10 14.21 Unpacking libsensors5:amd64 (1:3.6.0-7.1) ...
#10 14.25 Selecting previously unselected package libgl1-mesa-dri:amd64.
#10 14.26 Preparing to unpack .../24-libgl1-mesa-dri_22.3.6-1+deb12u1_amd64.deb ...
#10 14.27 Unpacking libgl1-mesa-dri:amd64 (22.3.6-1+deb12u1) ...
#10 14.98 Selecting previously unselected package libglx-mesa0:amd64.
#10 14.98 Preparing to unpack .../25-libglx-mesa0_22.3.6-1+deb12u1_amd64.deb ...
#10 14.98 Unpacking libglx-mesa0:amd64 (22.3.6-1+deb12u1) ...
#10 15.03 Selecting previously unselected package libglx0:amd64.
#10 15.03 Preparing to unpack .../26-libglx0_1.6.0-1_amd64.deb ...
#10 15.04 Unpacking libglx0:amd64 (1.6.0-1) ...
#10 15.08 Selecting previously unselected package libgl1:amd64.
#10 15.08 Preparing to unpack .../27-libgl1_1.6.0-1_amd64.deb ...
#10 15.08 Unpacking libgl1:amd64 (1.6.0-1) ...
#10 15.13 Selecting previously unselected package libgl1-mesa-glx:amd64.
#10 15.13 Preparing to unpack .../28-libgl1-mesa-glx_22.3.6-1+deb12u1_amd64.deb ...
#10 15.13 Unpacking libgl1-mesa-glx:amd64 (22.3.6-1+deb12u1) ...
#10 15.18 Setting up libxcb-dri3-0:amd64 (1.15-1) ...
#10 15.19 Setting up libx11-xcb1:amd64 (2:1.8.4-2+deb12u2) ...
#10 15.20 Setting up libpciaccess0:amd64 (0.17-2) ...
#10 15.21 Setting up libxcb-xfixes0:amd64 (1.15-1) ...
#10 15.21 Setting up libglvnd0:amd64 (1.6.0-1) ...
#10 15.22 Setting up libxcb-glx0:amd64 (1.15-1) ...
#10 15.23 Setting up libsensors-config (1:3.6.0-7.1) ...
#10 15.24 Setting up libxxf86vm1:amd64 (1:1.1.4-1+b2) ...
#10 15.25 Setting up libxcb-present0:amd64 (1.15-1) ...
#10 15.26 Setting up libz3-4:amd64 (4.8.12-3.1) ...
#10 15.26 Setting up libxfixes3:amd64 (1:6.0.0-2) ...
#10 15.27 Setting up libxcb-sync1:amd64 (1.15-1) ...
#10 15.28 Setting up libsensors5:amd64 (1:3.6.0-7.1) ...
#10 15.29 Setting up libglapi-mesa:amd64 (22.3.6-1+deb12u1) ...
#10 15.30 Setting up libxcb-dri2-0:amd64 (1.15-1) ...
#10 15.30 Setting up libxshmfence1:amd64 (1.3-1) ...
#10 15.31 Setting up libxcb-randr0:amd64 (1.15-1) ...
#10 15.32 Setting up libllvm15:amd64 (1:15.0.6-4+b1) ...
#10 15.32 Setting up libdrm-common (2.4.114-1) ...
#10 15.33 Setting up libdrm2:amd64 (2.4.114-1+b1) ...
#10 15.34 Setting up libdrm-amdgpu1:amd64 (2.4.114-1+b1) ...
#10 15.35 Setting up libdrm-nouveau2:amd64 (2.4.114-1+b1) ...
#10 15.35 Setting up libdrm-radeon1:amd64 (2.4.114-1+b1) ...
#10 15.36 Setting up libdrm-intel1:amd64 (2.4.114-1+b1) ...
#10 15.37 Setting up libgl1-mesa-dri:amd64 (22.3.6-1+deb12u1) ...
#10 15.38 Setting up libglx-mesa0:amd64 (22.3.6-1+deb12u1) ...
#10 15.39 Setting up libglx0:amd64 (1.6.0-1) ...
#10 15.40 Setting up libgl1:amd64 (1.6.0-1) ...
#10 15.41 Setting up libgl1-mesa-glx:amd64 (22.3.6-1+deb12u1) ...
#10 15.42 Processing triggers for libc-bin (2.36-9+deb12u9) ...
#10 16.53 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#10 16.78 * Succeed Patch:
#10 16.78 * Fail Patch:
#10 16.78 #SEARCH/REPLACE block failed to match!
#10 16.78 
#10 16.78 ## SearchReplaceNoExactMatch: This SEARCH block failed to exactly match lines in /repo/pyproject.toml
#10 16.78   mlx = ">=0.20.0,<1.0"
#10 16.78 
#10 16.78 
#10 16.78 The SEARCH section must exactly match an existing block of lines including all white space, comments, indentation, docstrings, etc
#10 16.78 
#10 16.78 TIPS:
#10 16.78 * All patches must be based on the original code. Make sure it and try to provide more sufficient and unique old line(s) from snippet to facilitate matching.
#10 16.78 * Make sure your patch has right indentation.
#10 16.78 * Make sure your file path is correct.
#10 16.85 * Succeed Patch:
#10 16.85 --- arepopyproject.toml
#10 16.85 +++ brepopyproject.toml
#10 16.85 @@ -14,7 +14,7 @@
#10 16.85  requires-python = ">=3.10"
#10 16.85  dependencies = [
#10 16.85      "huggingface-hub>=0.24.5,<1.0",
#10 16.85 -    "mlx>=0.20.0,<1.0",
#10 16.85 +    "mlx==0.18.0",
#10 16.85      "numpy>=2.0.1,<3.0",
#10 16.85      "opencv-python>=4.10.0,<5.0",
#10 16.85      "piexif>=1.1.3,<2.0",
#10 16.85 
#10 16.85 
#10 17.41 Looking in indexes: http://simple/
#10 17.41 Obtaining file:///repo
#10 17.41   Installing build dependencies: started
#10 20.85   Installing build dependencies: finished with status 'done'
#10 20.85   Checking if build backend supports build_editable: started
#10 21.11   Checking if build backend supports build_editable: finished with status 'done'
#10 21.11   Getting requirements to build editable: started
#10 21.49   Getting requirements to build editable: finished with status 'done'
#10 21.50   Preparing editable metadata (pyproject.toml): started
#10 21.89   Preparing editable metadata (pyproject.toml): finished with status 'done'
#10 21.93 Requirement already satisfied: huggingface-hub<1.0,>=0.24.5 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (0.27.0)
#10 21.93 Requirement already satisfied: mlx==0.18.0 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (0.18.0)
#10 21.93 Requirement already satisfied: numpy<3.0,>=2.0.1 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (2.2.0)
#10 21.93 Requirement already satisfied: opencv-python<5.0,>=4.10.0 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (4.10.0.84)
#10 21.93 Requirement already satisfied: piexif<2.0,>=1.1.3 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (1.1.3)
#10 21.93 Requirement already satisfied: pillow<11.0,>=10.4.0 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (10.4.0)
#10 21.94 Requirement already satisfied: safetensors<1.0,>=0.4.4 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (0.4.5)
#10 21.94 Requirement already satisfied: sentencepiece<1.0,>=0.2.0 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (0.2.0)
#10 22.06 Collecting torch<3.0,>=2.3.1 (from mflux==0.4.1)
#10 22.09   Downloading http://packages/torch/torch-2.5.1-cp310-cp310-manylinux1_x86_64.whl (906.4 MB)
#10 30.50      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 906.4/906.4 MB 41.1 MB/s eta 0:00:00
#10 33.70 Requirement already satisfied: tqdm<5.0,>=4.66.5 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (4.67.1)
#10 33.71 Requirement already satisfied: transformers<5.0,>=4.44.0 in /usr/local/lib/python3.10/site-packages (from mflux==0.4.1) (4.47.0)
#10 33.75 Requirement already satisfied: filelock in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (3.16.1)
#10 33.76 Requirement already satisfied: fsspec>=2023.5.0 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (2024.12.0)
#10 33.76 Requirement already satisfied: packaging>=20.9 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (24.2)
#10 33.76 Requirement already satisfied: pyyaml>=5.1 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (6.0.2)
#10 33.76 Requirement already satisfied: requests in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (2.32.3)
#10 33.76 Requirement already satisfied: typing-extensions>=3.7.4.3 in /usr/local/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (4.12.2)
#10 33.86 Collecting networkx (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 33.88   Downloading http://packages/networkx/networkx-3.4.2-py3-none-any.whl (1.7 MB)
#10 34.86      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 1.5 MB/s eta 0:00:00
#10 34.92 Collecting jinja2 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 34.94   Downloading http://packages/jinja2/jinja2-3.1.5-py3-none-any.whl (134 kB)
#10 35.50 Collecting nvidia-cuda-nvrtc-cu12==12.4.127 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 35.53   Downloading http://packages/nvidia-cuda-nvrtc-cu12/nvidia_cuda_nvrtc_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (24.6 MB)
#10 35.71      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 24.6/24.6 MB 148.3 MB/s eta 0:00:00
#10 35.86 Collecting nvidia-cuda-runtime-cu12==12.4.127 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 35.88   Downloading http://packages/nvidia-cuda-runtime-cu12/nvidia_cuda_runtime_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (883 kB)
#10 35.91      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 883.7/883.7 kB 39.5 MB/s eta 0:00:00
#10 35.95 Collecting nvidia-cuda-cupti-cu12==12.4.127 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 35.98   Downloading http://packages/nvidia-cuda-cupti-cu12/nvidia_cuda_cupti_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (13.8 MB)
#10 36.15      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.8/13.8 MB 90.0 MB/s eta 0:00:00
#10 36.25 Collecting nvidia-cudnn-cu12==9.1.0.70 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 36.27   Downloading http://packages/nvidia-cudnn-cu12/nvidia_cudnn_cu12-9.1.0.70-py3-none-manylinux2014_x86_64.whl (664.8 MB)
#10 41.56      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 664.8/664.8 MB 62.5 MB/s eta 0:00:00
#10 43.85 Collecting nvidia-cublas-cu12==12.4.5.8 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 43.87   Downloading http://packages/nvidia-cublas-cu12/nvidia_cublas_cu12-12.4.5.8-py3-none-manylinux2014_x86_64.whl (363.4 MB)
#10 46.18      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 363.4/363.4 MB 128.2 MB/s eta 0:00:00
#10 47.36 Collecting nvidia-cufft-cu12==11.2.1.3 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 47.38   Downloading http://packages/nvidia-cufft-cu12/nvidia_cufft_cu12-11.2.1.3-py3-none-manylinux2014_x86_64.whl (211.5 MB)
#10 49.38      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 211.5/211.5 MB 106.2 MB/s eta 0:00:00
#10 50.08 Collecting nvidia-curand-cu12==10.3.5.147 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 50.11   Downloading http://packages/nvidia-curand-cu12/nvidia_curand_cu12-10.3.5.147-py3-none-manylinux2014_x86_64.whl (56.3 MB)
#10 50.41      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.3/56.3 MB 199.3 MB/s eta 0:00:00
#10 50.62 Collecting nvidia-cusolver-cu12==11.6.1.9 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 50.64   Downloading http://packages/nvidia-cusolver-cu12/nvidia_cusolver_cu12-11.6.1.9-py3-none-manylinux2014_x86_64.whl (127.9 MB)
#10 51.32      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 127.9/127.9 MB 192.0 MB/s eta 0:00:00
#10 51.76 Collecting nvidia-cusparse-cu12==12.3.1.170 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 51.78   Downloading http://packages/nvidia-cusparse-cu12/nvidia_cusparse_cu12-12.3.1.170-py3-none-manylinux2014_x86_64.whl (207.5 MB)
#10 52.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 207.5/207.5 MB 184.1 MB/s eta 0:00:00
#10 53.65 Collecting nvidia-nccl-cu12==2.21.5 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 53.67   Downloading http://packages/nvidia-nccl-cu12/nvidia_nccl_cu12-2.21.5-py3-none-manylinux2014_x86_64.whl (188.7 MB)
#10 54.96      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 188.7/188.7 MB 148.1 MB/s eta 0:00:00
#10 55.58 Collecting nvidia-nvtx-cu12==12.4.127 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 55.60   Downloading http://packages/nvidia-nvtx-cu12/nvidia_nvtx_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (99 kB)
#10 55.66 Collecting nvidia-nvjitlink-cu12==12.4.127 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 55.68   Downloading http://packages/nvidia-nvjitlink-cu12/nvidia_nvjitlink_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (21.1 MB)
#10 55.81      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 21.1/21.1 MB 180.8 MB/s eta 0:00:00
#10 55.91 Collecting triton==3.1.0 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 55.92   Downloading http://packages/triton/triton-3.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (209.5 MB)
#10 57.08      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 209.5/209.5 MB 184.6 MB/s eta 0:00:00
#10 57.78 Collecting sympy==1.13.1 (from torch<3.0,>=2.3.1->mflux==0.4.1)
#10 57.81   Downloading http://packages/sympy/sympy-1.13.1-py3-none-any.whl (6.2 MB)
#10 57.97      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 46.5 MB/s eta 0:00:00
#10 58.05 Collecting mpmath<1.4,>=1.1.0 (from sympy==1.13.1->torch<3.0,>=2.3.1->mflux==0.4.1)
#10 58.07   Downloading http://packages/mpmath/mpmath-1.3.0-py3-none-any.whl (536 kB)
#10 58.09      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 536.2/536.2 kB 29.9 MB/s eta 0:00:00
#10 58.39 Requirement already satisfied: regex!=2019.12.17 in /usr/local/lib/python3.10/site-packages (from transformers<5.0,>=4.44.0->mflux==0.4.1) (2024.11.6)
#10 58.39 Requirement already satisfied: tokenizers<0.22,>=0.21 in /usr/local/lib/python3.10/site-packages (from transformers<5.0,>=4.44.0->mflux==0.4.1) (0.21.0)
#10 58.59 Collecting MarkupSafe>=2.0 (from jinja2->torch<3.0,>=2.3.1->mflux==0.4.1)
#10 58.61   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#10 58.63 Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/site-packages (from requests->huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (3.4.1)
#10 58.63 Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/site-packages (from requests->huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (3.10)
#10 58.63 Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/site-packages (from requests->huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (2.3.0)
#10 58.63 Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/site-packages (from requests->huggingface-hub<1.0,>=0.24.5->mflux==0.4.1) (2024.12.14)
#10 58.65 Building wheels for collected packages: mflux
#10 58.65   Building editable for mflux (pyproject.toml): started
#10 59.07   Building editable for mflux (pyproject.toml): finished with status 'done'
#10 59.07   Created wheel for mflux: filename=mflux-0.4.1-0.editable-py3-none-any.whl size=14478 sha256=3cd310941ea24eab8b40d01d3cb1ae72f6db21efd09804c80cccf34f45cf6a35
#10 59.07   Stored in directory: /tmp/pip-ephem-wheel-cache-_0hqbpus/wheels/83/05/69/977b54e69478800cfcea8a9437a7ea4a9b1a48db334f824611
#10 59.08 Successfully built mflux
#10 59.37 Installing collected packages: mpmath, triton, sympy, nvidia-nvtx-cu12, nvidia-nvjitlink-cu12, nvidia-nccl-cu12, nvidia-curand-cu12, nvidia-cufft-cu12, nvidia-cuda-runtime-cu12, nvidia-cuda-nvrtc-cu12, nvidia-cuda-cupti-cu12, nvidia-cublas-cu12, networkx, MarkupSafe, nvidia-cusparse-cu12, nvidia-cudnn-cu12, jinja2, nvidia-cusolver-cu12, torch, mflux
#10 139.1 Successfully installed MarkupSafe-3.0.2 jinja2-3.1.5 mflux-0.4.1 mpmath-1.3.0 networkx-3.4.2 nvidia-cublas-cu12-12.4.5.8 nvidia-cuda-cupti-cu12-12.4.127 nvidia-cuda-nvrtc-cu12-12.4.127 nvidia-cuda-runtime-cu12-12.4.127 nvidia-cudnn-cu12-9.1.0.70 nvidia-cufft-cu12-11.2.1.3 nvidia-curand-cu12-10.3.5.147 nvidia-cusolver-cu12-11.6.1.9 nvidia-cusparse-cu12-12.3.1.170 nvidia-nccl-cu12-2.21.5 nvidia-nvjitlink-cu12-12.4.127 nvidia-nvtx-cu12-12.4.127 sympy-1.13.1 torch-2.5.1 triton-3.1.0
#10 139.1 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#10 DONE 147.6s

#11 [7/8] RUN cd /repo && pytest --collect-only -q
#11 4.184 ============================= test session starts ==============================
#11 4.184 platform linux -- Python 3.10.16, pytest-8.3.4, pluggy-1.5.0
#11 4.184 rootdir: /repo
#11 4.184 configfile: pyproject.toml
#11 4.184 testpaths: tests
#11 4.184 plugins: timer-1.0.0, xdist-3.6.1
#11 4.184 collected 19 items
#11 4.184 run-last-failure: no previously failed tests, not deselecting items.
#11 4.184 
#11 4.184 <Dir repo>
#11 4.184   <Package tests>
#11 4.184     <Module test_cli_argparser.py>
#11 4.184       <Function test_model_path_requires_model_arg>
#11 4.184       <Function test_model_arg_not_in_file>
#11 4.184       <Function test_model_arg_in_file>
#11 4.184       <Function test_prompt_arg>
#11 4.184       <Function test_guidance_arg>
#11 4.184       <Function test_quantize_arg>
#11 4.184       <Function test_seed_arg>
#11 4.184       <Function test_steps_arg>
#11 4.184       <Function test_lora_args>
#11 4.184       <Function test_image_to_image_args>
#11 4.184       <Function test_controlnet_args>
#11 4.184       <Function test_save_args>
#11 4.184     <Module test_generate_image.py>
#11 4.184       <Class TestImageGenerator>
#11 4.184         <Function test_image_generation_schnell>
#11 4.184         <Function test_image_generation_dev>
#11 4.184         <Function test_image_generation_dev_lora>
#11 4.184         <Function test_image_generation_dev_image_to_image>
#11 4.184     <Module test_generate_image_controlnet.py>
#11 4.184       <Class TestImageGeneratorControlnet>
#11 4.184         <Function test_image_generation_schnell_controlnet>
#11 4.184         <Function test_image_generation_dev_controlnet>
#11 4.184         <Function test_image_generation_dev_lora_controlnet>
#11 4.184 
#11 4.184 ================================= pytest-timer =================================
#11 4.184 ========================= 19 tests collected in 3.34s ==========================
#11 DONE 5.1s

#12 exporting to image
#12 exporting layers
#12 exporting layers 46.4s done
#12 writing image sha256:b13cbb5cbd2261897dc317f3d7b724009385cf77d8216831eab10e3b07ed9632 done
#12 naming to docker.io/library/tmp:tmp done
#12 DONE 46.4s
