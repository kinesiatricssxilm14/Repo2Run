#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 1.38kB done
#1 DONE 2.9s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/NVIDIA/Megatron-Energon.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /Megatron-Energon/. /repo && rm -rf /Megatron-Energon/ &&     rm -rf /Megatron-Energon &&     cd /repo && git checkout 28aa3b79f4746968c76bc2e75c8a828c73e062c5 &&     pip install braceexpand==0.1.7 click==8.1.7 numpy==2.2.0 pillow==11.0.0 pyyaml==6.0.2 torch==2.5.1 tqdm==4.67.1 webdataset==0.2.100 s3fs==2024.10.0 black==24.10.0 isort==5.13.2 sphinxcontrib-napoleon==0.7 sphinx==8.1.3 myst-parser==4.0.0 sphinx-rtd-theme==3.0.2 sphinx-click==6.0.0 torchvision==0.20.1
#6 1.910 Looking in indexes: http://simple/
#6 2.064 Collecting pytest
#6 2.086   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 2.111      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 16.9 MB/s eta 0:00:00
#6 2.182 Collecting pytest-xdist
#6 2.201   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 2.212      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.6 MB/s eta 0:00:00
#6 2.285 Collecting tomli>=1
#6 2.302   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.348 Collecting exceptiongroup>=1.0.0rc8
#6 2.365   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.396 Collecting iniconfig
#6 2.413   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.479 Collecting packaging
#6 2.496   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.510      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.3 MB/s eta 0:00:00
#6 2.570 Collecting pluggy<2,>=1.5
#6 2.589   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.646 Collecting execnet>=2.1
#6 2.664   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.673      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 7.0 MB/s eta 0:00:00
#6 2.840 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.380 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.381 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.520 
#6 3.520 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.520 [notice] To update, run: pip install --upgrade pip
#6 4.227 Looking in indexes: http://simple/
#6 4.307 Collecting pipdeptree
#6 4.324   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.463 Collecting pip>=24.2
#6 4.477   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.497 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.619 Installing collected packages: pip, pipdeptree
#6 4.620   Attempting uninstall: pip
#6 4.621     Found existing installation: pip 23.0.1
#6 4.802     Uninstalling pip-23.0.1:
#6 4.997       Successfully uninstalled pip-23.0.1
#6 6.416 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 6.418 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.666 Cloning into 'Megatron-Energon'...
#6 8.895 Note: switching to '28aa3b79f4746968c76bc2e75c8a828c73e062c5'.
#6 8.895 
#6 8.895 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.895 changes and commit them, and you can discard any commits you make in this
#6 8.895 state without impacting any branches by switching back to a branch.
#6 8.895 
#6 8.895 If you want to create a new branch to retain commits you create, you may
#6 8.895 do so (now or later) by using -c with the switch command. Example:
#6 8.895 
#6 8.895   git switch -c <new-branch-name>
#6 8.895 
#6 8.895 Or undo this operation with:
#6 8.895 
#6 8.895   git switch -
#6 8.895 
#6 8.895 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.895 
#6 8.895 HEAD is now at 28aa3b7 Forgot some imports in the worker_config PR
#6 9.454 Looking in indexes: http://simple/
#6 9.487 Collecting braceexpand==0.1.7
#6 9.508   Downloading http://packages/braceexpand/braceexpand-0.1.7-py2.py3-none-any.whl (5.9 kB)
#6 9.559 Collecting click==8.1.7
#6 9.578   Downloading http://packages/click/click-8.1.7-py3-none-any.whl (97 kB)
#6 10.05 Collecting numpy==2.2.0
#6 10.07   Downloading http://packages/numpy/numpy-2.2.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.4 MB)
#6 10.21      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.4/16.4 MB 129.9 MB/s eta 0:00:00
#6 10.70 Collecting pillow==11.0.0
#6 10.72   Downloading http://packages/pillow/pillow-11.0.0-cp310-cp310-manylinux_2_28_x86_64.whl (4.4 MB)
#6 10.80      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.4/4.4 MB 66.1 MB/s eta 0:00:00
#6 10.91 Collecting pyyaml==6.0.2
#6 10.93   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#6 10.96      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 37.5 MB/s eta 0:00:00
#6 11.06 Collecting torch==2.5.1
#6 11.08   Downloading http://packages/torch/torch-2.5.1-cp310-cp310-manylinux1_x86_64.whl (906.4 MB)
#6 18.23      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 906.4/906.4 MB 47.4 MB/s eta 0:00:00
#6 21.46 Collecting tqdm==4.67.1
#6 21.48   Downloading http://packages/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)
#6 21.55 Collecting webdataset==0.2.100
#6 21.57   Downloading http://packages/webdataset/webdataset-0.2.100-py3-none-any.whl (74 kB)
#6 21.64 Collecting s3fs==2024.10.0
#6 21.73   Downloading http://packages/s3fs/s3fs-2024.10.0-py3-none-any.whl (29 kB)
#6 21.95 Collecting black==24.10.0
#6 21.97   Downloading http://packages/black/black-24.10.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl (1.8 MB)
#6 22.01      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 54.8 MB/s eta 0:00:00
#6 22.11 Collecting isort==5.13.2
#6 22.13   Downloading http://packages/isort/isort-5.13.2-py3-none-any.whl (92 kB)
#6 22.26 Collecting sphinxcontrib-napoleon==0.7
#6 22.35   Downloading http://packages/sphinxcontrib-napoleon/sphinxcontrib_napoleon-0.7-py2.py3-none-any.whl (17 kB)
#6 22.48 Collecting sphinx==8.1.3
#6 22.51   Downloading http://packages/sphinx/sphinx-8.1.3-py3-none-any.whl (3.5 MB)
#6 22.56      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.5/3.5 MB 106.4 MB/s eta 0:00:00
#6 22.64 Collecting myst-parser==4.0.0
#6 22.75   Downloading http://packages/myst-parser/myst_parser-4.0.0-py3-none-any.whl (84 kB)
#6 22.83 Collecting sphinx-rtd-theme==3.0.2
#6 22.85   Downloading http://packages/sphinx-rtd-theme/sphinx_rtd_theme-3.0.2-py2.py3-none-any.whl (7.7 MB)
#6 22.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.7/7.7 MB 142.7 MB/s eta 0:00:00
#6 23.00 Collecting sphinx-click==6.0.0
#6 23.09   Downloading http://packages/sphinx-click/sphinx_click-6.0.0-py3-none-any.whl (9.9 kB)
#6 23.20 Collecting torchvision==0.20.1
#6 23.21   Downloading http://packages/torchvision/torchvision-0.20.1-cp310-cp310-manylinux1_x86_64.whl (7.2 MB)
#6 23.28      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.2/7.2 MB 140.2 MB/s eta 0:00:00
#6 23.38 Collecting filelock (from torch==2.5.1)
#6 23.38   Using cached http://packages/filelock/filelock-3.16.1-py3-none-any.whl (16 kB)
#6 23.43 Collecting typing-extensions>=4.8.0 (from torch==2.5.1)
#6 23.44   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#6 23.51 Collecting networkx (from torch==2.5.1)
#6 23.54   Downloading http://packages/networkx/networkx-3.4.2-py3-none-any.whl (1.7 MB)
#6 23.57      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 74.1 MB/s eta 0:00:00
#6 23.63 Collecting jinja2 (from torch==2.5.1)
#6 23.65   Downloading http://packages/jinja2/jinja2-3.1.5-py3-none-any.whl (134 kB)
#6 23.72 Collecting fsspec (from torch==2.5.1)
#6 23.74   Downloading http://packages/fsspec/fsspec-2024.12.0-py3-none-any.whl (183 kB)
#6 23.84 Collecting nvidia-cuda-nvrtc-cu12==12.4.127 (from torch==2.5.1)
#6 23.85   Downloading http://packages/nvidia-cuda-nvrtc-cu12/nvidia_cuda_nvrtc_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (24.6 MB)
#6 23.98      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 24.6/24.6 MB 203.4 MB/s eta 0:00:00
#6 24.08 Collecting nvidia-cuda-runtime-cu12==12.4.127 (from torch==2.5.1)
#6 24.10   Downloading http://packages/nvidia-cuda-runtime-cu12/nvidia_cuda_runtime_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (883 kB)
#6 24.13      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 883.7/883.7 kB 40.1 MB/s eta 0:00:00
#6 24.17 Collecting nvidia-cuda-cupti-cu12==12.4.127 (from torch==2.5.1)
#6 24.19   Downloading http://packages/nvidia-cuda-cupti-cu12/nvidia_cuda_cupti_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (13.8 MB)
#6 24.29      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.8/13.8 MB 171.6 MB/s eta 0:00:00
#6 24.36 Collecting nvidia-cudnn-cu12==9.1.0.70 (from torch==2.5.1)
#6 24.38   Downloading http://packages/nvidia-cudnn-cu12/nvidia_cudnn_cu12-9.1.0.70-py3-none-manylinux2014_x86_64.whl (664.8 MB)
#6 29.30      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 664.8/664.8 MB 66.1 MB/s eta 0:00:00
#6 31.64 Collecting nvidia-cublas-cu12==12.4.5.8 (from torch==2.5.1)
#6 31.66   Downloading http://packages/nvidia-cublas-cu12/nvidia_cublas_cu12-12.4.5.8-py3-none-manylinux2014_x86_64.whl (363.4 MB)
#6 34.18      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 363.4/363.4 MB 119.7 MB/s eta 0:00:00
#6 35.42 Collecting nvidia-cufft-cu12==11.2.1.3 (from torch==2.5.1)
#6 35.44   Downloading http://packages/nvidia-cufft-cu12/nvidia_cufft_cu12-11.2.1.3-py3-none-manylinux2014_x86_64.whl (211.5 MB)
#6 36.46      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 211.5/211.5 MB 210.1 MB/s eta 0:00:00
#6 37.14 Collecting nvidia-curand-cu12==10.3.5.147 (from torch==2.5.1)
#6 37.16   Downloading http://packages/nvidia-curand-cu12/nvidia_curand_cu12-10.3.5.147-py3-none-manylinux2014_x86_64.whl (56.3 MB)
#6 37.45      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.3/56.3 MB 203.2 MB/s eta 0:00:00
#6 37.66 Collecting nvidia-cusolver-cu12==11.6.1.9 (from torch==2.5.1)
#6 37.68   Downloading http://packages/nvidia-cusolver-cu12/nvidia_cusolver_cu12-11.6.1.9-py3-none-manylinux2014_x86_64.whl (127.9 MB)
#6 38.35      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 127.9/127.9 MB 195.5 MB/s eta 0:00:00
#6 38.80 Collecting nvidia-cusparse-cu12==12.3.1.170 (from torch==2.5.1)
#6 38.82   Downloading http://packages/nvidia-cusparse-cu12/nvidia_cusparse_cu12-12.3.1.170-py3-none-manylinux2014_x86_64.whl (207.5 MB)
#6 39.77      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 207.5/207.5 MB 223.0 MB/s eta 0:00:00
#6 40.45 Collecting nvidia-nccl-cu12==2.21.5 (from torch==2.5.1)
#6 40.46   Downloading http://packages/nvidia-nccl-cu12/nvidia_nccl_cu12-2.21.5-py3-none-manylinux2014_x86_64.whl (188.7 MB)
#6 41.33      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 188.7/188.7 MB 221.7 MB/s eta 0:00:00
#6 41.96 Collecting nvidia-nvtx-cu12==12.4.127 (from torch==2.5.1)
#6 41.98   Downloading http://packages/nvidia-nvtx-cu12/nvidia_nvtx_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (99 kB)
#6 42.02 Collecting nvidia-nvjitlink-cu12==12.4.127 (from torch==2.5.1)
#6 42.04   Downloading http://packages/nvidia-nvjitlink-cu12/nvidia_nvjitlink_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (21.1 MB)
#6 42.17      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 21.1/21.1 MB 186.8 MB/s eta 0:00:00
#6 42.27 Collecting triton==3.1.0 (from torch==2.5.1)
#6 42.28   Downloading http://packages/triton/triton-3.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (209.5 MB)
#6 45.39      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 209.5/209.5 MB 67.8 MB/s eta 0:00:00
#6 46.08 Collecting sympy==1.13.1 (from torch==2.5.1)
#6 46.10   Downloading http://packages/sympy/sympy-1.13.1-py3-none-any.whl (6.2 MB)
#6 46.70      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 10.3 MB/s eta 0:00:00
#6 46.81 Collecting aiobotocore<3.0.0,>=2.5.4 (from s3fs==2024.10.0)
#6 46.83   Downloading http://packages/aiobotocore/aiobotocore-2.17.0-py3-none-any.whl (77 kB)
#6 47.24 Collecting fsspec (from torch==2.5.1)
#6 47.26   Downloading http://packages/fsspec/fsspec-2024.10.0-py3-none-any.whl (179 kB)
#6 48.75 Collecting aiohttp!=4.0.0a0,!=4.0.0a1 (from s3fs==2024.10.0)
#6 48.78   Downloading http://packages/aiohttp/aiohttp-3.11.11-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.6 MB)
#6 48.81      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.6/1.6 MB 60.4 MB/s eta 0:00:00
#6 48.86 Collecting mypy-extensions>=0.4.3 (from black==24.10.0)
#6 48.88   Downloading http://packages/mypy-extensions/mypy_extensions-1.0.0-py3-none-any.whl (4.7 kB)
#6 48.89 Requirement already satisfied: packaging>=22.0 in /usr/local/lib/python3.10/site-packages (from black==24.10.0) (24.2)
#6 48.92 Collecting pathspec>=0.9.0 (from black==24.10.0)
#6 48.94   Downloading http://packages/pathspec/pathspec-0.12.1-py3-none-any.whl (31 kB)
#6 49.00 Collecting platformdirs>=2 (from black==24.10.0)
#6 49.00   Using cached http://packages/platformdirs/platformdirs-4.3.6-py3-none-any.whl (18 kB)
#6 49.01 Requirement already satisfied: tomli>=1.1.0 in /usr/local/lib/python3.10/site-packages (from black==24.10.0) (2.2.1)
#6 49.05 Collecting six>=1.5.2 (from sphinxcontrib-napoleon==0.7)
#6 49.07   Downloading http://packages/six/six-1.17.0-py2.py3-none-any.whl (11 kB)
#6 49.18 Collecting pockets>=0.3 (from sphinxcontrib-napoleon==0.7)
#6 49.26   Downloading http://packages/pockets/pockets-0.9.1-py2.py3-none-any.whl (26 kB)
#6 49.30 Collecting sphinxcontrib-applehelp>=1.0.7 (from sphinx==8.1.3)
#6 49.32   Downloading http://packages/sphinxcontrib-applehelp/sphinxcontrib_applehelp-2.0.0-py3-none-any.whl (119 kB)
#6 49.36 Collecting sphinxcontrib-devhelp>=1.0.6 (from sphinx==8.1.3)
#6 49.38   Downloading http://packages/sphinxcontrib-devhelp/sphinxcontrib_devhelp-2.0.0-py3-none-any.whl (82 kB)
#6 49.42 Collecting sphinxcontrib-htmlhelp>=2.0.6 (from sphinx==8.1.3)
#6 49.44   Downloading http://packages/sphinxcontrib-htmlhelp/sphinxcontrib_htmlhelp-2.1.0-py3-none-any.whl (98 kB)
#6 49.48 Collecting sphinxcontrib-jsmath>=1.0.1 (from sphinx==8.1.3)
#6 49.50   Downloading http://packages/sphinxcontrib-jsmath/sphinxcontrib_jsmath-1.0.1-py2.py3-none-any.whl (5.1 kB)
#6 49.53 Collecting sphinxcontrib-qthelp>=1.0.6 (from sphinx==8.1.3)
#6 49.55   Downloading http://packages/sphinxcontrib-qthelp/sphinxcontrib_qthelp-2.0.0-py3-none-any.whl (88 kB)
#6 49.60 Collecting sphinxcontrib-serializinghtml>=1.1.9 (from sphinx==8.1.3)
#6 49.61   Downloading http://packages/sphinxcontrib-serializinghtml/sphinxcontrib_serializinghtml-2.0.0-py3-none-any.whl (92 kB)
#6 49.68 Collecting Pygments>=2.17 (from sphinx==8.1.3)
#6 49.70   Downloading http://packages/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)
#6 49.74      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 40.6 MB/s eta 0:00:00
#6 49.80 Collecting docutils<0.22,>=0.20 (from sphinx==8.1.3)
#6 49.82   Downloading http://packages/docutils/docutils-0.21.2-py3-none-any.whl (587 kB)
#6 49.84      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 587.4/587.4 kB 29.1 MB/s eta 0:00:00
#6 49.87 Collecting snowballstemmer>=2.2 (from sphinx==8.1.3)
#6 49.89   Downloading http://packages/snowballstemmer/snowballstemmer-2.2.0-py2.py3-none-any.whl (93 kB)
#6 49.94 Collecting babel>=2.13 (from sphinx==8.1.3)
#6 49.96   Downloading http://packages/babel/babel-2.16.0-py3-none-any.whl (9.6 MB)
#6 50.03      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.6/9.6 MB 161.9 MB/s eta 0:00:00
#6 50.10 Collecting alabaster>=0.7.14 (from sphinx==8.1.3)
#6 50.12   Downloading http://packages/alabaster/alabaster-1.0.0-py3-none-any.whl (13 kB)
#6 50.15 Collecting imagesize>=1.3 (from sphinx==8.1.3)
#6 50.17   Downloading http://packages/imagesize/imagesize-1.4.1-py2.py3-none-any.whl (8.8 kB)
#6 50.25 Collecting requests>=2.30.0 (from sphinx==8.1.3)
#6 50.25   Using cached http://packages/requests/requests-2.32.3-py3-none-any.whl (64 kB)
#6 50.30 Collecting markdown-it-py~=3.0 (from myst-parser==4.0.0)
#6 50.32   Downloading http://packages/markdown-it-py/markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
#6 50.37 Collecting mdit-py-plugins>=0.4.1,~=0.4 (from myst-parser==4.0.0)
#6 50.40   Downloading http://packages/mdit-py-plugins/mdit_py_plugins-0.4.2-py3-none-any.whl (55 kB)
#6 50.47 Collecting sphinxcontrib-jquery<5,>=4 (from sphinx-rtd-theme==3.0.2)
#6 50.49   Downloading http://packages/sphinxcontrib-jquery/sphinxcontrib_jquery-4.1-py2.py3-none-any.whl (121 kB)
#6 50.60 Collecting mpmath<1.4,>=1.1.0 (from sympy==1.13.1->torch==2.5.1)
#6 50.62   Downloading http://packages/mpmath/mpmath-1.3.0-py3-none-any.whl (536 kB)
#6 50.65      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 536.2/536.2 kB 23.7 MB/s eta 0:00:00
#6 50.74 Collecting aioitertools<1.0.0,>=0.5.1 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 50.76   Downloading http://packages/aioitertools/aioitertools-0.12.0-py3-none-any.whl (24 kB)
#6 51.80 Collecting botocore<1.35.94,>=1.35.74 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 51.83   Downloading http://packages/botocore/botocore-1.35.93-py3-none-any.whl (13.3 MB)
#6 51.92      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.3/13.3 MB 176.4 MB/s eta 0:00:00
#6 52.02 Collecting python-dateutil<3.0.0,>=2.1 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 52.04   Downloading http://packages/python-dateutil/python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
#6 52.09 Collecting jmespath<2.0.0,>=0.7.1 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 52.11   Downloading http://packages/jmespath/jmespath-1.0.1-py3-none-any.whl (20 kB)
#6 52.47 Collecting multidict<7.0.0,>=6.0.0 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 52.49   Downloading http://packages/multidict/multidict-6.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (124 kB)
#6 52.60 Collecting urllib3!=2.2.0,<3,>=1.25.4 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 52.60   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#6 52.81 Collecting wrapt<2.0.0,>=1.10.10 (from aiobotocore<3.0.0,>=2.5.4->s3fs==2024.10.0)
#6 52.82   Downloading http://packages/wrapt/wrapt-1.17.0-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (82 kB)
#6 52.88 Collecting aiohappyeyeballs>=2.3.0 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 52.90   Downloading http://packages/aiohappyeyeballs/aiohappyeyeballs-2.4.4-py3-none-any.whl (14 kB)
#6 52.92 Collecting aiosignal>=1.1.2 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 52.95   Downloading http://packages/aiosignal/aiosignal-1.3.2-py2.py3-none-any.whl (7.6 kB)
#6 52.98 Collecting async-timeout<6.0,>=4.0 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 53.00   Downloading http://packages/async-timeout/async_timeout-5.0.1-py3-none-any.whl (6.2 kB)
#6 53.04 Collecting attrs>=17.3.0 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 53.06   Downloading http://packages/attrs/attrs-24.3.0-py3-none-any.whl (63 kB)
#6 53.20 Collecting frozenlist>=1.1.1 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 53.23   Downloading http://packages/frozenlist/frozenlist-1.5.0-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (241 kB)
#6 53.32 Collecting propcache>=0.2.0 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 53.34   Downloading http://packages/propcache/propcache-0.2.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (205 kB)
#6 54.08 Collecting yarl<2.0,>=1.17.0 (from aiohttp!=4.0.0a0,!=4.0.0a1->s3fs==2024.10.0)
#6 54.10   Downloading http://packages/yarl/yarl-1.18.3-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (319 kB)
#6 54.27 Collecting MarkupSafe>=2.0 (from jinja2->torch==2.5.1)
#6 54.29   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#6 54.32 Collecting mdurl~=0.1 (from markdown-it-py~=3.0->myst-parser==4.0.0)
#6 54.34   Downloading http://packages/mdurl/mdurl-0.1.2-py3-none-any.whl (10.0 kB)
#6 54.55 Collecting charset-normalizer<4,>=2 (from requests>=2.30.0->sphinx==8.1.3)
#6 54.55   Using cached http://packages/charset-normalizer/charset_normalizer-3.4.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (146 kB)
#6 54.59 Collecting idna<4,>=2.5 (from requests>=2.30.0->sphinx==8.1.3)
#6 54.59   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 54.65 Collecting certifi>=2017.4.17 (from requests>=2.30.0->sphinx==8.1.3)
#6 54.66   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#6 55.36 Installing collected packages: snowballstemmer, mpmath, braceexpand, wrapt, urllib3, typing-extensions, tqdm, sympy, sphinxcontrib-serializinghtml, sphinxcontrib-qthelp, sphinxcontrib-jsmath, sphinxcontrib-htmlhelp, sphinxcontrib-devhelp, sphinxcontrib-applehelp, six, pyyaml, Pygments, propcache, platformdirs, pillow, pathspec, nvidia-nvtx-cu12, nvidia-nvjitlink-cu12, nvidia-nccl-cu12, nvidia-curand-cu12, nvidia-cufft-cu12, nvidia-cuda-runtime-cu12, nvidia-cuda-nvrtc-cu12, nvidia-cuda-cupti-cu12, nvidia-cublas-cu12, numpy, networkx, mypy-extensions, mdurl, MarkupSafe, jmespath, isort, imagesize, idna, fsspec, frozenlist, filelock, docutils, click, charset-normalizer, certifi, babel, attrs, async-timeout, alabaster, aioitertools, aiohappyeyeballs, webdataset, triton, requests, python-dateutil, pockets, nvidia-cusparse-cu12, nvidia-cudnn-cu12, multidict, markdown-it-py, jinja2, black, aiosignal, yarl, sphinxcontrib-napoleon, sphinx, nvidia-cusolver-cu12, mdit-py-plugins, botocore, torch, sphinxcontrib-jquery, sphinx-click, myst-parser, aiohttp, torchvision, sphinx-rtd-theme, aiobotocore, s3fs
#6 148.7 Successfully installed MarkupSafe-3.0.2 Pygments-2.19.1 aiobotocore-2.17.0 aiohappyeyeballs-2.4.4 aiohttp-3.11.11 aioitertools-0.12.0 aiosignal-1.3.2 alabaster-1.0.0 async-timeout-5.0.1 attrs-24.3.0 babel-2.16.0 black-24.10.0 botocore-1.35.93 braceexpand-0.1.7 certifi-2024.12.14 charset-normalizer-3.4.1 click-8.1.7 docutils-0.21.2 filelock-3.16.1 frozenlist-1.5.0 fsspec-2024.10.0 idna-3.10 imagesize-1.4.1 isort-5.13.2 jinja2-3.1.5 jmespath-1.0.1 markdown-it-py-3.0.0 mdit-py-plugins-0.4.2 mdurl-0.1.2 mpmath-1.3.0 multidict-6.1.0 mypy-extensions-1.0.0 myst-parser-4.0.0 networkx-3.4.2 numpy-2.2.0 nvidia-cublas-cu12-12.4.5.8 nvidia-cuda-cupti-cu12-12.4.127 nvidia-cuda-nvrtc-cu12-12.4.127 nvidia-cuda-runtime-cu12-12.4.127 nvidia-cudnn-cu12-9.1.0.70 nvidia-cufft-cu12-11.2.1.3 nvidia-curand-cu12-10.3.5.147 nvidia-cusolver-cu12-11.6.1.9 nvidia-cusparse-cu12-12.3.1.170 nvidia-nccl-cu12-2.21.5 nvidia-nvjitlink-cu12-12.4.127 nvidia-nvtx-cu12-12.4.127 pathspec-0.12.1 pillow-11.0.0 platformdirs-4.3.6 pockets-0.9.1 propcache-0.2.1 python-dateutil-2.9.0.post0 pyyaml-6.0.2 requests-2.32.3 s3fs-2024.10.0 six-1.17.0 snowballstemmer-2.2.0 sphinx-8.1.3 sphinx-click-6.0.0 sphinx-rtd-theme-3.0.2 sphinxcontrib-applehelp-2.0.0 sphinxcontrib-devhelp-2.0.0 sphinxcontrib-htmlhelp-2.1.0 sphinxcontrib-jquery-4.1 sphinxcontrib-jsmath-1.0.1 sphinxcontrib-napoleon-0.7 sphinxcontrib-qthelp-2.0.0 sphinxcontrib-serializinghtml-2.0.0 sympy-1.13.1 torch-2.5.1 torchvision-0.20.1 tqdm-4.67.1 triton-3.1.0 typing-extensions-4.12.2 urllib3-2.3.0 webdataset-0.2.100 wrapt-1.17.0 yarl-1.18.3
#6 148.7 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 153.2s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 6.536 tests/test_crudedataset.py::TestDataset::test_loader
#7 6.536 tests/test_crudedataset.py::TestDataset::test_metadataset
#7 6.536 tests/test_dataset.py::TestDataset::test_blending
#7 6.536 tests/test_dataset.py::TestDataset::test_captioning_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_current_batch_index
#7 6.536 tests/test_dataset.py::TestDataset::test_current_batch_index_generator
#7 6.536 tests/test_dataset.py::TestDataset::test_dataset_len
#7 6.536 tests/test_dataset.py::TestDataset::test_debug_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_default_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_exclusion
#7 6.536 tests/test_dataset.py::TestDataset::test_field_access
#7 6.536 tests/test_dataset.py::TestDataset::test_group_batch
#7 6.536 tests/test_dataset.py::TestDataset::test_info_captioning_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_loader
#7 6.536 tests/test_dataset.py::TestDataset::test_mixing_heterogeneous
#7 6.536 tests/test_dataset.py::TestDataset::test_mixing_homogeneous
#7 6.536 tests/test_dataset.py::TestDataset::test_multirank_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_packing
#7 6.536 tests/test_dataset.py::TestDataset::test_prepare_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_preview_captioning_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_sample_loader
#7 6.536 tests/test_dataset.py::TestDataset::test_sample_loader_key
#7 6.536 tests/test_dataset.py::TestDataset::test_val_limit
#7 6.536 tests/test_dataset.py::TestDataset::test_validate_captioning_dataset
#7 6.536 tests/test_dataset.py::TestDataset::test_weight_aug
#7 6.536 tests/test_dataset_det.py::TestDataset::test_determinism
#7 6.536 tests/test_dataset_det.py::TestDataset::test_determinism_taskencoder
#7 6.536 tests/test_dataset_det.py::TestDataset::test_epoch
#7 6.536 tests/test_dataset_det.py::TestDataset::test_invariance_global_samples
#7 6.536 tests/test_dataset_det.py::TestDataset::test_restore_state
#7 6.536 tests/test_dataset_det.py::TestDataset::test_restore_state_workers
#7 6.536 tests/test_dataset_det.py::TestDataset::test_text_dataset
#7 6.536 tests/test_epathlib.py::TestEPath::test_basic
#7 6.536 tests/test_epathlib.py::TestEPath::test_contextman
#7 6.536 tests/test_epathlib.py::TestEPath::test_glob
#7 6.536 tests/test_epathlib.py::TestEPath::test_s3_path_resolution
#7 6.536 tests/test_metadataset.py::TestDataset::test_blending_randomness
#7 6.536 tests/test_metadataset.py::TestDataset::test_metadataset
#7 6.536 tests/test_metadataset.py::TestDataset::test_nested_metadataset
#7 6.536 tests/test_metadataset.py::TestDataset::test_save_restore_state_train
#7 6.536 tests/test_metadataset.py::TestDataset::test_save_restore_state_train_epochize_workers
#7 6.536 tests/test_metadataset.py::TestDataset::test_save_restore_state_train_workers
#7 6.536 tests/test_metadataset.py::TestDataset::test_save_restore_state_val
#7 6.536 tests/test_metadataset.py::TestDataset::test_worker_sample_balance
#7 6.536 tests/test_metadataset_v2.py::test_joiner
#7 6.536 tests/test_metadataset_v2.py::TestDataset::test_joined_metadataset
#7 6.536 tests/test_metadataset_v2.py::TestDataset::test_joined_metadataset_joiner
#7 6.536 tests/test_metadataset_v2.py::TestDataset::test_metadataset
#7 6.536 tests/test_metadataset_v2.py::TestDataset::test_nested_metadataset
#7 6.536 tests/test_transforms.py::TestTransforms::test_center_crop
#7 6.536 tests/test_transforms.py::TestTransforms::test_custom
#7 6.536 tests/test_transforms.py::TestTransforms::test_merge
#7 6.536 tests/test_transforms.py::TestTransforms::test_random_crop
#7 6.536 tests/test_transforms.py::TestTransforms::test_random_flip
#7 6.536 tests/test_transforms.py::TestTransforms::test_random_perspective
#7 6.536 tests/test_transforms.py::TestTransforms::test_random_resized_crop
#7 6.536 tests/test_transforms.py::TestTransforms::test_random_rotation
#7 6.536 tests/test_transforms.py::TestTransforms::test_resize
#7 6.536 
#7 6.536 =============================== warnings summary ===============================
#7 6.536 tests/test_metadataset_v2.py:50
#7 6.536   /repo/tests/test_metadataset_v2.py:50: PytestCollectionWarning: cannot collect test class 'TestJoinedSample' because it has a __init__ constructor (from: tests/test_metadataset_v2.py)
#7 6.536     @dataclass
#7 6.536 
#7 6.536 -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
#7 6.536 58 tests collected in 5.82s
#7 DONE 8.0s

#8 exporting to image
#8 exporting layers
#8 exporting layers 48.6s done
#8 writing image sha256:80caa60741aa41fcbb8ece2c7cca793bf3d4d169966d6a83bba94975f28f5da7 done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 48.6s
