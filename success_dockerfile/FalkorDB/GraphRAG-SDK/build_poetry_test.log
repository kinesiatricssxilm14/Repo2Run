#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.30kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/7] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 106B done
#5 DONE 0.0s

#6 [2/7] COPY search_patch /search_patch
#6 CACHED

#7 [3/7] COPY code_edit.py /code_edit.py
#7 CACHED

#8 [4/7] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf && echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf && apt-get update && apt-get install -y curl && curl -sSL https://install.python-poetry.org | python -
#8 0.493 Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
#8 0.833 Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
#8 0.981 Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
#8 1.132 Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8789 kB]
#8 1.633 Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [8856 B]
#8 1.778 Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [240 kB]
#8 2.990 Fetched 9292 kB in 3s (3500 kB/s)
#8 2.990 Reading package lists...
#8 3.811 Reading package lists...
#8 4.647 Building dependency tree...
#8 4.897 Reading state information...
#8 5.291 curl is already the newest version (7.88.1-10+deb12u8).
#8 5.291 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
#8 25.65 Retrieving Poetry metadata
#8 25.65 
#8 25.65 # Welcome to Poetry!
#8 25.65 
#8 25.65 This will download and install the latest version of Poetry,
#8 25.65 a dependency and package manager for Python.
#8 25.65 
#8 25.65 It will add the `poetry` command to Poetry's bin directory, located at:
#8 25.65 
#8 25.65 /root/.local/bin
#8 25.65 
#8 25.65 You can uninstall at any time by executing this script with the --uninstall option,
#8 25.65 and these changes will be reverted.
#8 25.65 
#8 25.65 Installing Poetry (2.0.0)
#8 25.65 Installing Poetry (2.0.0): Creating environment
#8 25.65 Installing Poetry (2.0.0): Installing Poetry
#8 25.65 Installing Poetry (2.0.0): Creating script
#8 25.65 Installing Poetry (2.0.0): Done
#8 25.65 
#8 25.65 Poetry (2.0.0) is installed now. Great!
#8 25.65 
#8 25.65 To get started you need Poetry's bin directory (/root/.local/bin) in your `PATH`
#8 25.65 environment variable.
#8 25.65 
#8 25.65 Add `export PATH="/root/.local/bin:$PATH"` to your shell configuration file.
#8 25.65 
#8 25.65 Alternatively, you can call Poetry explicitly with `/root/.local/bin/poetry`.
#8 25.65 
#8 25.65 You can test that everything is set up by executing:
#8 25.65 
#8 25.65 `poetry --version`
#8 25.65 
#8 DONE 25.9s

#9 [5/7] RUN pip install pytest pytest-xdist && pip install pipdeptree && git clone https://github.com/FalkorDB/GraphRAG-SDK.git && mkdir /repo && git config --global --add safe.directory /repo && cp -r /GraphRAG-SDK/. /repo && rm -rf /GraphRAG-SDK/ && rm -rf /GraphRAG-SDK && cd /repo && git checkout 250ebec4c7d052248d27ca8c31f369c59a40ff78 && cd /repo && poetry install && python /code_edit.py -t "/search_patch/0.patch" && cd /repo && poetry lock && cd /repo && poetry install && cd /repo && poetry install -E google-generativeai -E vertexai -E ollama -E openai
#9 1.853 Looking in indexes: http://simple/
#9 2.007 Collecting pytest
#9 2.033   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#9 2.057      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 17.6 MB/s eta 0:00:00
#9 2.135 Collecting pytest-xdist
#9 2.155   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#9 2.167      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.8 MB/s eta 0:00:00
#9 2.218 Collecting iniconfig
#9 2.237   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#9 2.302 Collecting packaging
#9 2.319   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#9 2.332      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#9 2.384 Collecting tomli>=1
#9 2.415   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#9 2.463 Collecting exceptiongroup>=1.0.0rc8
#9 2.485   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#9 2.535 Collecting pluggy<2,>=1.5
#9 2.552   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#9 2.606 Collecting execnet>=2.1
#9 2.628   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#9 2.639      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 3.9 MB/s eta 0:00:00
#9 2.772 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#9 3.460 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#9 3.461 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 3.587 
#9 3.587 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#9 3.587 [notice] To update, run: pip install --upgrade pip
#9 4.267 Looking in indexes: http://simple/
#9 4.370 Collecting pipdeptree
#9 4.394   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#9 4.529 Collecting pip>=24.2
#9 4.539   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#9 4.557 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#9 4.661 Installing collected packages: pip, pipdeptree
#9 4.661   Attempting uninstall: pip
#9 4.662     Found existing installation: pip 23.0.1
#9 4.817     Uninstalling pip-23.0.1:
#9 4.966       Successfully uninstalled pip-23.0.1
#9 6.200 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#9 6.200 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 6.421 Cloning into 'GraphRAG-SDK'...
#9 9.298 Note: switching to '250ebec4c7d052248d27ca8c31f369c59a40ff78'.
#9 9.298 
#9 9.298 You are in 'detached HEAD' state. You can look around, make experimental
#9 9.298 changes and commit them, and you can discard any commits you make in this
#9 9.298 state without impacting any branches by switching back to a branch.
#9 9.298 
#9 9.298 If you want to create a new branch to retain commits you create, you may
#9 9.298 do so (now or later) by using -c with the switch command. Example:
#9 9.298 
#9 9.298   git switch -c <new-branch-name>
#9 9.298 
#9 9.298 Or undo this operation with:
#9 9.298 
#9 9.298   git switch -
#9 9.298 
#9 9.298 Turn off this advice by setting config variable advice.detachedHead to false
#9 9.298 
#9 9.298 HEAD is now at 250ebec Merge pull request #44 from FalkorDB/gkorland-desc
#9 10.22 Creating virtualenv graphrag-sdk-gW_DSdP6-py3.10 in /root/.cache/pypoetry/virtualenvs
#9 11.25 Installing dependencies from lock file
#9 12.28 
#9 12.28 Package operations: 128 installs, 0 updates, 0 removals
#9 12.28 
#9 12.28   - Installing attrs (24.2.0)
#9 12.28   - Installing rpds-py (0.21.0)
#9 13.69   - Installing referencing (0.35.1)
#9 13.69   - Installing six (1.16.0)
#9 13.95   - Installing jsonschema-specifications (2024.10.1)
#9 13.95   - Installing platformdirs (4.3.6)
#9 13.96   - Installing python-dateutil (2.9.0.post0)
#9 13.96   - Installing traitlets (5.14.3)
#9 13.96   - Installing types-python-dateutil (2.9.0.20241003)
#9 15.44   - Installing arrow (1.3.0)
#9 15.44   - Installing fastjsonschema (2.20.0)
#9 15.44   - Installing jsonschema (4.23.0)
#9 15.44   - Installing pycparser (2.22)
#9 15.45   - Installing pyzmq (26.2.0)
#9 15.45   - Installing jupyter-core (5.7.2)
#9 15.45   - Installing tornado (6.4.1)
#9 16.91   - Installing cffi (1.17.1)
#9 16.91   - Installing fqdn (1.5.1)
#9 16.91   - Installing idna (3.10)
#9 16.92   - Installing isoduration (20.11.0)
#9 16.92   - Installing jsonpointer (3.0.0)
#9 16.93   - Installing markupsafe (3.0.2)
#9 16.93   - Installing jupyter-client (8.6.3)
#9 16.93   - Installing rfc3339-validator (0.1.4)
#9 16.93   - Installing rfc3986-validator (0.1.1)
#9 16.94   - Installing ptyprocess (0.7.0)
#9 16.94   - Installing nbformat (5.10.4)
#9 16.94   - Installing webcolors (24.11.1)
#9 16.94   - Installing webencodings (0.5.1)
#9 16.95   - Installing soupsieve (2.6)
#9 16.95   - Installing uri-template (1.3.0)
#9 18.46   - Installing argon2-cffi-bindings (21.2.0)
#9 18.46   - Installing asttokens (2.4.1)
#9 18.47   - Installing beautifulsoup4 (4.12.3)
#9 18.47   - Installing bleach (6.2.0)
#9 18.47   - Installing certifi (2024.8.30)
#9 18.48   - Installing defusedxml (0.7.1)
#9 18.48   - Installing exceptiongroup (1.2.2)
#9 18.49   - Installing jinja2 (3.1.4)
#9 18.49   - Installing mistune (3.0.2)
#9 18.49   - Installing nbclient (0.10.0)
#9 18.50   - Installing executing (2.1.0)
#9 18.50   - Installing jupyterlab-pygments (0.3.0)
#9 18.51   - Installing charset-normalizer (3.4.0)
#9 18.51   - Installing packaging (24.2)
#9 18.52   - Installing python-json-logger (2.0.7)
#9 18.52   - Installing pyyaml (6.0.2)
#9 18.52   - Installing terminado (0.18.1)
#9 18.52   - Installing tinycss2 (1.4.0)
#9 18.52   - Installing urllib3 (2.2.3)
#9 18.53   - Installing wcwidth (0.2.13)
#9 18.53   - Installing pandocfilters (1.5.1)
#9 18.53   - Installing parso (0.8.4)
#9 18.53   - Installing pure-eval (0.2.3)
#9 18.54   - Installing sniffio (1.3.1)
#9 18.54   - Installing pygments (2.18.0)
#9 18.54   - Installing typing-extensions (4.12.2)
#9 20.08   - Installing anyio (4.6.2.post1)
#9 20.08   - Installing argon2-cffi (23.1.0)
#9 20.09   - Installing decorator (5.1.1)
#9 20.09   - Installing h11 (0.14.0)
#9 20.09   - Installing jedi (0.19.2)
#9 20.09   - Installing jupyter-server-terminals (0.5.3)
#9 20.10   - Installing jupyter-events (0.10.0)
#9 20.10   - Installing matplotlib-inline (0.1.7)
#9 20.10   - Installing nbconvert (7.16.4)
#9 20.10   - Installing overrides (7.7.0)
#9 20.11   - Installing pexpect (4.9.0)
#9 20.11   - Installing prometheus-client (0.21.0)
#9 20.12   - Installing prompt-toolkit (3.0.48)
#9 20.12   - Installing requests (2.32.3)
#9 20.12   - Installing send2trash (1.8.3)
#9 20.13   - Installing stack-data (0.6.3)
#9 20.13   - Installing websocket-client (1.8.0)
#9 21.67   - Installing babel (2.16.0)
#9 21.67   - Installing comm (0.2.2)
#9 21.67   - Installing debugpy (1.8.8)
#9 21.68   - Installing httpcore (1.0.7)
#9 21.68   - Installing ipython (8.18.1)
#9 21.68   - Installing jupyter-server (2.14.2)
#9 21.69   - Installing nest-asyncio (1.6.0)
#9 21.69   - Installing psutil (6.1.0)
#9 21.69   - Installing json5 (0.9.28)
#9 23.35   - Installing alabaster (0.7.16)
#9 23.35   - Installing async-lru (2.0.4)
#9 23.35   - Installing docutils (0.20.1)
#9 23.35   - Installing httpx (0.27.2)
#9 23.36   - Installing imagesize (1.4.1)
#9 23.36   - Installing ipykernel (6.29.5)
#9 23.36   - Installing jupyter-lsp (2.2.5)
#9 23.36   - Installing notebook-shim (0.2.4)
#9 23.37   - Installing numpy (2.0.2)
#9 23.37   - Installing setuptools (75.5.0)
#9 23.37   - Installing jupyterlab-server (2.27.3)
#9 23.37   - Installing snowballstemmer (2.2.0)
#9 23.37   - Installing sphinxcontrib-applehelp (2.0.0)
#9 23.38   - Installing sphinxcontrib-htmlhelp (2.1.0)
#9 23.38   - Installing sphinxcontrib-jsmath (1.0.1)
#9 23.39   - Installing sphinxcontrib-qthelp (2.0.0)
#9 23.39   - Installing sphinxcontrib-devhelp (2.0.0)
#9 23.39   - Installing sphinxcontrib-serializinghtml (2.0.0)
#9 23.39   - Installing tomli (2.1.0)
#9 27.55   - Installing async-timeout (5.0.1)
#9 27.56   - Installing jupyterlab (4.3.1)
#9 27.56   - Installing jupyterlab-widgets (3.0.13)
#9 27.56   - Installing sphinx (7.4.7)
#9 27.57   - Installing widgetsnbextension (4.0.13)
#9 29.95   - Installing iniconfig (2.0.0)
#9 29.96   - Installing ipywidgets (8.1.5)
#9 29.96   - Installing jupyter-console (6.6.3)
#9 29.96   - Installing notebook (7.0.7)
#9 29.96   - Installing pluggy (1.5.0)
#9 29.97   - Installing pytz (2024.2)
#9 29.97   - Installing redis (5.2.0)
#9 29.97   - Installing sphinxcontrib-jquery (4.1)
#9 29.97   - Installing tzdata (2024.2)
#9 32.50   - Installing backoff (2.2.1)
#9 32.50   - Installing bs4 (0.0.2)
#9 32.50   - Installing falkordb (1.0.9)
#9 32.50   - Installing fix-busted-json (0.0.18)
#9 32.51   - Installing jupyter (1.1.1)
#9 32.51   - Installing pandas (2.2.3)
#9 32.51   - Installing pytest (8.3.3)
#9 32.51   - Installing pypdf (4.3.1)
#9 32.52   - Installing python-abc (0.2.0)
#9 32.52   - Installing python-dotenv (1.0.1)
#9 32.52   - Installing ratelimit (2.2.1)
#9 32.53   - Installing sphinx-rtd-theme (2.0.0)
#9 37.22 
#9 37.22 Installing the current project: graphrag_sdk (0.3.3)
#9 37.78 * Succeed Patch:
#9 37.78 --- arepopyproject.toml
#9 37.78 +++ brepopyproject.toml
#9 37.78 @@ -36,6 +36,7 @@
#9 37.78  
#9 37.78  [tool.poetry.group.test.dependencies]
#9 37.78  pytest = "^8.2.1"
#9 37.78 +pytest-xdist = "^3.2.1"
#9 37.78  
#9 37.78  [tool.poetry.group.dev.dependencies]
#9 37.78  sphinx = "^7.3.7"
#9 37.78 
#9 37.78 
#9 39.70 Resolving dependencies...
#9 95.05 
#9 95.05 Writing lock file
#9 97.13 Installing dependencies from lock file
#9 98.18 
#9 98.18 Package operations: 2 installs, 0 updates, 0 removals
#9 98.18 
#9 98.18   - Installing execnet (2.1.1)
#9 98.95   - Installing pytest-xdist (3.6.1)
#9 99.17 
#9 99.17 Installing the current project: graphrag_sdk (0.3.3)
#9 100.8 Installing dependencies from lock file
#9 101.8 
#9 101.8 Package operations: 37 installs, 0 updates, 0 removals
#9 101.8 
#9 101.8   - Installing pyasn1 (0.6.1)
#9 102.6   - Installing cachetools (5.5.0)
#9 102.6   - Installing protobuf (5.28.3)
#9 102.6   - Installing rsa (4.9)
#9 102.6   - Installing pyasn1-modules (0.4.1)
#9 103.8   - Installing google-auth (2.36.0)
#9 103.8   - Installing googleapis-common-protos (1.66.0)
#9 103.8   - Installing grpcio (1.68.0)
#9 103.8   - Installing proto-plus (1.25.0)
#9 105.0   - Installing google-api-core (2.23.0)
#9 105.0   - Installing google-crc32c (1.6.0)
#9 105.0   - Installing grpcio-status (1.68.0)
#9 105.0   - Installing pyparsing (3.2.0)
#9 105.4   - Installing annotated-types (0.7.0)
#9 105.4   - Installing google-cloud-core (2.4.1)
#9 105.4   - Installing grpc-google-iam-v1 (0.13.1)
#9 105.4   - Installing httplib2 (0.22.0)
#9 105.4   - Installing pydantic-core (2.23.4)
#9 105.4   - Installing google-resumable-media (2.7.2)
#9 107.6   - Installing docstring-parser (0.16)
#9 107.6   - Installing google-auth-httplib2 (0.2.0)
#9 107.6   - Installing google-cloud-bigquery (3.27.0)
#9 107.6   - Installing google-cloud-storage (2.18.2)
#9 107.6   - Installing google-cloud-resource-manager (1.13.1)
#9 107.6   - Installing uritemplate (4.1.1)
#9 107.6   - Installing shapely (2.0.6)
#9 107.6   - Installing pydantic (2.9.2)
#9 109.4   - Installing distro (1.9.0)
#9 109.4   - Installing google-ai-generativelanguage (0.6.10)
#9 109.4   - Installing google-api-python-client (2.153.0)
#9 109.4   - Installing google-cloud-aiplatform (1.71.1)
#9 109.4   - Installing jiter (0.7.1)
#9 109.4   - Installing tqdm (4.67.0)
#9 116.9   - Installing google-generativeai (0.8.3)
#9 116.9   - Installing ollama (0.2.1)
#9 116.9   - Installing openai (1.54.4)
#9 116.9   - Installing vertexai (1.71.1)
#9 117.4 
#9 117.4 Installing the current project: graphrag_sdk (0.3.3)
#9 DONE 118.2s

#10 [6/7] RUN cd /repo && poetry run pytest --collect-only -q
#10 15.41 tests/test_auto_create_ontology.py::TestAutoDetectOntology::test_auto_detect_ontology
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher1::test_validate_cypher
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher1::test_validate_cypher_entities_exist
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher1::test_validate_cypher_relation_directions
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher1::test_validate_cypher_relations_exist
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher2::test_validate_cypher
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher2::test_validate_cypher_entities_exist
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher2::test_validate_cypher_relation_directions
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher2::test_validate_cypher_relations_exist
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher3::test_validate_cypher
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher3::test_validate_cypher_edge_directions
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher3::test_validate_cypher_edges_exist
#10 15.41 tests/test_helper_validate_cypher.py::TestValidateCypher3::test_validate_cypher_nodes_exist
#10 15.41 tests/test_kg.py::TestKG::test_add_node_invalid
#10 15.41 tests/test_kg.py::TestKG::test_add_node_valid
#10 15.41 tests/test_kg.py::TestKG::test_add_relation_invalid
#10 15.41 tests/test_kg.py::TestKG::test_add_relation_valid
#10 15.41 tests/test_kg_gemini.py::TestKGGemini::test_kg_creation
#10 15.41 tests/test_kg_gemini.py::TestKGGemini::test_kg_delete
#10 15.41 tests/test_kg_ollama.py::TestKGOllama::test_kg_creation
#10 15.41 tests/test_kg_ollama.py::TestKGOllama::test_kg_delete
#10 15.41 tests/test_kg_openai.py::TestKGOpenAI::test_kg_creation
#10 15.41 tests/test_kg_openai.py::TestKGOpenAI::test_kg_delete
#10 15.41 tests/test_multi_agent.py::TestMultiAgent::test_multi_agent
#10 15.41 
#10 15.41 24 tests collected in 13.13s
#10 DONE 16.9s

#11 exporting to image
#11 exporting layers
#11 exporting layers 7.1s done
#11 writing image sha256:3f634a629e88db7391ac5e909cc186d437995746a09122766c8899d5f8bb804d done
#11 naming to docker.io/library/tmp:tmp done
#11 DONE 7.1s
