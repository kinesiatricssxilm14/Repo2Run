#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.35kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/dottxt-ai/prompts.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /prompts/. /repo && rm -rf /prompts/ &&     rm -rf /prompts &&     cd /repo && git checkout 3d2689ad7c388af3ab603aa374a51ca66d9eb915 &&     pip install jinja2==3.1.4 setuptools==65.5.1 setuptools_scm[toml]==8.1.0 &&     pip install pre-commit==4.0.1 pytest==8.3.4 pytest-benchmark==5.1.0 mkdocs==1.6.1 mkdocs-material==9.5.49 mkdocs-section-index==0.3.9 mkdocs-git-committers-plugin-2==2.4.1 mkdocs-git-revision-date-localized-plugin==1.3.0
#6 1.627 Looking in indexes: http://simple/
#6 1.787 Collecting pytest
#6 1.804   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.836      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 12.8 MB/s eta 0:00:00
#6 1.906 Collecting pytest-xdist
#6 1.923   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 1.936      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.3 MB/s eta 0:00:00
#6 2.007 Collecting tomli>=1
#6 2.025   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.089 Collecting packaging
#6 2.107   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.119      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.9 MB/s eta 0:00:00
#6 2.158 Collecting exceptiongroup>=1.0.0rc8
#6 2.176   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.224 Collecting pluggy<2,>=1.5
#6 2.242   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.273 Collecting iniconfig
#6 2.291   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.365 Collecting execnet>=2.1
#6 2.383   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.391      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 7.0 MB/s eta 0:00:00
#6 2.514 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.044 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.045 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.161 
#6 3.161 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.161 [notice] To update, run: pip install --upgrade pip
#6 3.841 Looking in indexes: http://simple/
#6 3.921 Collecting pipdeptree
#6 3.942   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.105 Collecting pip>=24.2
#6 4.118   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.141 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.269 Installing collected packages: pip, pipdeptree
#6 4.270   Attempting uninstall: pip
#6 4.271     Found existing installation: pip 23.0.1
#6 4.481     Uninstalling pip-23.0.1:
#6 4.668       Successfully uninstalled pip-23.0.1
#6 6.034 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 6.035 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.224 Cloning into 'prompts'...
#6 8.143 Note: switching to '3d2689ad7c388af3ab603aa374a51ca66d9eb915'.
#6 8.143 
#6 8.143 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.143 changes and commit them, and you can discard any commits you make in this
#6 8.143 state without impacting any branches by switching back to a branch.
#6 8.143 
#6 8.143 If you want to create a new branch to retain commits you create, you may
#6 8.143 do so (now or later) by using -c with the switch command. Example:
#6 8.143 
#6 8.143   git switch -c <new-branch-name>
#6 8.143 
#6 8.143 Or undo this operation with:
#6 8.143 
#6 8.143   git switch -
#6 8.143 
#6 8.143 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.143 
#6 8.143 HEAD is now at 3d2689a Update the docstrings
#6 8.672 Looking in indexes: http://simple/
#6 8.717 Collecting jinja2==3.1.4
#6 8.735   Downloading http://packages/jinja2/jinja2-3.1.4-py3-none-any.whl (133 kB)
#6 8.758 Requirement already satisfied: setuptools==65.5.1 in /usr/local/lib/python3.10/site-packages (65.5.1)
#6 8.849 Collecting setuptools_scm==8.1.0 (from setuptools_scm[toml]==8.1.0)
#6 8.868   Downloading http://packages/setuptools-scm/setuptools_scm-8.1.0-py3-none-any.whl (43 kB)
#6 9.044 Collecting MarkupSafe>=2.0 (from jinja2==3.1.4)
#6 9.060   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#6 9.088 Requirement already satisfied: packaging>=20 in /usr/local/lib/python3.10/site-packages (from setuptools_scm==8.1.0->setuptools_scm[toml]==8.1.0) (24.2)
#6 9.090 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from setuptools_scm==8.1.0->setuptools_scm[toml]==8.1.0) (2.2.1)
#6 9.125 Installing collected packages: setuptools_scm, MarkupSafe, jinja2
#6 9.306 Successfully installed MarkupSafe-3.0.2 jinja2-3.1.4 setuptools_scm-8.1.0
#6 9.307 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 10.01 Looking in indexes: http://simple/
#6 10.13 Collecting pre-commit==4.0.1
#6 10.16   Downloading http://packages/pre-commit/pre_commit-4.0.1-py2.py3-none-any.whl (218 kB)
#6 10.19 Requirement already satisfied: pytest==8.3.4 in /usr/local/lib/python3.10/site-packages (8.3.4)
#6 10.27 Collecting pytest-benchmark==5.1.0
#6 10.29   Downloading http://packages/pytest-benchmark/pytest_benchmark-5.1.0-py3-none-any.whl (44 kB)
#6 10.38 Collecting mkdocs==1.6.1
#6 10.56   Downloading http://packages/mkdocs/mkdocs-1.6.1-py3-none-any.whl (3.9 MB)
#6 10.62      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.9/3.9 MB 98.9 MB/s eta 0:00:00
#6 10.82 Collecting mkdocs-material==9.5.49
#6 11.04   Downloading http://packages/mkdocs-material/mkdocs_material-9.5.49-py3-none-any.whl (8.7 MB)
#6 11.15      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.7/8.7 MB 87.4 MB/s eta 0:00:00
#6 11.36 Collecting mkdocs-section-index==0.3.9
#6 11.45   Downloading http://packages/mkdocs-section-index/mkdocs_section_index-0.3.9-py3-none-any.whl (8.7 kB)
#6 11.51 Collecting mkdocs-git-committers-plugin-2==2.4.1
#6 11.60   Downloading http://packages/mkdocs-git-committers-plugin-2/mkdocs_git_committers_plugin_2-2.4.1-py3-none-any.whl (11 kB)
#6 11.67 Collecting mkdocs-git-revision-date-localized-plugin==1.3.0
#6 11.78   Downloading http://packages/mkdocs-git-revision-date-localized-plugin/mkdocs_git_revision_date_localized_plugin-1.3.0-py3-none-any.whl (22 kB)
#6 11.82 Collecting cfgv>=2.0.0 (from pre-commit==4.0.1)
#6 11.84   Downloading http://packages/cfgv/cfgv-3.4.0-py2.py3-none-any.whl (7.2 kB)
#6 11.97 Collecting identify>=1.0.0 (from pre-commit==4.0.1)
#6 11.99   Downloading http://packages/identify/identify-2.6.5-py2.py3-none-any.whl (99 kB)
#6 12.04 Collecting nodeenv>=0.11.1 (from pre-commit==4.0.1)
#6 12.06   Downloading http://packages/nodeenv/nodeenv-1.9.1-py2.py3-none-any.whl (22 kB)
#6 12.19 Collecting pyyaml>=5.1 (from pre-commit==4.0.1)
#6 12.20   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#6 12.23      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 39.5 MB/s eta 0:00:00
#6 12.40 Collecting virtualenv>=20.10.0 (from pre-commit==4.0.1)
#6 12.40   Using cached http://packages/virtualenv/virtualenv-20.28.1-py3-none-any.whl (4.3 MB)
#6 12.45 Requirement already satisfied: exceptiongroup>=1.0.0rc8 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.2.2)
#6 12.45 Requirement already satisfied: iniconfig in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.0.0)
#6 12.45 Requirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (24.2)
#6 12.45 Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.5.0)
#6 12.45 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.2.1)
#6 12.47 Collecting py-cpuinfo (from pytest-benchmark==5.1.0)
#6 12.50   Downloading http://packages/py-cpuinfo/py_cpuinfo-9.0.0-py3-none-any.whl (22 kB)
#6 12.55 Collecting click>=7.0 (from mkdocs==1.6.1)
#6 12.57   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#6 12.61 Collecting ghp-import>=1.0 (from mkdocs==1.6.1)
#6 12.63   Downloading http://packages/ghp-import/ghp_import-2.1.0-py3-none-any.whl (11 kB)
#6 12.64 Requirement already satisfied: jinja2>=2.11.1 in /usr/local/lib/python3.10/site-packages (from mkdocs==1.6.1) (3.1.4)
#6 12.68 Collecting markdown>=3.3.6 (from mkdocs==1.6.1)
#6 12.70   Downloading http://packages/markdown/Markdown-3.7-py3-none-any.whl (106 kB)
#6 12.72 Requirement already satisfied: markupsafe>=2.0.1 in /usr/local/lib/python3.10/site-packages (from mkdocs==1.6.1) (3.0.2)
#6 12.74 Collecting mergedeep>=1.3.4 (from mkdocs==1.6.1)
#6 12.76   Downloading http://packages/mergedeep/mergedeep-1.3.4-py3-none-any.whl (6.4 kB)
#6 12.79 Collecting mkdocs-get-deps>=0.2.0 (from mkdocs==1.6.1)
#6 12.87   Downloading http://packages/mkdocs-get-deps/mkdocs_get_deps-0.2.0-py3-none-any.whl (9.5 kB)
#6 12.91 Collecting pathspec>=0.11.1 (from mkdocs==1.6.1)
#6 12.93   Downloading http://packages/pathspec/pathspec-0.12.1-py3-none-any.whl (31 kB)
#6 12.95 Collecting pyyaml-env-tag>=0.1 (from mkdocs==1.6.1)
#6 12.97   Downloading http://packages/pyyaml-env-tag/pyyaml_env_tag-0.1-py3-none-any.whl (3.9 kB)
#6 13.10 Collecting watchdog>=2.0 (from mkdocs==1.6.1)
#6 13.12   Downloading http://packages/watchdog/watchdog-6.0.0-py3-none-manylinux2014_x86_64.whl (79 kB)
#6 13.17 Collecting babel~=2.10 (from mkdocs-material==9.5.49)
#6 13.19   Downloading http://packages/babel/babel-2.16.0-py3-none-any.whl (9.6 MB)
#6 13.26      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.6/9.6 MB 158.3 MB/s eta 0:00:00
#6 13.34 Collecting colorama~=0.4 (from mkdocs-material==9.5.49)
#6 13.36   Downloading http://packages/colorama/colorama-0.4.6-py2.py3-none-any.whl (25 kB)
#6 13.40 Collecting mkdocs-material-extensions~=1.3 (from mkdocs-material==9.5.49)
#6 13.43   Downloading http://packages/mkdocs-material-extensions/mkdocs_material_extensions-1.3.1-py3-none-any.whl (8.7 kB)
#6 13.46 Collecting paginate~=0.5 (from mkdocs-material==9.5.49)
#6 13.48   Downloading http://packages/paginate/paginate-0.5.7-py2.py3-none-any.whl (13 kB)
#6 13.54 Collecting pygments~=2.16 (from mkdocs-material==9.5.49)
#6 13.56   Downloading http://packages/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)
#6 13.60      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 54.8 MB/s eta 0:00:00
#6 13.70 Collecting pymdown-extensions~=10.2 (from mkdocs-material==9.5.49)
#6 13.83   Downloading http://packages/pymdown-extensions/pymdown_extensions-10.14-py3-none-any.whl (264 kB)
#6 14.59 Collecting regex>=2022.4 (from mkdocs-material==9.5.49)
#6 14.61   Downloading http://packages/regex/regex-2024.11.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (781 kB)
#6 14.63      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 781.7/781.7 kB 44.7 MB/s eta 0:00:00
#6 14.71 Collecting requests~=2.26 (from mkdocs-material==9.5.49)
#6 14.71   Using cached http://packages/requests/requests-2.32.3-py3-none-any.whl (64 kB)
#6 14.79 Collecting gitpython (from mkdocs-git-committers-plugin-2==2.4.1)
#6 14.81   Downloading http://packages/gitpython/GitPython-3.1.44-py3-none-any.whl (207 kB)
#6 14.95 Collecting pytz (from mkdocs-git-revision-date-localized-plugin==1.3.0)
#6 14.97   Downloading http://packages/pytz/pytz-2024.2-py2.py3-none-any.whl (508 kB)
#6 15.06 Collecting python-dateutil>=2.8.1 (from ghp-import>=1.0->mkdocs==1.6.1)
#6 15.07   Downloading http://packages/python-dateutil/python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
#6 15.16 Collecting platformdirs>=2.2.0 (from mkdocs-get-deps>=0.2.0->mkdocs==1.6.1)
#6 15.16   Using cached http://packages/platformdirs/platformdirs-4.3.6-py3-none-any.whl (18 kB)
#6 15.39 Collecting charset-normalizer<4,>=2 (from requests~=2.26->mkdocs-material==9.5.49)
#6 15.40   Using cached http://packages/charset-normalizer/charset_normalizer-3.4.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (146 kB)
#6 15.43 Collecting idna<4,>=2.5 (from requests~=2.26->mkdocs-material==9.5.49)
#6 15.44   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 15.53 Collecting urllib3<3,>=1.21.1 (from requests~=2.26->mkdocs-material==9.5.49)
#6 15.54   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#6 15.59 Collecting certifi>=2017.4.17 (from requests~=2.26->mkdocs-material==9.5.49)
#6 15.59   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#6 15.62 Collecting distlib<1,>=0.3.7 (from virtualenv>=20.10.0->pre-commit==4.0.1)
#6 15.62   Using cached http://packages/distlib/distlib-0.3.9-py2.py3-none-any.whl (468 kB)
#6 15.68 Collecting filelock<4,>=3.12.2 (from virtualenv>=20.10.0->pre-commit==4.0.1)
#6 15.68   Using cached http://packages/filelock/filelock-3.16.1-py3-none-any.whl (16 kB)
#6 15.73 Collecting gitdb<5,>=4.0.1 (from gitpython->mkdocs-git-committers-plugin-2==2.4.1)
#6 15.75   Downloading http://packages/gitdb/gitdb-4.0.12-py3-none-any.whl (62 kB)
#6 15.81 Collecting smmap<6,>=3.0.1 (from gitdb<5,>=4.0.1->gitpython->mkdocs-git-committers-plugin-2==2.4.1)
#6 15.83   Downloading http://packages/smmap/smmap-5.0.2-py3-none-any.whl (24 kB)
#6 15.88 Collecting six>=1.5 (from python-dateutil>=2.8.1->ghp-import>=1.0->mkdocs==1.6.1)
#6 15.90   Downloading http://packages/six/six-1.17.0-py2.py3-none-any.whl (11 kB)
#6 16.31 Installing collected packages: pytz, py-cpuinfo, paginate, distlib, watchdog, urllib3, smmap, six, regex, pyyaml, pygments, platformdirs, pathspec, nodeenv, mkdocs-material-extensions, mergedeep, markdown, idna, identify, filelock, colorama, click, charset-normalizer, cfgv, certifi, babel, virtualenv, requests, pyyaml-env-tag, python-dateutil, pytest-benchmark, pymdown-extensions, mkdocs-get-deps, gitdb, pre-commit, gitpython, ghp-import, mkdocs, mkdocs-section-index, mkdocs-material, mkdocs-git-revision-date-localized-plugin, mkdocs-git-committers-plugin-2
#6 23.19 Successfully installed babel-2.16.0 certifi-2024.12.14 cfgv-3.4.0 charset-normalizer-3.4.1 click-8.1.8 colorama-0.4.6 distlib-0.3.9 filelock-3.16.1 ghp-import-2.1.0 gitdb-4.0.12 gitpython-3.1.44 identify-2.6.5 idna-3.10 markdown-3.7 mergedeep-1.3.4 mkdocs-1.6.1 mkdocs-get-deps-0.2.0 mkdocs-git-committers-plugin-2-2.4.1 mkdocs-git-revision-date-localized-plugin-1.3.0 mkdocs-material-9.5.49 mkdocs-material-extensions-1.3.1 mkdocs-section-index-0.3.9 nodeenv-1.9.1 paginate-0.5.7 pathspec-0.12.1 platformdirs-4.3.6 pre-commit-4.0.1 py-cpuinfo-9.0.0 pygments-2.19.1 pymdown-extensions-10.14 pytest-benchmark-5.1.0 python-dateutil-2.9.0.post0 pytz-2024.2 pyyaml-6.0.2 pyyaml-env-tag-0.1 regex-2024.11.6 requests-2.32.3 six-1.17.0 smmap-5.0.2 urllib3-2.3.0 virtualenv-20.28.1 watchdog-6.0.0
#6 23.19 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 24.1s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.060 tests/test_templates.py::test_render
#7 1.060 tests/test_templates.py::test_render_escaped_linebreak
#7 1.060 tests/test_templates.py::test_render_jinja
#7 1.060 tests/test_templates.py::test_prompt_basic
#7 1.060 tests/test_templates.py::test_prompt_kwargs
#7 1.060 tests/test_templates.py::test_dispatch
#7 1.060 tests/test_templates.py::test_benchmark_template_render
#7 1.060 tests/test_templates.py::test_benchmark_template_function
#7 1.060 
#7 1.060 8 tests collected in 0.10s
#7 DONE 1.3s

#8 exporting to image
#8 exporting layers
#8 exporting layers 2.5s done
#8 writing image sha256:676e9fbf1710890171ad0c3db711a4d537fb79127b0fc240ba97289f16ec3c3e done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 2.6s
