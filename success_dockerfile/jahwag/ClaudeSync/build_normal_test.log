#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.09kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/jahwag/ClaudeSync.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /ClaudeSync/. /repo && rm -rf /ClaudeSync/ &&     rm -rf /ClaudeSync &&     cd /repo && git checkout 0006331542ed35956bfb80c50bd6f3b141348d9a &&     pip install -r /repo/requirements.txt
#6 1.677 Looking in indexes: http://simple/
#6 1.832 Collecting pytest
#6 1.850   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.876      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 16.9 MB/s eta 0:00:00
#6 1.969 Collecting pytest-xdist
#6 1.987   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 1.999      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 4.7 MB/s eta 0:00:00
#6 2.066 Collecting pluggy<2,>=1.5
#6 2.084   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.142 Collecting tomli>=1
#6 2.160   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.224 Collecting packaging
#6 2.241   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.256      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 5.3 MB/s eta 0:00:00
#6 2.299 Collecting exceptiongroup>=1.0.0rc8
#6 2.322   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.354 Collecting iniconfig
#6 2.374   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.425 Collecting execnet>=2.1
#6 2.445   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.453      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 7.8 MB/s eta 0:00:00
#6 2.589 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.161 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.162 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.283 
#6 3.283 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.283 [notice] To update, run: pip install --upgrade pip
#6 4.016 Looking in indexes: http://simple/
#6 4.101 Collecting pipdeptree
#6 4.122   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.147 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.263 Collecting pip>=24.2
#6 4.274   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.397 Installing collected packages: pip, pipdeptree
#6 4.398   Attempting uninstall: pip
#6 4.399     Found existing installation: pip 23.0.1
#6 4.567     Uninstalling pip-23.0.1:
#6 4.751       Successfully uninstalled pip-23.0.1
#6 5.976 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 5.976 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.150 Cloning into 'ClaudeSync'...
#6 8.239 Note: switching to '0006331542ed35956bfb80c50bd6f3b141348d9a'.
#6 8.239 
#6 8.239 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.239 changes and commit them, and you can discard any commits you make in this
#6 8.239 state without impacting any branches by switching back to a branch.
#6 8.239 
#6 8.239 If you want to create a new branch to retain commits you create, you may
#6 8.239 do so (now or later) by using -c with the switch command. Example:
#6 8.239 
#6 8.239   git switch -c <new-branch-name>
#6 8.239 
#6 8.239 Or undo this operation with:
#6 8.239 
#6 8.239   git switch -
#6 8.239 
#6 8.239 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.239 
#6 8.239 HEAD is now at 0006331 Update dependabot.yml
#6 8.806 Looking in indexes: http://simple/
#6 8.856 Collecting click>=8.1.7 (from -r /repo/requirements.txt (line 1))
#6 8.873   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#6 9.020 Collecting click_completion>=0.5.2 (from -r /repo/requirements.txt (line 2))
#6 9.125   Downloading http://packages/click-completion/click-completion-0.5.2.tar.gz (10 kB)
#6 9.140   Preparing metadata (setup.py): started
#6 9.941   Preparing metadata (setup.py): finished with status 'done'
#6 9.968 Collecting pathspec>=0.12.1 (from -r /repo/requirements.txt (line 3))
#6 9.985   Downloading http://packages/pathspec/pathspec-0.12.1-py3-none-any.whl (31 kB)
#6 9.997 Requirement already satisfied: pytest>=8.3.2 in /usr/local/lib/python3.10/site-packages (from -r /repo/requirements.txt (line 4)) (8.3.4)
#6 10.04 Collecting python_crontab>=3.2.0 (from -r /repo/requirements.txt (line 5))
#6 10.06   Downloading http://packages/python-crontab/python_crontab-3.2.0-py3-none-any.whl (27 kB)
#6 10.45 Collecting setuptools>=73.0.1 (from -r /repo/requirements.txt (line 6))
#6 10.47   Downloading http://packages/setuptools/setuptools-75.7.0-py3-none-any.whl (1.2 MB)
#6 10.51      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 47.5 MB/s eta 0:00:00
#6 10.56 Collecting sseclient_py>=1.8.0 (from -r /repo/requirements.txt (line 7))
#6 10.58   Downloading http://packages/sseclient-py/sseclient_py-1.8.0-py2.py3-none-any.whl (8.8 kB)
#6 10.70 Collecting tqdm>=4.66.5 (from -r /repo/requirements.txt (line 8))
#6 10.72   Downloading http://packages/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)
#6 10.77 Collecting pytest-cov>=5.0.0 (from -r /repo/requirements.txt (line 9))
#6 10.79   Downloading http://packages/pytest-cov/pytest_cov-6.0.0-py3-none-any.whl (22 kB)
#6 10.92 Collecting crontab>=1.0.1 (from -r /repo/requirements.txt (line 10))
#6 10.94   Downloading http://packages/crontab/crontab-1.0.1.tar.gz (19 kB)
#6 10.95   Preparing metadata (setup.py): started
#6 11.30   Preparing metadata (setup.py): finished with status 'done'
#6 11.36 Collecting Brotli>=1.1.0 (from -r /repo/requirements.txt (line 12))
#6 11.38   Downloading http://packages/brotli/Brotli-1.1.0-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (3.0 MB)
#6 11.43      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 97.8 MB/s eta 0:00:00
#6 11.81 Collecting cryptography>=42.0.4 (from -r /repo/requirements.txt (line 13))
#6 11.82   Using cached http://packages/cryptography/cryptography-44.0.0-cp39-abi3-manylinux_2_28_x86_64.whl (4.2 MB)
#6 11.89 Collecting jinja2 (from click_completion>=0.5.2->-r /repo/requirements.txt (line 2))
#6 11.91   Downloading http://packages/jinja2/jinja2-3.1.5-py3-none-any.whl (134 kB)
#6 11.95 Collecting six (from click_completion>=0.5.2->-r /repo/requirements.txt (line 2))
#6 11.97   Downloading http://packages/six/six-1.17.0-py2.py3-none-any.whl (11 kB)
#6 12.02 Collecting shellingham (from click_completion>=0.5.2->-r /repo/requirements.txt (line 2))
#6 12.02   Using cached http://packages/shellingham/shellingham-1.5.4-py2.py3-none-any.whl (9.8 kB)
#6 12.03 Requirement already satisfied: exceptiongroup>=1.0.0rc8 in /usr/local/lib/python3.10/site-packages (from pytest>=8.3.2->-r /repo/requirements.txt (line 4)) (1.2.2)
#6 12.03 Requirement already satisfied: iniconfig in /usr/local/lib/python3.10/site-packages (from pytest>=8.3.2->-r /repo/requirements.txt (line 4)) (2.0.0)
#6 12.03 Requirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pytest>=8.3.2->-r /repo/requirements.txt (line 4)) (24.2)
#6 12.03 Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.10/site-packages (from pytest>=8.3.2->-r /repo/requirements.txt (line 4)) (1.5.0)
#6 12.03 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from pytest>=8.3.2->-r /repo/requirements.txt (line 4)) (2.2.1)
#6 12.06 Collecting python-dateutil (from python_crontab>=3.2.0->-r /repo/requirements.txt (line 5))
#6 12.08   Downloading http://packages/python-dateutil/python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
#6 12.78 Collecting coverage>=7.5 (from coverage[toml]>=7.5->pytest-cov>=5.0.0->-r /repo/requirements.txt (line 9))
#6 12.79   Downloading http://packages/coverage/coverage-7.6.10-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (235 kB)
#6 13.04 Collecting cffi>=1.12 (from cryptography>=42.0.4->-r /repo/requirements.txt (line 13))
#6 13.05   Using cached http://packages/cffi/cffi-1.17.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (446 kB)
#6 13.07 Collecting pycparser (from cffi>=1.12->cryptography>=42.0.4->-r /repo/requirements.txt (line 13))
#6 13.08   Using cached http://packages/pycparser/pycparser-2.22-py3-none-any.whl (117 kB)
#6 13.22 Collecting MarkupSafe>=2.0 (from jinja2->click_completion>=0.5.2->-r /repo/requirements.txt (line 2))
#6 13.23   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#6 13.26 Building wheels for collected packages: click_completion, crontab
#6 13.26   Building wheel for click_completion (setup.py): started
#6 13.89   Building wheel for click_completion (setup.py): finished with status 'done'
#6 13.89   Created wheel for click_completion: filename=click_completion-0.5.2-py3-none-any.whl size=11187 sha256=e6199ed55c4a9c42dd9bfb759a37f7b6a4ae3a1a3cea6551244819ce0a907041
#6 13.89   Stored in directory: /root/.cache/pip/wheels/93/29/34/ad1c480ab154d1b8779e74261851a55b6ff86b5c23c3f2350c
#6 13.89   Building wheel for crontab (setup.py): started
#6 14.36   Building wheel for crontab (setup.py): finished with status 'done'
#6 14.36   Created wheel for crontab: filename=crontab-1.0.1-py3-none-any.whl size=20527 sha256=2a64842b40117923796452c47c71f159934a8a04aa4567de66e96df46ca1f650
#6 14.36   Stored in directory: /root/.cache/pip/wheels/9c/53/8a/19502e23be6f49227ee6a7c268c2d38d2f342486423cf5890b
#6 14.36 Successfully built click_completion crontab
#6 14.44 Installing collected packages: sseclient_py, crontab, Brotli, tqdm, six, shellingham, setuptools, pycparser, pathspec, MarkupSafe, coverage, click, python-dateutil, jinja2, cffi, python_crontab, pytest-cov, cryptography, click_completion
#6 14.61   Attempting uninstall: setuptools
#6 14.61     Found existing installation: setuptools 65.5.1
#6 14.64     Uninstalling setuptools-65.5.1:
#6 14.73       Successfully uninstalled setuptools-65.5.1
#6 16.62 Successfully installed Brotli-1.1.0 MarkupSafe-3.0.2 cffi-1.17.1 click-8.1.8 click_completion-0.5.2 coverage-7.6.10 crontab-1.0.1 cryptography-44.0.0 jinja2-3.1.5 pathspec-0.12.1 pycparser-2.22 pytest-cov-6.0.0 python-dateutil-2.9.0.post0 python_crontab-3.2.0 setuptools-75.7.0 shellingham-1.5.4 six-1.17.0 sseclient_py-1.8.0 tqdm-4.67.1
#6 16.62 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 17.3s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.681 ============================= test session starts ==============================
#7 1.681 platform linux -- Python 3.10.16, pytest-8.3.4, pluggy-1.5.0
#7 1.681 rootdir: /repo
#7 1.681 configfile: pytest.ini
#7 1.681 testpaths: tests
#7 1.681 plugins: cov-6.0.0, xdist-3.6.1
#7 1.681 collected 18 items
#7 1.681 
#7 1.681 <Dir repo>
#7 1.681   <Dir tests>
#7 1.681     <Module test_chat_happy_path.py>
#7 1.681       <UnitTestCase TestChatHappyPath>
#7 1.681         <TestCaseFunction test_chat_happy_path>
#7 1.681     <Module test_claude_ai.py>
#7 1.681       <UnitTestCase TestClaudeAIProvider>
#7 1.681         <TestCaseFunction test_archive_project>
#7 1.681         <TestCaseFunction test_create_chat>
#7 1.681         <TestCaseFunction test_create_project>
#7 1.681         <TestCaseFunction test_delete_chat>
#7 1.681         <TestCaseFunction test_delete_file>
#7 1.681         <TestCaseFunction test_get_artifact_content>
#7 1.681         <TestCaseFunction test_get_chat_conversation>
#7 1.681         <TestCaseFunction test_get_chat_conversations>
#7 1.681         <TestCaseFunction test_get_organizations>
#7 1.681         <TestCaseFunction test_get_projects>
#7 1.681         <TestCaseFunction test_get_published_artifacts>
#7 1.681         <TestCaseFunction test_handle_http_error_403>
#7 1.681         <TestCaseFunction test_list_files>
#7 1.681         <TestCaseFunction test_login>
#7 1.681         <TestCaseFunction test_send_message>
#7 1.681         <TestCaseFunction test_upload_file>
#7 1.681     <Module test_happy_path.py>
#7 1.681       <UnitTestCase TestClaudeSyncHappyPath>
#7 1.681         <TestCaseFunction test_happy_path>
#7 1.681 
#7 1.681 =============================== warnings summary ===============================
#7 1.681 src/claudesync/cli/main.py:9
#7 1.681   /repo/src/claudesync/cli/main.py:9: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
#7 1.681     from pkg_resources import get_distribution
#7 1.681 
#7 1.681 -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
#7 1.681 
#7 1.681 ---------- coverage: platform linux, python 3.10.16-final-0 ----------
#7 1.681 Name                                                      Stmts   Miss  Cover   Missing
#7 1.681 ---------------------------------------------------------------------------------------
#7 1.681 src/claudesync/__init__.py                                    0      0   100%
#7 1.681 src/claudesync/chat_sync.py                                  68     56    18%   29-69, 76-112, 118-129, 142-149, 165-186
#7 1.681 src/claudesync/cli/__init__.py                                2      0   100%
#7 1.681 src/claudesync/cli/auth.py                                   41     22    46%   11, 36-56, 63-64, 71-77
#7 1.681 src/claudesync/cli/category.py                               50     18    64%   8, 21-22, 31-32, 43-44, 52-61, 70-71
#7 1.681 src/claudesync/cli/chat.py                                  196    152    22%   15, 23-24, 32-39, 53-59, 64-70, 75-86, 91-99, 104-108, 116-128, 133-140, 150-180, 191-228, 239-257, 263-314, 320-339
#7 1.681 src/claudesync/cli/config.py                                 46     23    50%   13, 24-43, 52-56, 65-69
#7 1.681 src/claudesync/cli/file.py                                   18     10    44%   8, 16-27
#7 1.681 src/claudesync/cli/main.py                                  116     73    37%   37-38, 47-51, 58-104, 118-178, 182-204, 218
#7 1.681 src/claudesync/cli/organization.py                           51     37    27%   8, 16-25, 40-96
#7 1.681 src/claudesync/cli/project.py                               179    128    28%   19, 61-94, 115-148, 152-166, 187-253, 268-277, 289-318, 323-332
#7 1.681 src/claudesync/cli/submodule.py                              70     55    21%   16, 24-40, 48-144
#7 1.681 src/claudesync/cli/sync.py                                   51     33    35%   15-26, 32-40, 51-61, 65-68, 72-77
#7 1.681 src/claudesync/compression.py                               194    156    20%   14-15, 19-20, 24-32, 36-54, 58-61, 65-79, 83-97, 102, 106, 111-112, 116-117, 122-123, 127-128, 133-134, 138-139, 144-145, 149-150, 155-164, 168-170, 175-184, 188-189, 195-198, 201, 205-238, 248-264, 269-282, 286-302
#7 1.681 src/claudesync/configmanager/__init__.py                      4      0   100%
#7 1.681 src/claudesync/configmanager/base_config_manager.py          38     16    58%   23-24, 35, 140, 150, 160, 170, 187, 206, 220, 230, 239, 252-255
#7 1.681 src/claudesync/configmanager/file_config_manager.py         139    114    18%   27-33, 45-55, 67-83, 90-110, 119, 134, 145-156, 165-166, 172-178, 189-208, 220-246, 257-263, 272-277, 288-300, 306-307, 316, 325-331
#7 1.681 src/claudesync/configmanager/inmemory_config_manager.py      43     27    37%   19-20, 30, 39, 48, 57, 70-73, 88, 97, 100, 103-107, 110-122, 131, 134
#7 1.681 src/claudesync/exceptions.py                                  4      0   100%
#7 1.681 src/claudesync/provider_factory.py                           10      7    30%   26-38
#7 1.681 src/claudesync/providers/__init__.py                          0      0   100%
#7 1.681 src/claudesync/providers/base_claude_ai.py                  162    122    25%   14-15, 19-34, 41-48, 52, 55-57, 70-72, 76-90, 94-107, 113-115, 119-124, 128-146, 152-169, 172-175, 185-197, 200-203, 214-215, 220, 226-227, 232-233, 238, 243, 248, 254-260, 263-265, 268, 285-290, 296-298, 303, 306-326
#7 1.681 src/claudesync/providers/base_provider.py                    47     15    68%   10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80
#7 1.681 src/claudesync/providers/claude_ai.py                        92     79    14%   13, 16-76, 79-117, 120-138
#7 1.681 src/claudesync/session_key_manager.py                        58     42    28%   12-13, 16-27, 30-46, 51-61, 64-65, 68-71, 74-80, 83-85
#7 1.681 src/claudesync/syncmanager.py                               198    157    21%   21-37, 46-56, 59-63, 66-96, 99-117, 120-128, 132-139, 143-155, 158-176, 179-182, 185-187, 202-226, 230-241, 244-254, 257-263, 270-285, 290-302, 305-310, 314-323
#7 1.681 src/claudesync/utils.py                                     137    112    18%   31-32, 51-55, 74-78, 95, 122-141, 158-166, 182-240, 262-265, 292-314, 333-352, 366-370, 385-415
#7 1.681 ---------------------------------------------------------------------------------------
#7 1.681 TOTAL                                                      2014   1454    28%
#7 1.681 
#7 1.681 ========================= 18 tests collected in 0.66s ==========================
#7 DONE 2.0s

#8 exporting to image
#8 exporting layers
#8 exporting layers 0.6s done
#8 writing image sha256:0500f4a36c8f65df8e9c9b1e3e58d2a7468ec3a78145542a377e761c7e5b02d2 done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 0.6s
