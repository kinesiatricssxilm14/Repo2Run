#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 1.43kB done
#1 DONE 0.3s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/modelcontextprotocol/python-sdk.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /python-sdk/. /repo && rm -rf /python-sdk/ &&     rm -rf /python-sdk &&     cd /repo && git checkout aaf32b530738ff79ba607c2884374243350f521c &&     pip install anyio==4.7.0 &&     pip install httpx==0.28.1 &&     pip install httpx-sse==0.4.0 &&     pip install pydantic==2.10.4 &&     pip install starlette==0.42.0 &&     pip install sse-starlette==2.1.3 &&     pip install pyright==1.1.391 &&     pip install pytest==8.3.4 &&     pip install ruff==0.8.4 &&     pip install trio==0.27.0
#6 1.889 Looking in indexes: http://simple/
#6 2.046 Collecting pytest
#6 2.070   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 2.093      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 18.4 MB/s eta 0:00:00
#6 2.175 Collecting pytest-xdist
#6 2.199   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 2.209      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 5.2 MB/s eta 0:00:00
#6 2.270 Collecting exceptiongroup>=1.0.0rc8
#6 2.288   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.352 Collecting packaging
#6 2.370   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.382      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 7.2 MB/s eta 0:00:00
#6 2.427 Collecting pluggy<2,>=1.5
#6 2.444   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.503 Collecting tomli>=1
#6 2.521   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.556 Collecting iniconfig
#6 2.573   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.640 Collecting execnet>=2.1
#6 2.657   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.665      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 8.6 MB/s eta 0:00:00
#6 2.781 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.293 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.294 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.415 
#6 3.415 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.415 [notice] To update, run: pip install --upgrade pip
#6 4.084 Looking in indexes: http://simple/
#6 4.163 Collecting pipdeptree
#6 4.181   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.320 Collecting pip>=24.2
#6 4.331   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.349 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.459 Installing collected packages: pip, pipdeptree
#6 4.459   Attempting uninstall: pip
#6 4.460     Found existing installation: pip 23.0.1
#6 4.628     Uninstalling pip-23.0.1:
#6 4.824       Successfully uninstalled pip-23.0.1
#6 6.168 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 6.169 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.365 Cloning into 'python-sdk'...
#6 8.520 Note: switching to 'aaf32b530738ff79ba607c2884374243350f521c'.
#6 8.520 
#6 8.520 You are in 'detached HEAD' state. You can look around, make experimental
#6 8.520 changes and commit them, and you can discard any commits you make in this
#6 8.520 state without impacting any branches by switching back to a branch.
#6 8.520 
#6 8.520 If you want to create a new branch to retain commits you create, you may
#6 8.520 do so (now or later) by using -c with the switch command. Example:
#6 8.520 
#6 8.520   git switch -c <new-branch-name>
#6 8.520 
#6 8.520 Or undo this operation with:
#6 8.520 
#6 8.520   git switch -
#6 8.520 
#6 8.520 Turn off this advice by setting config variable advice.detachedHead to false
#6 8.520 
#6 8.520 HEAD is now at aaf32b5 Merge branch 'v1.1.x'
#6 9.051 Looking in indexes: http://simple/
#6 9.106 Collecting anyio==4.7.0
#6 9.124   Downloading http://packages/anyio/anyio-4.7.0-py3-none-any.whl (93 kB)
#6 9.151 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio==4.7.0) (1.2.2)
#6 9.179 Collecting idna>=2.8 (from anyio==4.7.0)
#6 9.181   Using cached http://packages/idna/idna-3.10-py3-none-any.whl (70 kB)
#6 9.203 Collecting sniffio>=1.1 (from anyio==4.7.0)
#6 9.220   Downloading http://packages/sniffio/sniffio-1.3.1-py3-none-any.whl (10 kB)
#6 9.268 Collecting typing_extensions>=4.5 (from anyio==4.7.0)
#6 9.287   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#6 9.390 Installing collected packages: typing_extensions, sniffio, idna, anyio
#6 9.682 Successfully installed anyio-4.7.0 idna-3.10 sniffio-1.3.1 typing_extensions-4.12.2
#6 9.683 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 10.54 Looking in indexes: http://simple/
#6 10.60 Collecting httpx==0.28.1
#6 10.62   Downloading http://packages/httpx/httpx-0.28.1-py3-none-any.whl (73 kB)
#6 10.64 Requirement already satisfied: anyio in /usr/local/lib/python3.10/site-packages (from httpx==0.28.1) (4.7.0)
#6 10.68 Collecting certifi (from httpx==0.28.1)
#6 10.68   Using cached http://packages/certifi/certifi-2024.12.14-py3-none-any.whl (164 kB)
#6 10.73 Collecting httpcore==1.* (from httpx==0.28.1)
#6 10.75   Downloading http://packages/httpcore/httpcore-1.0.7-py3-none-any.whl (78 kB)
#6 10.77 Requirement already satisfied: idna in /usr/local/lib/python3.10/site-packages (from httpx==0.28.1) (3.10)
#6 10.79 Collecting h11<0.15,>=0.13 (from httpcore==1.*->httpx==0.28.1)
#6 10.81   Downloading http://packages/h11/h11-0.14.0-py3-none-any.whl (58 kB)
#6 10.88 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio->httpx==0.28.1) (1.2.2)
#6 10.88 Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/site-packages (from anyio->httpx==0.28.1) (1.3.1)
#6 10.88 Requirement already satisfied: typing_extensions>=4.5 in /usr/local/lib/python3.10/site-packages (from anyio->httpx==0.28.1) (4.12.2)
#6 10.93 Installing collected packages: h11, certifi, httpcore, httpx
#6 11.19 Successfully installed certifi-2024.12.14 h11-0.14.0 httpcore-1.0.7 httpx-0.28.1
#6 11.20 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 11.97 Looking in indexes: http://simple/
#6 12.00 Collecting httpx-sse==0.4.0
#6 12.03   Downloading http://packages/httpx-sse/httpx_sse-0.4.0-py3-none-any.whl (7.8 kB)
#6 12.08 Installing collected packages: httpx-sse
#6 12.10 Successfully installed httpx-sse-0.4.0
#6 12.10 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 12.86 Looking in indexes: http://simple/
#6 13.26 Collecting pydantic==2.10.4
#6 13.28   Downloading http://packages/pydantic/pydantic-2.10.4-py3-none-any.whl (431 kB)
#6 13.33 Collecting annotated-types>=0.6.0 (from pydantic==2.10.4)
#6 13.35   Downloading http://packages/annotated-types/annotated_types-0.7.0-py3-none-any.whl (13 kB)
#6 14.69 Collecting pydantic-core==2.27.2 (from pydantic==2.10.4)
#6 14.72   Downloading http://packages/pydantic-core/pydantic_core-2.27.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
#6 14.85      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 57.4 MB/s eta 0:00:00
#6 14.86 Requirement already satisfied: typing-extensions>=4.12.2 in /usr/local/lib/python3.10/site-packages (from pydantic==2.10.4) (4.12.2)
#6 14.91 Installing collected packages: pydantic-core, annotated-types, pydantic
#6 15.41 Successfully installed annotated-types-0.7.0 pydantic-2.10.4 pydantic-core-2.27.2
#6 15.41 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 16.53 Looking in indexes: http://simple/
#6 16.62 Collecting starlette==0.42.0
#6 16.76   Downloading http://packages/starlette/starlette-0.42.0-py3-none-any.whl (73 kB)
#6 16.78 Requirement already satisfied: anyio<5,>=3.4.0 in /usr/local/lib/python3.10/site-packages (from starlette==0.42.0) (4.7.0)
#6 16.79 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette==0.42.0) (1.2.2)
#6 16.79 Requirement already satisfied: idna>=2.8 in /usr/local/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette==0.42.0) (3.10)
#6 16.79 Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette==0.42.0) (1.3.1)
#6 16.79 Requirement already satisfied: typing_extensions>=4.5 in /usr/local/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette==0.42.0) (4.12.2)
#6 16.86 Installing collected packages: starlette
#6 16.95 Successfully installed starlette-0.42.0
#6 16.95 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 17.68 Looking in indexes: http://simple/
#6 17.74 Collecting sse-starlette==2.1.3
#6 17.76   Downloading http://packages/sse-starlette/sse_starlette-2.1.3-py3-none-any.whl (9.4 kB)
#6 17.77 Requirement already satisfied: starlette in /usr/local/lib/python3.10/site-packages (from sse-starlette==2.1.3) (0.42.0)
#6 17.84 Collecting uvicorn (from sse-starlette==2.1.3)
#6 17.86   Downloading http://packages/uvicorn/uvicorn-0.34.0-py3-none-any.whl (62 kB)
#6 17.87 Requirement already satisfied: anyio in /usr/local/lib/python3.10/site-packages (from sse-starlette==2.1.3) (4.7.0)
#6 17.88 Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/site-packages (from anyio->sse-starlette==2.1.3) (1.2.2)
#6 17.88 Requirement already satisfied: idna>=2.8 in /usr/local/lib/python3.10/site-packages (from anyio->sse-starlette==2.1.3) (3.10)
#6 17.88 Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/site-packages (from anyio->sse-starlette==2.1.3) (1.3.1)
#6 17.88 Requirement already satisfied: typing_extensions>=4.5 in /usr/local/lib/python3.10/site-packages (from anyio->sse-starlette==2.1.3) (4.12.2)
#6 17.96 Collecting click>=7.0 (from uvicorn->sse-starlette==2.1.3)
#6 17.98   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#6 18.00 Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/site-packages (from uvicorn->sse-starlette==2.1.3) (0.14.0)
#6 18.05 Installing collected packages: click, uvicorn, sse-starlette
#6 18.21 Successfully installed click-8.1.8 sse-starlette-2.1.3 uvicorn-0.34.0
#6 18.21 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 18.90 Looking in indexes: http://simple/
#6 19.02 Collecting pyright==1.1.391
#6 19.04   Downloading http://packages/pyright/pyright-1.1.391-py3-none-any.whl (18 kB)
#6 19.12 Collecting nodeenv>=1.6.0 (from pyright==1.1.391)
#6 19.14   Downloading http://packages/nodeenv/nodeenv-1.9.1-py2.py3-none-any.whl (22 kB)
#6 19.15 Requirement already satisfied: typing-extensions>=4.1 in /usr/local/lib/python3.10/site-packages (from pyright==1.1.391) (4.12.2)
#6 19.23 Installing collected packages: nodeenv, pyright
#6 19.30 Successfully installed nodeenv-1.9.1 pyright-1.1.391
#6 19.30 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 20.05 Looking in indexes: http://simple/
#6 20.06 Requirement already satisfied: pytest==8.3.4 in /usr/local/lib/python3.10/site-packages (8.3.4)
#6 20.06 Requirement already satisfied: exceptiongroup>=1.0.0rc8 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.2.2)
#6 20.06 Requirement already satisfied: iniconfig in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.0.0)
#6 20.06 Requirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (24.2)
#6 20.06 Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (1.5.0)
#6 20.07 Requirement already satisfied: tomli>=1 in /usr/local/lib/python3.10/site-packages (from pytest==8.3.4) (2.2.1)
#6 20.12 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 20.85 Looking in indexes: http://simple/
#6 21.75 Collecting ruff==0.8.4
#6 22.00   Downloading http://packages/ruff/ruff-0.8.4-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.2 MB)
#6 22.09      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.2/11.2 MB 155.0 MB/s eta 0:00:00
#6 22.18 Installing collected packages: ruff
#6 22.41 Successfully installed ruff-0.8.4
#6 22.41 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 23.20 Looking in indexes: http://simple/
#6 23.25 Collecting trio==0.27.0
#6 23.27   Downloading http://packages/trio/trio-0.27.0-py3-none-any.whl (481 kB)
#6 23.34 Collecting attrs>=23.2.0 (from trio==0.27.0)
#6 23.36   Downloading http://packages/attrs/attrs-24.3.0-py3-none-any.whl (63 kB)
#6 23.41 Collecting sortedcontainers (from trio==0.27.0)
#6 23.44   Downloading http://packages/sortedcontainers/sortedcontainers-2.4.0-py2.py3-none-any.whl (29 kB)
#6 23.45 Requirement already satisfied: idna in /usr/local/lib/python3.10/site-packages (from trio==0.27.0) (3.10)
#6 23.48 Collecting outcome (from trio==0.27.0)
#6 23.50   Downloading http://packages/outcome/outcome-1.3.0.post0-py2.py3-none-any.whl (10 kB)
#6 23.51 Requirement already satisfied: sniffio>=1.3.0 in /usr/local/lib/python3.10/site-packages (from trio==0.27.0) (1.3.1)
#6 23.51 Requirement already satisfied: exceptiongroup in /usr/local/lib/python3.10/site-packages (from trio==0.27.0) (1.2.2)
#6 23.62 Installing collected packages: sortedcontainers, attrs, outcome, trio
#6 24.07 Successfully installed attrs-24.3.0 outcome-1.3.0.post0 sortedcontainers-2.4.0 trio-0.27.0
#6 24.07 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 24.5s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.442 tests/client/test_session.py::test_client_session_initialize[asyncio]
#7 1.442 tests/client/test_session.py::test_client_session_initialize[trio]
#7 1.442 tests/client/test_stdio.py::test_stdio_client[asyncio]
#7 1.442 tests/client/test_stdio.py::test_stdio_client[trio]
#7 1.442 tests/server/test_session.py::test_server_session_initialize[asyncio]
#7 1.442 tests/server/test_session.py::test_server_capabilities[asyncio]
#7 1.442 tests/server/test_session.py::test_server_session_initialize[trio]
#7 1.442 tests/server/test_session.py::test_server_capabilities[trio]
#7 1.442 tests/server/test_stdio.py::test_stdio_server[asyncio]
#7 1.442 tests/server/test_stdio.py::test_stdio_server[trio]
#7 1.442 tests/shared/test_memory.py::test_memory_server_and_client_connection[asyncio]
#7 1.442 tests/shared/test_memory.py::test_memory_server_and_client_connection[trio]
#7 1.442 tests/test_types.py::test_jsonrpc_request
#7 1.442 
#7 1.442 13 tests collected in 0.08s
#7 DONE 1.7s

#8 exporting to image
#8 exporting layers
#8 exporting layers 0.8s done
#8 writing image sha256:8a252f8dd405944f47aca89d265ce2659a80b2cda7ad9d7cf35031ebc92a1a5c done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 0.8s
