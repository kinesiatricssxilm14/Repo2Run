#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 DONE 0.0s

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.06kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/superlinear-ai/raglite.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /raglite/. /repo && rm -rf /raglite/ &&     rm -rf /raglite &&     cd /repo && git checkout 0c5b7b56dbe48781e51857366ed9c3f82604d7c0 &&     cd /repo && poetry install
#6 CACHED

#7 [4/5] RUN cd /repo && poetry run pytest --collect-only -q
#7 39.24 [1m============================= test session starts ==============================[0m
#7 39.24 platform linux -- Python 3.10.16, pytest-8.3.2, pluggy-1.5.0 -- /root/.cache/pypoetry/virtualenvs/raglite-gW_DSdP6-py3.10/bin/python
#7 39.24 cachedir: .pytest_cache
#7 39.24 rootdir: /repo
#7 39.24 configfile: pyproject.toml
#7 39.24 testpaths: src, tests
#7 39.24 plugins: mock-3.14.0, typeguard-4.3.0, anyio-4.4.0
#7 39.24 [1mcollecting ... [0mcollected 63 items
#7 42.62 run-last-failure: no previously failed tests, not deselecting items.
#7 42.62 
#7 42.62 <Dir repo>
#7 42.62   <Package tests>
#7 42.62     <Module test_embed.py>
#7 42.62       Test RAGLite's embedding functionality.
#7 42.62       <Function test_embed[bge_m3]>
#7 42.62         Test embedding a document.
#7 42.62     <Module test_rag.py>
#7 42.62       Test RAGLite's RAG functionality.
#7 42.62       <Function test_rag[sqlite-bge_m3]>
#7 42.62         Test Retrieval-Augmented Generation.
#7 42.62     <Module test_rerank.py>
#7 42.62       Test RAGLite's reranking functionality.
#7 42.62       <Function test_reranker[sqlite-bge_m3-no_reranker]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[sqlite-bge_m3-flashrank_english]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[sqlite-bge_m3-flashrank_multilingual]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62     <Module test_search.py>
#7 42.62       Test RAGLite's search functionality.
#7 42.62       <Function test_search[sqlite-bge_m3-keyword_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[sqlite-bge_m3-vector_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[sqlite-bge_m3-hybrid_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search_no_results[sqlite-bge_m3-keyword_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[sqlite-bge_m3-vector_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[sqlite-bge_m3-hybrid_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62     <Module test_rag.py>
#7 42.62       Test RAGLite's RAG functionality.
#7 42.62       <Function test_rag[sqlite-openai_text_embedding_3_small]>
#7 42.62         Test Retrieval-Augmented Generation.
#7 42.62     <Module test_rerank.py>
#7 42.62       Test RAGLite's reranking functionality.
#7 42.62       <Function test_reranker[sqlite-openai_text_embedding_3_small-no_reranker]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[sqlite-openai_text_embedding_3_small-flashrank_english]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[sqlite-openai_text_embedding_3_small-flashrank_multilingual]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62     <Module test_search.py>
#7 42.62       Test RAGLite's search functionality.
#7 42.62       <Function test_search[sqlite-openai_text_embedding_3_small-keyword_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[sqlite-openai_text_embedding_3_small-vector_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[sqlite-openai_text_embedding_3_small-hybrid_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search_no_results[sqlite-openai_text_embedding_3_small-keyword_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[sqlite-openai_text_embedding_3_small-vector_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[sqlite-openai_text_embedding_3_small-hybrid_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62     <Module test_embed.py>
#7 42.62       Test RAGLite's embedding functionality.
#7 42.62       <Function test_embed[openai_text_embedding_3_small]>
#7 42.62         Test embedding a document.
#7 42.62     <Module test_rag.py>
#7 42.62       Test RAGLite's RAG functionality.
#7 42.62       <Function test_rag[postgres-openai_text_embedding_3_small]>
#7 42.62         Test Retrieval-Augmented Generation.
#7 42.62     <Module test_rerank.py>
#7 42.62       Test RAGLite's reranking functionality.
#7 42.62       <Function test_reranker[postgres-openai_text_embedding_3_small-no_reranker]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[postgres-openai_text_embedding_3_small-flashrank_english]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[postgres-openai_text_embedding_3_small-flashrank_multilingual]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62     <Module test_search.py>
#7 42.62       Test RAGLite's search functionality.
#7 42.62       <Function test_search[postgres-openai_text_embedding_3_small-keyword_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[postgres-openai_text_embedding_3_small-vector_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[postgres-openai_text_embedding_3_small-hybrid_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search_no_results[postgres-openai_text_embedding_3_small-keyword_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[postgres-openai_text_embedding_3_small-vector_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[postgres-openai_text_embedding_3_small-hybrid_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62     <Module test_rag.py>
#7 42.62       Test RAGLite's RAG functionality.
#7 42.62       <Function test_rag[postgres-bge_m3]>
#7 42.62         Test Retrieval-Augmented Generation.
#7 42.62     <Module test_rerank.py>
#7 42.62       Test RAGLite's reranking functionality.
#7 42.62       <Function test_reranker[postgres-bge_m3-no_reranker]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[postgres-bge_m3-flashrank_english]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62       <Function test_reranker[postgres-bge_m3-flashrank_multilingual]>
#7 42.62         Test inserting a document, updating the indexes, and searching for a query.
#7 42.62     <Module test_search.py>
#7 42.62       Test RAGLite's search functionality.
#7 42.62       <Function test_search[postgres-bge_m3-keyword_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[postgres-bge_m3-vector_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search[postgres-bge_m3-hybrid_search]>
#7 42.62         Test searching for a query.
#7 42.62       <Function test_search_no_results[postgres-bge_m3-keyword_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[postgres-bge_m3-vector_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62       <Function test_search_no_results[postgres-bge_m3-hybrid_search]>
#7 42.62         Test searching for a query with no keyword search results.
#7 42.62     <Module test_extract.py>
#7 42.62       Test RAGLite's structured output extraction.
#7 42.62       <Function test_extract[llama_cpp_python-strict=False]>
#7 42.62         Test extracting structured data.
#7 42.62       <Function test_extract[llama_cpp_python-strict=True]>
#7 42.62         Test extracting structured data.
#7 42.62       <Function test_extract[openai-strict=False]>
#7 42.62         Test extracting structured data.
#7 42.62       <Function test_extract[openai-strict=True]>
#7 42.62         Test extracting structured data.
#7 42.62     <Module test_import.py>
#7 42.62       Test RAGLite.
#7 42.62       <Function test_import>
#7 42.62         Test that the package can be imported.
#7 42.62     <Module test_markdown.py>
#7 42.62       Test Markdown conversion.
#7 42.62       <Function test_pdf_with_missing_font_sizes>
#7 42.62         Test conversion of a PDF with missing font sizes.
#7 42.62     <Module test_split_chunks.py>
#7 42.62       Test RAGLite's chunk splitting functionality.
#7 42.62       <Function test_edge_cases[one_chunk:no_sentences]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[one_chunk:one_sentence]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[one_chunk:two_sentences]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[one_chunk:three_sentences]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[one_chunk:many_sentences]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:two_sentences_a]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:two_sentences_b]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:three_sentences_a]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:three_sentences_b]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:three_sentences_c]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:many_sentences_a]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_edge_cases[n_chunks:many_sentences_b]>
#7 42.62         Test chunk splitting edge cases.
#7 42.62       <Function test_long_sentence[first]>
#7 42.62         Test chunking on sentences that are too long.
#7 42.62       <Function test_long_sentence[middle]>
#7 42.62         Test chunking on sentences that are too long.
#7 42.62       <Function test_long_sentence[last]>
#7 42.62         Test chunking on sentences that are too long.
#7 42.62 
#7 42.62 ----------------- generated xml file: /repo/reports/pytest.xml -----------------
#7 42.62 [32m========================= [32m63 tests collected[0m[32m in 3.39s[0m[32m ==========================[0m
#7 DONE 44.2s

#8 exporting to image
#8 exporting layers
#8 exporting layers 14.0s done
#8 writing image sha256:5e7d1e0309ddf4c341d42a14c53434134017988eb085b0ce5bbaee544ee4bb80 done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 14.0s
