#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.18kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.10
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/5] FROM docker.io/library/python:3.10
#4 DONE 0.0s

#5 [2/5] RUN mkdir -p ~/.pip && touch ~/.pip/pip.conf &&     echo "[global]" >> ~/.pip/pip.conf && echo "index-url=http://simple/" >> ~/.pip/pip.conf && echo "[install]" >> ~/.pip/pip.conf && echo "trusted-host=pypi..org" >> ~/.pip/pip.conf &&     apt-get update && apt-get install -y curl &&     curl -sSL https://install.python-poetry.org | python -
#5 CACHED

#6 [3/5] RUN pip install pytest pytest-xdist &&     pip install pipdeptree &&     git clone https://github.com/awslabs/agent-evaluation.git &&     mkdir /repo &&     git config --global --add safe.directory /repo &&     cp -r /agent-evaluation/. /repo && rm -rf /agent-evaluation/ &&     rm -rf /agent-evaluation &&     cd /repo && git checkout 3df69508f44cd77a7714be1649fe3dfe0d000ae2 &&     cd /repo && pip install -e .
#6 1.678 Looking in indexes: http://simple/
#6 1.849 Collecting pytest
#6 1.870   Downloading http://packages/pytest/pytest-8.3.4-py3-none-any.whl (343 kB)
#6 1.895      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.1/343.1 kB 17.0 MB/s eta 0:00:00
#6 1.967 Collecting pytest-xdist
#6 1.987   Downloading http://packages/pytest-xdist/pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
#6 1.999      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 46.1/46.1 kB 5.1 MB/s eta 0:00:00
#6 2.074 Collecting tomli>=1
#6 2.091   Downloading http://packages/tomli/tomli-2.2.1-py3-none-any.whl (14 kB)
#6 2.153 Collecting pluggy<2,>=1.5
#6 2.172   Downloading http://packages/pluggy/pluggy-1.5.0-py3-none-any.whl (20 kB)
#6 2.236 Collecting packaging
#6 2.256   Downloading http://packages/packaging/packaging-24.2-py3-none-any.whl (65 kB)
#6 2.268      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 6.8 MB/s eta 0:00:00
#6 2.320 Collecting exceptiongroup>=1.0.0rc8
#6 2.339   Downloading http://packages/exceptiongroup/exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#6 2.374 Collecting iniconfig
#6 2.397   Downloading http://packages/iniconfig/iniconfig-2.0.0-py3-none-any.whl (5.9 kB)
#6 2.467 Collecting execnet>=2.1
#6 2.489   Downloading http://packages/execnet/execnet-2.1.1-py3-none-any.whl (40 kB)
#6 2.500      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.6/40.6 kB 3.9 MB/s eta 0:00:00
#6 2.623 Installing collected packages: tomli, pluggy, packaging, iniconfig, execnet, exceptiongroup, pytest, pytest-xdist
#6 3.147 Successfully installed exceptiongroup-1.2.2 execnet-2.1.1 iniconfig-2.0.0 packaging-24.2 pluggy-1.5.0 pytest-8.3.4 pytest-xdist-3.6.1 tomli-2.2.1
#6 3.147 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 3.279 
#6 3.279 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#6 3.279 [notice] To update, run: pip install --upgrade pip
#6 3.941 Looking in indexes: http://simple/
#6 4.023 Collecting pipdeptree
#6 4.044   Downloading http://packages/pipdeptree/pipdeptree-2.24.0-py3-none-any.whl (32 kB)
#6 4.181 Collecting pip>=24.2
#6 4.193   Using cached http://packages/pip/pip-24.3.1-py3-none-any.whl (1.8 MB)
#6 4.211 Requirement already satisfied: packaging>=24.1 in /usr/local/lib/python3.10/site-packages (from pipdeptree) (24.2)
#6 4.314 Installing collected packages: pip, pipdeptree
#6 4.314   Attempting uninstall: pip
#6 4.315     Found existing installation: pip 23.0.1
#6 4.473     Uninstalling pip-23.0.1:
#6 4.633       Successfully uninstalled pip-23.0.1
#6 5.873 Successfully installed pip-24.3.1 pipdeptree-2.24.0
#6 5.873 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#6 6.059 Cloning into 'agent-evaluation'...
#6 28.56 Note: switching to '3df69508f44cd77a7714be1649fe3dfe0d000ae2'.
#6 28.56 
#6 28.56 You are in 'detached HEAD' state. You can look around, make experimental
#6 28.56 changes and commit them, and you can discard any commits you make in this
#6 28.56 state without impacting any branches by switching back to a branch.
#6 28.56 
#6 28.56 If you want to create a new branch to retain commits you create, you may
#6 28.56 do so (now or later) by using -c with the switch command. Example:
#6 28.56 
#6 28.56   git switch -c <new-branch-name>
#6 28.56 
#6 28.56 Or undo this operation with:
#6 28.56 
#6 28.56   git switch -
#6 28.56 
#6 28.56 Turn off this advice by setting config variable advice.detachedHead to false
#6 28.56 
#6 28.56 HEAD is now at 3df6950 Merge pull request #92 from awslabs/89-bedrock-agent-required-arguments-documented-as-optional
#6 29.14 Looking in indexes: http://simple/
#6 29.14 Obtaining file:///repo
#6 29.14   Installing build dependencies: started
#6 31.47   Installing build dependencies: finished with status 'done'
#6 31.47   Checking if build backend supports build_editable: started
#6 31.76   Checking if build backend supports build_editable: finished with status 'done'
#6 31.76   Getting requirements to build editable: started
#6 32.10   Getting requirements to build editable: finished with status 'done'
#6 32.10   Preparing editable metadata (pyproject.toml): started
#6 32.40   Preparing editable metadata (pyproject.toml): finished with status 'done'
#6 32.51 Collecting pyyaml~=6.0 (from agent-evaluation==0.2.0)
#6 32.54   Downloading http://packages/pyyaml/PyYAML-6.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (751 kB)
#6 32.57      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 751.2/751.2 kB 31.2 MB/s eta 0:00:00
#6 33.42 Collecting boto3<2.0,>=1.34.20 (from agent-evaluation==0.2.0)
#6 33.44   Downloading http://packages/boto3/boto3-1.35.94-py3-none-any.whl (139 kB)
#6 33.50 Collecting click~=8.0 (from agent-evaluation==0.2.0)
#6 33.52   Downloading http://packages/click/click-8.1.8-py3-none-any.whl (98 kB)
#6 33.81 Collecting pydantic<3.0,>=2.1.0 (from agent-evaluation==0.2.0)
#6 33.84   Downloading http://packages/pydantic/pydantic-2.10.4-py3-none-any.whl (431 kB)
#6 34.01 Collecting rich<14.0,>=13.7.0 (from agent-evaluation==0.2.0)
#6 34.03   Downloading http://packages/rich/rich-13.9.4-py3-none-any.whl (242 kB)
#6 34.10 Collecting jinja2<4.0,>=3.1.3 (from agent-evaluation==0.2.0)
#6 34.12   Downloading http://packages/jinja2/jinja2-3.1.5-py3-none-any.whl (134 kB)
#6 34.16 Collecting jsonpath-ng<2.0,>=1.6.1 (from agent-evaluation==0.2.0)
#6 34.18   Downloading http://packages/jsonpath-ng/jsonpath_ng-1.7.0-py3-none-any.whl (30 kB)
#6 35.35 Collecting botocore<1.36.0,>=1.35.94 (from boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 35.37   Downloading http://packages/botocore/botocore-1.35.94-py3-none-any.whl (13.3 MB)
#6 35.50      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.3/13.3 MB 115.7 MB/s eta 0:00:00
#6 35.59 Collecting jmespath<2.0.0,>=0.7.1 (from boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 35.62   Downloading http://packages/jmespath/jmespath-1.0.1-py3-none-any.whl (20 kB)
#6 35.67 Collecting s3transfer<0.11.0,>=0.10.0 (from boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 35.69   Downloading http://packages/s3transfer/s3transfer-0.10.4-py3-none-any.whl (83 kB)
#6 35.83 Collecting MarkupSafe>=2.0 (from jinja2<4.0,>=3.1.3->agent-evaluation==0.2.0)
#6 35.85   Downloading http://packages/markupsafe/MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#6 35.87 Collecting ply (from jsonpath-ng<2.0,>=1.6.1->agent-evaluation==0.2.0)
#6 35.89   Downloading http://packages/ply/ply-3.11-py2.py3-none-any.whl (49 kB)
#6 35.93 Collecting annotated-types>=0.6.0 (from pydantic<3.0,>=2.1.0->agent-evaluation==0.2.0)
#6 35.95   Downloading http://packages/annotated-types/annotated_types-0.7.0-py3-none-any.whl (13 kB)
#6 37.27 Collecting pydantic-core==2.27.2 (from pydantic<3.0,>=2.1.0->agent-evaluation==0.2.0)
#6 37.29   Downloading http://packages/pydantic-core/pydantic_core-2.27.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
#6 37.33      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 74.0 MB/s eta 0:00:00
#6 37.38 Collecting typing-extensions>=4.12.2 (from pydantic<3.0,>=2.1.0->agent-evaluation==0.2.0)
#6 37.39   Downloading http://packages/typing-extensions/typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#6 37.46 Collecting markdown-it-py>=2.2.0 (from rich<14.0,>=13.7.0->agent-evaluation==0.2.0)
#6 37.48   Downloading http://packages/markdown-it-py/markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
#6 37.55 Collecting pygments<3.0.0,>=2.13.0 (from rich<14.0,>=13.7.0->agent-evaluation==0.2.0)
#6 37.57   Downloading http://packages/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)
#6 37.60      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 53.9 MB/s eta 0:00:00
#6 37.65 Collecting python-dateutil<3.0.0,>=2.1 (from botocore<1.36.0,>=1.35.94->boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 37.68   Downloading http://packages/python-dateutil/python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
#6 37.79 Collecting urllib3!=2.2.0,<3,>=1.25.4 (from botocore<1.36.0,>=1.35.94->boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 37.79   Using cached http://packages/urllib3/urllib3-2.3.0-py3-none-any.whl (128 kB)
#6 37.82 Collecting mdurl~=0.1 (from markdown-it-py>=2.2.0->rich<14.0,>=13.7.0->agent-evaluation==0.2.0)
#6 37.84   Downloading http://packages/mdurl/mdurl-0.1.2-py3-none-any.whl (10.0 kB)
#6 38.21 Collecting six>=1.5 (from python-dateutil<3.0.0,>=2.1->botocore<1.36.0,>=1.35.94->boto3<2.0,>=1.34.20->agent-evaluation==0.2.0)
#6 38.23   Downloading http://packages/six/six-1.17.0-py2.py3-none-any.whl (11 kB)
#6 38.25 Building wheels for collected packages: agent-evaluation
#6 38.25   Building editable for agent-evaluation (pyproject.toml): started
#6 38.57   Building editable for agent-evaluation (pyproject.toml): finished with status 'done'
#6 38.57   Created wheel for agent-evaluation: filename=agent_evaluation-0.2.0-0.editable-py3-none-any.whl size=6928 sha256=39bf2c89db49f6a656ef87a227ddf1277cd7457180e3697b1eb0dc1625ca4ef0
#6 38.57   Stored in directory: /tmp/pip-ephem-wheel-cache-ys8mz_dt/wheels/83/05/69/977b54e69478800cfcea8a9437a7ea4a9b1a48db334f824611
#6 38.58 Successfully built agent-evaluation
#6 38.67 Installing collected packages: ply, urllib3, typing-extensions, six, pyyaml, pygments, mdurl, MarkupSafe, jsonpath-ng, jmespath, click, annotated-types, python-dateutil, pydantic-core, markdown-it-py, jinja2, rich, pydantic, botocore, s3transfer, boto3, agent-evaluation
#6 42.25 Successfully installed MarkupSafe-3.0.2 agent-evaluation-0.2.0 annotated-types-0.7.0 boto3-1.35.94 botocore-1.35.94 click-8.1.8 jinja2-3.1.5 jmespath-1.0.1 jsonpath-ng-1.7.0 markdown-it-py-3.0.0 mdurl-0.1.2 ply-3.11 pydantic-2.10.4 pydantic-core-2.27.2 pygments-2.19.1 python-dateutil-2.9.0.post0 pyyaml-6.0.2 rich-13.9.4 s3transfer-0.10.4 six-1.17.0 typing-extensions-4.12.2 urllib3-2.3.0
#6 42.25 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
#6 DONE 43.7s

#7 [4/5] RUN cd /repo && pytest --collect-only -q
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_extract_content_from_xml[<response>test response</response>-element_names0-expected0]
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_extract_content_from_xml[<response>test response</response>-element_names1-expected1]
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_extract_content_from_xml[<response>test response</response>\n<thinking>test reasoning</thinking>-element_names2-expected2]
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_extract_content_from_xml[<response>test response</response><thinking>test reasoning</thinking>-element_names3-expected3]
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_generate
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_run_single_turn_pass
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_run_single_turn_initial_prompt_pass
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_run_multi_turn_pass
#7 1.760 tests/src/agenteval/evaluators/claude_3/test_evaluator.py::TestClaude3::test_run_max_turns_exceeded
#7 1.760 tests/src/agenteval/evaluators/test_evaluator_factory.py::TestEvaluatorFactory::test_create
#7 1.760 tests/src/agenteval/plan/test_logging.py::test_log_run_start
#7 1.760 tests/src/agenteval/plan/test_logging.py::test_log_run_end
#7 1.760 tests/src/agenteval/plan/test_logging.py::test_log_run_end_with_failed_test
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_load
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_init_plan
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_init_plan_exists
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_resolve_num_threads[100-3-3]
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_resolve_num_threads[44-None-44]
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_resolve_num_threads[46-None-45]
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_run
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_run_failed_test
#7 1.760 tests/src/agenteval/plan/test_plan.py::TestPlan::test_run_concurrent
#7 1.760 tests/src/agenteval/targets/bedrock_agent/test_target.py::TestBedrockAgentTarget::test_session_id
#7 1.760 tests/src/agenteval/targets/bedrock_agent/test_target.py::TestBedrockAgentTarget::test_invoke
#7 1.760 tests/src/agenteval/targets/bedrock_knowledge_base/test_target.py::TestBedrockKnowledgebaseTarget::test_invoke
#7 1.760 tests/src/agenteval/targets/lexv2/test_target.py::TestLexV2Target::test_session_id
#7 1.760 tests/src/agenteval/targets/lexv2/test_target.py::TestLexV2Target::test_invoke_closed
#7 1.760 tests/src/agenteval/targets/lexv2/test_target.py::TestLexV2Target::test_invoke_opened
#7 1.760 tests/src/agenteval/targets/q_business/test_target.py::TestQBusinessTarget::test_invoke
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_base_args
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_update_request[test prompt 1-request_body0-input_jp_expr0-expected0]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_update_request[test prompt 2-request_body1-input_jp_expr1-expected1]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_update_request[test prompt 3-request_body2-input_jp_expr2-expected2]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_update_request[test prompt 4-request_body3-input_jp_expr3-expected3]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_query_response[response_body0-output_jp_expr0-test completion 1]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_query_response[response_body1-output_jp_expr1-test completion 2]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_query_response[response_body2-output_jp_expr2-test completion 3]
#7 1.760 tests/src/agenteval/targets/sagemaker_endpoint/test_target.py::TestSageMakerEndpointTarget::test_invoke
#7 1.760 tests/src/agenteval/targets/test_target_factory.py::TestTargetFactory::test_create
#7 1.760 tests/src/agenteval/targets/test_target_factory.py::TestTargetFactory::test_get_target_class
#7 1.760 tests/src/agenteval/targets/test_target_factory.py::TestTargetFactory::test_get_target_class_custom
#7 1.760 tests/src/agenteval/test/test_test_suite.py::TestTestSuite::test_load
#7 1.760 tests/src/agenteval/test/test_test_suite.py::TestTestSuite::test_load_with_filter
#7 1.760 tests/src/agenteval/test/test_test_suite.py::TestTestSuite::test_parse_filter_test_names[test_1-expected0]
#7 1.760 tests/src/agenteval/test/test_test_suite.py::TestTestSuite::test_parse_filter_test_names[test_1,test_2-expected1]
#7 1.760 tests/src/agenteval/test/test_test_suite.py::TestTestSuite::test_parse_filter_test_names[test_1, test_2 -expected2]
#7 1.760 tests/src/agenteval/test_cli.py::test_init
#7 1.760 tests/src/agenteval/test_cli.py::test_init_file_exists
#7 1.760 tests/src/agenteval/test_cli.py::test_run
#7 1.760 tests/src/agenteval/test_cli.py::test_run_tests_failed
#7 1.760 tests/src/agenteval/test_metrics.py::test_calculate_pass_rate_metric[10-10-100.0]
#7 1.760 tests/src/agenteval/test_metrics.py::test_calculate_pass_rate_metric[0-10-0.0]
#7 1.760 tests/src/agenteval/test_metrics.py::test_calculate_pass_rate_metric[1-3-33.33]
#7 1.760 tests/src/agenteval/test_summary.py::test_create_markdown_summary
#7 1.760 tests/src/agenteval/test_trace.py::TestTrace::test_init
#7 1.760 tests/src/agenteval/test_trace.py::TestTrace::test_enter
#7 1.760 tests/src/agenteval/test_trace.py::TestTrace::test_add_step
#7 1.760 tests/src/agenteval/test_trace.py::TestTrace::test_add_step_without_name
#7 1.760 tests/src/agenteval/test_trace.py::TestTrace::test_dump_trace
#7 1.760 tests/src/agenteval/utils/test_aws.py::test_create_boto3_client
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_import_class
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_validate_module_name[test_module_hook]
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_validate_module_name[test_module_target]
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_validate_module_name_error
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_validate_subclass
#7 1.760 tests/src/agenteval/utils/test_imports.py::test_validate_subclass_error
#7 1.760 
#7 1.760 66 tests collected in 0.84s
#7 DONE 2.1s

#8 exporting to image
#8 exporting layers
#8 exporting layers 2.3s done
#8 writing image sha256:357353386ce08196b24d689dcf20cdbd843fdea712c198cddd7ba5113cbafab2 done
#8 naming to docker.io/library/tmp:tmp done
#8 DONE 2.3s
